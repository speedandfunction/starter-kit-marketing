/** src-build.js **/

(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();const dl=()=>{const i=window.apos;i.util={},i.util.emit=function(t,n,s){let r;try{r=new window.CustomEvent(n)}catch{r=document.createEvent("Event"),r.initEvent(n,!0,!0)}i.util.assign(r,s||{}),t.dispatchEvent(r)},i.util.getCookie=function(t){const n=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));return n&&n[2]},i.util.removeClass=function(t,n){t.classList?t.classList.remove(n):t.className=t.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," ")},i.util.addClass=function(t,n){t.classList?t.classList.add(n):t.className+=" "+n},i.util.closest=function(t,n){return t.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(s){let r=this;if(!document.documentElement.contains(r))return null;do{if(r.matches(s))return r;r=r.parentElement||r.parentNode}while(r!==null&&r.nodeType===1);return null}),t.closest(n)},i.util.assign=function(t,n){if(Object.assign)return Object.assign.apply(Object,arguments);let s,r,o,a;for(s=1;s<arguments.length;s++)for(o=Object.keys(arguments[s]),r=0;r<o.length;r++)a=o[r],t[a]=arguments[s][a];return t};const e={list:{},initialized:!1};i.util.widgetPlayers=new Proxy(e.list,{set(t,n,s){return t[n]=s,e.initialized&&i.util.runPlayers(),!0}}),i.util.onReadyAndRefresh=function(t){n(t),setTimeout(function(){i.bus&&i.bus.$on("refreshed",t)},0);function n(s){document.readyState!=="loading"?setTimeout(s,0):document.addEventListener?document.addEventListener("DOMContentLoaded",s):document.attachEvent("onreadystatechange",function(){document.readyState!=="loading"&&s()})}},i.util.onReady=i.util.onReadyAndRefresh.bind(i.util.onReadyAndRefresh),i.util.runPlayers=function(t){const n=i.util.widgetPlayers,s=Object.keys(n);for(let r=0;r<s.length;r++){const o=n[s[r]];(t||document).querySelectorAll(o.selector).forEach(function(l){l.aposWidgetPlayed||(l.aposWidgetPlayed=!0,o.player(l))})}},i.bus||i.util.onReady(function(){e.initialized=!0,i.util.runPlayers()}),i.util.attachmentUrl=function(t,n){let s=i.uploadsUrl+"/attachments/"+t._id+"-"+t.name;n||(n={});let r;n.crop&&n.crop.width?r=n.crop:t.crop&&t.crop.width&&(r=t.crop),r&&(s+="."+r.left+"."+r.top+"."+r.width+"."+r.height);let o;return!n.size||n.size==="original"?o=!1:o=n.size,o&&(s+="."+o),s+"."+t.extension},i.util.assetUrl=function(t){return i.assetBaseUrl+t},i.util.sameSite=function(t){const n=t.match(/^(https?:)?\/\/([^/]+)/);return n?window.location.host===n[2]:!0}},ul=()=>{const i={},e=window.apos;e.http={},e.http.post=function(t,n,s){return e.http.remote("POST",t,n,s)},e.http.get=function(t,n,s){return e.http.remote("GET",t,n,s)},e.http.patch=function(t,n,s){return e.http.remote("PATCH",t,n,s)},e.http.put=function(t,n,s){return e.http.remote("PUT",t,n,s)},e.http.delete=function(t,n,s){return e.http.remote("DELETE",t,n,s)},e.http.remote=function(t,n,s,r){var p;if(!r){if(!window.Promise)throw new Error("If you wish to receive a promise from apos.http methods in older browsers you must have a Promise polyfill. If you do not want to provide one, pass a callback instead.");return new window.Promise(function(_,v){return n?e.http.remote(t,n,s,function(x,b){return x?v(x):_(b)}):v(new Error("url is not defined"))})}if(!n)return r(new Error("url is not defined"));e.sitePrefix&&s.prefix!==!1&&n.substring(0,1)==="/"&&(n=e.sitePrefix+n);let o,a;s.draft!=null&&(s.qs?s.qs=s.draft?e.util.assign({aposMode:"draft"},s.qs):e.util.assign({aposMode:"published"},s.qs):(a=n.indexOf("?"),a!==-1?o=e.http.parseQuery(n.substring(a)):o={},o.aposMode=s.draft?"draft":"published",n=e.http.addQueryToUrl(n,o)));const l=s.busy===!0?"busy":s.busy,c=new XMLHttpRequest;let h=s.body,d,u;a=n.indexOf("?");const f={...a!==-1&&e.http.parseQuery(n.substring(a)),...s.qs||{},...(p=s.qs)!=null&&p.aposLocale?{aposLocale:s.qs.aposLocale}:{aposLocale:e.getActiveLocale()}};n=e.http.addQueryToUrl(n,f),s.busy&&(i[l]||(i[l]=0,e.bus&&e.bus.$emit("busy",{active:!0,name:l})),i[l]++),c.open(t,n);const m=window.FormData&&h instanceof window.FormData,g=s.send==="json"||s.body&&typeof s.body=="object"&&!m;if(g&&c.setRequestHeader("Content-Type","application/json"),s.headers)for(d=Object.keys(s.headers),u=0;u<d.length;u++)c.setRequestHeader(d[u],s.headers[d[u]]);e.util.emit(document.body,"apos-before-"+t.toLowerCase(),{uri:n,data:s.body,request:c}),g?h=JSON.stringify(s.body):h=s.body,c.addEventListener("load",function(){let _=null;const v=this.getResponseHeader("Content-Type");if(v||s.parse==="json")if(s.parse==="json"||v.match(/^application\/json/))try{_=JSON.parse(this.responseText)}catch(x){return r(x)}else _=this.responseText;if(c.status<400)return s.fullResponse?r(null,{body:_,status:c.status,headers:y()}):r(null,_);{const x=new Error(_&&_.message||_&&_.name||"Error");return x.status=c.status,x.name=_&&_.name,x.body=_,x.headers=y(),r(x)}}),c.addEventListener("abort",function(_){return r(_)}),c.addEventListener("error",function(_){return r(_)}),s.downloadProgress&&c.addEventListener("progress",function(_){s.downloadProgress(_.loaded,_.lengthComputable?_.total:null)}),c.upload&&s.uploadProgress&&c.upload.addEventListener("progress",function(_){s.uploadProgress(_.loaded,_.lengthComputable?_.total:null)}),c.addEventListener("loadend",function(_){s.busy&&(i[l]--,i[l]||e.bus&&e.bus.$emit("busy",{active:!1,name:l}))}),c.send(h);function y(){const _=c.getAllResponseHeaders();if(!_)return{};const v=_.trim().split(/[\r\n]+/),x={};return v.forEach(function(b){const I=b.split(": "),P=I.shift();if(!P)return;const L=I.shift();x[P.toLowerCase()]=L}),x}},e.http.parseQuery=function(t){t=t.replace(/^\?/,"");const n={};return t.split("&").forEach(function(o){let a;o.indexOf("=")===-1?r(o,null):(a=o.split("="),a&&r(a[0],a[1]))}),n.root||{};function r(o,a){let l,c="root",h=n;o=decodeURIComponent(o),o.split("[").forEach(function(u){u==="]"?(Array.isArray(h[c])||(h[c]=[]),h=h[c],c=h.length):u.match(/^\d+]/)?(l=u.match(/^\d+/),Array.isArray(h[c])||(h[c]=[]),h=h[c],c=parseInt(l)):(l=u.replace("]",""),h[c]||(h[c]={}),h=h[c],c=l)}),a=a===null?a:decodeURIComponent(a),Array.isArray(h[c])?h[c].push(a):h[c]!==void 0?h[c]=[h[c],a]:h[c]=a}},e.http.addQueryToUrl=function(t,n){let s="";const r=t.indexOf("#");r!==-1&&(s=t.substring(r),t=t.substring(0,r)),t=t.replace(/\?.*$/,"");let o,a;if(n!=null&&typeof n=="object")for(a=l("",n),o=0;o<a.length;o++){const c=a[o][0],h=a[o][1];o>0?t+="&":t+="?",h==null?t+=encodeURIComponent(c):t+=encodeURIComponent(c)+"="+encodeURIComponent(h)}return t+s;function l(c,h){let d=[],u,f;if(Array.isArray(h))for(f=0;f<h.length;f++)m(f,h[f]);else for(u=Object.keys(h),f=0;f<u.length;f++)m(u[f],h[u[f]]);return d;function m(g,y){y!=null&&typeof y=="object"?d=d.concat(l(c.length?c+"["+g+"]":g,y)):d.push([c.length?c+"["+g+"]":g,y])}}}},fl=()=>{dl(),ul()},ml=()=>{apos.getActiveLocale=()=>{var i,e;return((e=(i=apos.modal)==null?void 0:i.getActiveLocale)==null?void 0:e.call(i))||apos.locale}};function gl(){const i=!(apos.login&&apos.login.user),e=apos.util.getCookie(`${self.apos.shortName}.loggedIn`)==="true";if(!i||!e){sessionStorage.setItem("aposRefreshedPages","{}");return}const t=JSON.parse(sessionStorage.aposRefreshedPages||"{}");t[location.href]||(t[location.href]=!0,sessionStorage.setItem("aposRefreshedPages",JSON.stringify(t)),console.info("Received logged-out content from cache while logged-in, refreshing the page"),location.reload())}const pl=()=>{apos.oembedCache||(apos.oembedCache={}),apos.util.widgetPlayers["@apostrophecms/video"]={selector:"[data-apos-video-widget]",player:function(i){const e=i.getAttribute("data-apos-video-url");let t;if(!e)return;n(i,{url:e});function n(a,l){return apos.util.removeClass(a,"apos-oembed-invalid"),apos.util.addClass(a,"apos-oembed-busy"),l.url?s(l,function(c,h){return t=h,c||l.type&&h.type!==l.type?o(c||"inappropriate"):(apos.util.removeClass(a,"apos-oembed-busy"),r(a,h))}):o("undefined")}function s(a,l){if(Object.hasOwn(apos.oembedCache,a.url))return l(null,apos.oembedCache[a.url]);const c={qs:{url:a.url}};return apos.http.get("/api/v1/@apostrophecms/oembed/query",c,function(h,d){return h?l(h):(apos.oembedCache[a.url]=d,l(null,d))})}function r(a,l){const c=document.createElement("div");c.innerHTML=l.html;const h=c.firstChild;h.setAttribute("data-apos-video-canvas",""),a.innerHTML="",h&&(h.removeAttribute("width"),h.removeAttribute("height"),l.width&&l.height&&(h.style.width="100%",h.style.aspectRatio=`${t.width} / ${t.height}`),a.append(h))}function o(a){apos.util.removeClass(i,"apos-oembed-busy"),apos.util.addClass(i,"apos-oembed-invalid"),console.error(a),a!=="undefined"?i.innerHTML="<p>Error loading video</p>":i.innerHTML=""}}}},_l=()=>{apos.aposForm=apos.aposForm||{},apos.aposForm.collectors={}};function Ir(i,e){const t=e.querySelector("[data-apos-form-form]"),n=e.querySelector("[data-apos-form-submit-error]");apos.util.emit(document.body,"@apostrophecms/form:submission-failed",{form:t,errors:i}),apos.util.addClass(n,"apos-form-visible"),yl(e,i)}function yl(i,e){if(!Array.isArray(e))return;const t=i.querySelector("[data-apos-form-form]"),n=i.querySelector("[data-apos-form-global-error]");n.innerText="",e.forEach(function(s){if(!vl(s))return;if(s.global){n.innerText=n.innerText+" "+s.message;return}let r=t.querySelectorAll(`[name=${s.field}]`);r=Array.prototype.slice.call(r);const o=t.querySelector(`[data-apos-input-message=${s.field}]`);r.forEach(function(a){apos.util.addClass(a,"apos-form-input-error")}),apos.util.addClass(o,"apos-form-error"),o.innerText=s.message,o.hidden=!1})}function vl(i){return!(!i.global&&!i.field||!i.message)}async function xl(i){var n;if(!apos.aposForm.collectors||apos.aposForm.collectors.length===0)return;const e=[],t={};for(const s in apos.aposForm.collectors){const r=apos.aposForm.collectors[s].selector,o=apos.aposForm.collectors[s].collector,a=i.querySelectorAll(r);for(const l of a)try{const c=await o(l);(typeof c!="object"||!c.field)&&console.error(`${s} field widget type is returning an invalid collector response.`),t[c.field]=c.files?{value:c.value,files:c.files}:c.value}catch(c){const h=c.field?c:(n=c==null?void 0:c.data)==null?void 0:n.fieldError;if(h!=null&&h.field){const d=h;e.push({field:d.field,message:d.message||"Error"})}else e.push({global:!0,message:"Unknown form field error"})}}if(e.length>0){const s=new Error("invalid");throw s.data={formErrors:e},s}return t}let Is;function El(i){if(i.querySelector("[data-apos-recaptcha-sitekey]"))return Is=i.querySelector("[data-apos-recaptcha-sitekey]").dataset.aposRecaptchaSitekey,document.querySelector("[data-apos-recaptcha-script]")||(window.enableSubmissions=function(){grecaptcha.ready(function(){[...document.querySelectorAll("[data-apos-form-submit]")].forEach(t=>{t.disabled=!1})})},Sl(Is)),{getToken:bl}}function Sl(i){const e=document.querySelector("[data-apos-refreshable]")||document.body,t=document.createElement("script");t.src=apos.http.addQueryToUrl("https://www.google.com/recaptcha/api.js",{render:i,onload:"enableSubmissions"}),t.setAttribute("data-apos-recaptcha-script",""),t.setAttribute("async",""),t.setAttribute("defer",""),e.appendChild(t)}async function bl(i){return grecaptcha.execute(Is,{action:"submit"})}const Tl=()=>{apos.util.widgetPlayers["@apostrophecms/form"]={selector:"[data-apos-form-wrapper]",player:function(i){const e=i.querySelector("[data-apos-form-form]");if(!e)return;e.addEventListener("submit",n);const t=El(i);e.hasAttribute("data-apos-form-params")&&s();async function n(a){var y,p,_,v;if(a.preventDefault(),(y=apos==null?void 0:apos.adminBar)!=null&&y.editMode){await apos.notify("aposForm:disabledInEditMode",{type:"info"});return}if(i.querySelector("[data-apos-form-busy]"))return setTimeout(async function(){await n(a)},100);e.setAttribute("data-apos-form-busy","1");let l;const c=new window.FormData;try{l=await xl(e);for(const x in l)typeof l[x]=="object"&&l[x].files&&(await o(x,l[x],c),l[x]="files-pending")}catch(x){Ir((p=x==null?void 0:x.data)==null?void 0:p.formErrors,i),e.removeAttribute("data-apos-form-busy");return}if(l._id=e.getAttribute("data-apos-form-form"),t){const x=i.querySelector("[data-apos-form-recaptcha-error]");try{l.recaptcha=await t.getToken(i)}catch(b){return console.error("reCAPTCHA execution error:",b),apos.util.addClass(x,"apos-form-visible"),null}}const h=i.querySelector("[data-apos-form-submit-error]"),d=i.querySelector("[data-apos-form-spinner]"),u=i.querySelector("[data-apos-form-thank-you]");apos.util.removeClass(h,"apos-form-visible"),apos.util.addClass(d,"apos-form-visible");const f=Array.prototype.slice.call(i.querySelectorAll(".apos-form-input-error")),m=Array.prototype.slice.call(i.querySelectorAll("[data-apos-input-message].apos-form-error"));f.forEach(function(x){apos.util.removeClass(x,"apos-form-input-error")}),m.forEach(function(x){apos.util.removeClass(x,"apos-form-error"),x.hidden=!0}),e.hasAttribute("data-apos-form-params")&&r(l);let g=null;c.append("data",JSON.stringify(l));try{await apos.http.post("/api/v1/@apostrophecms/form/submit",{body:c})}catch(x){g=(v=(_=x.body)==null?void 0:_.data)==null?void 0:v.formErrors}e.removeAttribute("data-apos-form-busy"),apos.util.removeClass(d,"apos-form-visible"),g?Ir(g,i):(apos.util.emit(document.body,"@apostrophecms/form:submission-form",{form:e,formError:null}),apos.util.addClass(u,"apos-form-visible"),apos.util.addClass(e,"apos-form-hidden"))}function s(){const a=e.getAttribute("data-apos-form-params").split(","),l=apos.http.parseQuery(window.location.search);a.forEach(function(c){const h=e.querySelector('[name="'+c+'"]');l[c]&&(h&&h.type==="checkbox"?l[c].split(",").forEach(function(d){const u=e.querySelector('[name="'+c+'"][value="'+d+'"]');u&&(u.checked=!0)}):h&&h.type==="radio"?e.querySelector('[name="'+c+'"][value="'+l[c]+'"]').checked=!0:h&&h.type==="select"?h.querySelector('option[value="'+l[c]+'"')&&(h.value=l[c]):h&&(h.value=l[c]))})}function r(a){a.queryParams=apos.http.parseQuery(window.location.search)}async function o(a,l,c){let h=0;for(const d of l.files)c.append(`${a}-${h}`,d),h++}}}},Cl=()=>{apos.aposForm.collectors["@apostrophecms/form-text-field"]={selector:"[data-apos-form-text]",collector(i){const e=i.querySelector("input");return{field:e.getAttribute("name"),value:e.value}}}},Il=()=>{apos.aposForm.collectors["@apostrophecms/form-textarea-field"]={selector:"[data-apos-form-textarea]",collector(i){const e=i.querySelector("textarea");return{field:e.getAttribute("name"),value:e.value}}}},wr="@apostrophecms/form-select-field",Lr="[data-apos-form-select]",wl=()=>{apos.util.widgetPlayers[wr]={selector:Lr,player(i){const e=apos.util.closest(i,"[data-apos-form-form]");if(!e)return;const t=i.querySelector("select"),n=t.getAttribute("name"),s=e.querySelectorAll('[data-apos-form-condition="'+n+'"]');if(s.length>0){const r=apos.aposForm.checkConditional;r(s,t),t.addEventListener("change",function(){r(s,t)})}}},apos.aposForm.collectors[wr]={selector:Lr,collector(i){const e=i.querySelector("select");return{field:e.getAttribute("name"),value:e.value}}}},Mr="@apostrophecms/form-radio-field",Rr="[data-apos-form-radio]",Ll=()=>{apos.util.widgetPlayers[Mr]={selector:Rr,player(i){const e=apos.util.closest(i,"[data-apos-form-form]"),t=i.querySelectorAll('input[type="radio"]');if(!e||t.length===0)return;const n=t[0].getAttribute("name"),s=e.querySelectorAll('[data-apos-form-condition="'+n+'"]');if(s.length>0){const r=i.querySelector('input[type="radio"]:checked'),o=apos.aposForm.checkConditional;o(s,r),Array.prototype.forEach.call(t,function(a){a.addEventListener("change",function(l){o(s,l.target)})})}}},apos.aposForm.collectors[Mr]={selector:Rr,collector(i){const e=i.querySelectorAll('input[type="radio"]'),t=i.querySelector('input[type="radio"]:checked');return{field:e[0].getAttribute("name"),value:t?t.value:void 0}}}},Ml="@apostrophecms/form-file-field",Rl="[data-apos-form-file]",Al=()=>{const i=({units:t,size:n})=>n<1e3?`${n} ${t.B}`:n<1e6?`${(n/1e3).toFixed(2)} ${t.KB}`:n<1e9?`${(n/1e6).toFixed(2)} ${t.MB}`:`${(n/1e9).toFixed(2)} ${t.GB}`,e=t=>{if(!t.dataset.maxSize)return;const{files:n}=t,s=Array.from(n||[]).reduce((l,{size:c})=>l+c,0),r=JSON.parse(t.dataset.fileSizeUnits||"{}"),o=t.dataset.maxSize,a=(t.dataset.maxSizeError||"").replace("%2$s",i({size:o,units:r}));if(o&&s>o){const l=new Error(a.replace("%1$s",i({size:s,units:r})));throw l.field=t.getAttribute("name"),l}};apos.aposForm.collectors[Ml]={selector:Rl,collector(t){const n=t.querySelector('input[type="file"]');return e(n),{field:n.getAttribute("name"),value:"pending",files:n.files}}}},Ar="@apostrophecms/form-checkboxes-field",Pr="[data-apos-form-checkboxes]",Pl=()=>{apos.util.widgetPlayers[Ar]={selector:Pr,player(i){const e=apos.util.closest(i,"[data-apos-form-form]");if(!e)return;const t=i.querySelectorAll('input[type="checkbox"]'),n=t[0].getAttribute("name"),s=e.querySelectorAll('[data-apos-form-condition="'+n+'"]');if(s.length>0){const o=apos.aposForm.checkConditional;Array.prototype.forEach.call(t,function(a){a.addEventListener("change",function(l){o(s,l.target)})})}const r=i.querySelector("[data-apos-form-toggle]");r&&(r.onclick=function(o){o.stopPropagation(),o.preventDefault();const a="is-active";i.classList.contains(a)?i.classList.remove(a):i.classList.add(a)})}},apos.aposForm.collectors[Ar]={selector:Pr,collector(i){const e=i.querySelectorAll('input[type="checkbox"]:checked'),t=Array.prototype.slice.call(e);return t.length===0?{field:i.querySelector('input[type="checkbox"]').getAttribute("name"),value:void 0}:{field:e[0].getAttribute("name"),value:t.map(n=>n.value)}}}},Or="@apostrophecms/form-boolean-field",Dr="[data-apos-form-boolean]",Ol=()=>{apos.util.widgetPlayers[Or]={selector:Dr,player(i){const e=apos.util.closest(i,"[data-apos-form-form]");if(!e)return;const t=i.querySelector('input[type="checkbox"]'),n=t.getAttribute("name"),s=e.querySelectorAll('[data-apos-form-condition="'+n+'"]');if(s.length>0){const r=apos.aposForm.checkConditional;t.checked&&r(s,t),t.addEventListener("change",function(o){r(s,o.target)})}}},apos.aposForm.collectors[Or]={selector:Dr,collector(i){const e=i.querySelector('input[type="checkbox"]');return{field:e.getAttribute("name"),value:e.checked}}}},Dl=()=>{apos.aposForm.checkConditional=function(i,e){i||(i=[]),e&&Array.prototype.slice.call(i).forEach(function(t){const n=t.getAttribute("data-apos-form-condition-value");let s=!0;e.type==="checkbox"&&e.value!==n||(e.type==="checkbox"&&!e.checked&&(s=!1),e.value===n&&s?t.removeAttribute("disabled"):t.setAttribute("disabled",!0))})}};function kl(){if(document.querySelector(".navigation__menu-btn")){const i=document.querySelector(".navigation__menu-btn"),e=document.querySelector(".navigation__nav-items");i.addEventListener("click",function(){e.classList.toggle("navigation__show")})}}function Fl(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Sn={exports:{}},zl=Sn.exports,kr;function Nl(){return kr||(kr=1,function(i,e){(function(t,n){i.exports=n()})(zl,function(){return function(t){function n(r){if(s[r])return s[r].exports;var o=s[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var s={};return n.m=t,n.c=s,n.p="dist/",n(0)}([function(t,n,s){function r(C){return C&&C.__esModule?C:{default:C}}var o=Object.assign||function(C){for(var R=1;R<arguments.length;R++){var w=arguments[R];for(var M in w)Object.prototype.hasOwnProperty.call(w,M)&&(C[M]=w[M])}return C},a=s(1),l=(r(a),s(6)),c=r(l),h=s(7),d=r(h),u=s(8),f=r(u),m=s(9),g=r(m),y=s(10),p=r(y),_=s(11),v=r(_),x=s(14),b=r(x),I=[],P=!1,L={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},O=function(){var C=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(C&&(P=!0),P)return I=(0,v.default)(I,L),(0,p.default)(I,L.once),I},k=function(){I=(0,b.default)(),O()},T=function(){I.forEach(function(C,R){C.node.removeAttribute("data-aos"),C.node.removeAttribute("data-aos-easing"),C.node.removeAttribute("data-aos-duration"),C.node.removeAttribute("data-aos-delay")})},S=function(C){return C===!0||C==="mobile"&&g.default.mobile()||C==="phone"&&g.default.phone()||C==="tablet"&&g.default.tablet()||typeof C=="function"&&C()===!0},E=function(C){L=o(L,C),I=(0,b.default)();var R=document.all&&!window.atob;return S(L.disable)||R?T():(L.disableMutationObserver||f.default.isSupported()||(console.info(`
      aos: MutationObserver is not supported on this browser,
      code mutations observing has been disabled.
      You may have to call "refreshHard()" by yourself.
    `),L.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",L.easing),document.querySelector("body").setAttribute("data-aos-duration",L.duration),document.querySelector("body").setAttribute("data-aos-delay",L.delay),L.startEvent==="DOMContentLoaded"&&["complete","interactive"].indexOf(document.readyState)>-1?O(!0):L.startEvent==="load"?window.addEventListener(L.startEvent,function(){O(!0)}):document.addEventListener(L.startEvent,function(){O(!0)}),window.addEventListener("resize",(0,d.default)(O,L.debounceDelay,!0)),window.addEventListener("orientationchange",(0,d.default)(O,L.debounceDelay,!0)),window.addEventListener("scroll",(0,c.default)(function(){(0,p.default)(I,L.once)},L.throttleDelay)),L.disableMutationObserver||f.default.ready("[data-aos]",k),I)};t.exports={init:E,refresh:O,refreshHard:k}},function(t,n){},,,,,function(t,n){(function(s){function r(S,E,C){function R(Y){var ne=G,ce=B;return G=B=void 0,ue=Y,K=S.apply(ce,ne)}function w(Y){return ue=Y,$=setTimeout(F,E),fe?R(Y):K}function M(Y){var ne=Y-te,ce=Y-ue,we=E-ne;return le?k(we,ee-ce):we}function A(Y){var ne=Y-te,ce=Y-ue;return te===void 0||ne>=E||ne<0||le&&ce>=ee}function F(){var Y=T();return A(Y)?z(Y):void($=setTimeout(F,M(Y)))}function z(Y){return $=void 0,j&&G?R(Y):(G=B=void 0,K)}function Z(){$!==void 0&&clearTimeout($),ue=0,G=te=B=$=void 0}function D(){return $===void 0?K:z(T())}function N(){var Y=T(),ne=A(Y);if(G=arguments,B=this,te=Y,ne){if($===void 0)return w(te);if(le)return $=setTimeout(F,E),R(te)}return $===void 0&&($=setTimeout(F,E)),K}var G,B,ee,K,$,te,ue=0,fe=!1,le=!1,j=!0;if(typeof S!="function")throw new TypeError(u);return E=h(E)||0,a(C)&&(fe=!!C.leading,le="maxWait"in C,ee=le?O(h(C.maxWait)||0,E):ee,j="trailing"in C?!!C.trailing:j),N.cancel=Z,N.flush=D,N}function o(S,E,C){var R=!0,w=!0;if(typeof S!="function")throw new TypeError(u);return a(C)&&(R="leading"in C?!!C.leading:R,w="trailing"in C?!!C.trailing:w),r(S,E,{leading:R,maxWait:E,trailing:w})}function a(S){var E=typeof S>"u"?"undefined":d(S);return!!S&&(E=="object"||E=="function")}function l(S){return!!S&&(typeof S>"u"?"undefined":d(S))=="object"}function c(S){return(typeof S>"u"?"undefined":d(S))=="symbol"||l(S)&&L.call(S)==m}function h(S){if(typeof S=="number")return S;if(c(S))return f;if(a(S)){var E=typeof S.valueOf=="function"?S.valueOf():S;S=a(E)?E+"":E}if(typeof S!="string")return S===0?S:+S;S=S.replace(g,"");var C=p.test(S);return C||_.test(S)?v(S.slice(2),C?2:8):y.test(S)?f:+S}var d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},u="Expected a function",f=NaN,m="[object Symbol]",g=/^\s+|\s+$/g,y=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,_=/^0o[0-7]+$/i,v=parseInt,x=(typeof s>"u"?"undefined":d(s))=="object"&&s&&s.Object===Object&&s,b=(typeof self>"u"?"undefined":d(self))=="object"&&self&&self.Object===Object&&self,I=x||b||Function("return this")(),P=Object.prototype,L=P.toString,O=Math.max,k=Math.min,T=function(){return I.Date.now()};t.exports=o}).call(n,function(){return this}())},function(t,n){(function(s){function r(T,S,E){function C(j){var Y=N,ne=G;return N=G=void 0,te=j,ee=T.apply(ne,Y)}function R(j){return te=j,K=setTimeout(A,S),ue?C(j):ee}function w(j){var Y=j-$,ne=j-te,ce=S-Y;return fe?O(ce,B-ne):ce}function M(j){var Y=j-$,ne=j-te;return $===void 0||Y>=S||Y<0||fe&&ne>=B}function A(){var j=k();return M(j)?F(j):void(K=setTimeout(A,w(j)))}function F(j){return K=void 0,le&&N?C(j):(N=G=void 0,ee)}function z(){K!==void 0&&clearTimeout(K),te=0,N=$=G=K=void 0}function Z(){return K===void 0?ee:F(k())}function D(){var j=k(),Y=M(j);if(N=arguments,G=this,$=j,Y){if(K===void 0)return R($);if(fe)return K=setTimeout(A,S),C($)}return K===void 0&&(K=setTimeout(A,S)),ee}var N,G,B,ee,K,$,te=0,ue=!1,fe=!1,le=!0;if(typeof T!="function")throw new TypeError(d);return S=c(S)||0,o(E)&&(ue=!!E.leading,fe="maxWait"in E,B=fe?L(c(E.maxWait)||0,S):B,le="trailing"in E?!!E.trailing:le),D.cancel=z,D.flush=Z,D}function o(T){var S=typeof T>"u"?"undefined":h(T);return!!T&&(S=="object"||S=="function")}function a(T){return!!T&&(typeof T>"u"?"undefined":h(T))=="object"}function l(T){return(typeof T>"u"?"undefined":h(T))=="symbol"||a(T)&&P.call(T)==f}function c(T){if(typeof T=="number")return T;if(l(T))return u;if(o(T)){var S=typeof T.valueOf=="function"?T.valueOf():T;T=o(S)?S+"":S}if(typeof T!="string")return T===0?T:+T;T=T.replace(m,"");var E=y.test(T);return E||p.test(T)?_(T.slice(2),E?2:8):g.test(T)?u:+T}var h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},d="Expected a function",u=NaN,f="[object Symbol]",m=/^\s+|\s+$/g,g=/^[-+]0x[0-9a-f]+$/i,y=/^0b[01]+$/i,p=/^0o[0-7]+$/i,_=parseInt,v=(typeof s>"u"?"undefined":h(s))=="object"&&s&&s.Object===Object&&s,x=(typeof self>"u"?"undefined":h(self))=="object"&&self&&self.Object===Object&&self,b=v||x||Function("return this")(),I=Object.prototype,P=I.toString,L=Math.max,O=Math.min,k=function(){return b.Date.now()};t.exports=r}).call(n,function(){return this}())},function(t,n){function s(h){var d=void 0,u=void 0;for(d=0;d<h.length;d+=1)if(u=h[d],u.dataset&&u.dataset.aos||u.children&&s(u.children))return!0;return!1}function r(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function o(){return!!r()}function a(h,d){var u=window.document,f=r(),m=new f(l);c=d,m.observe(u.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}function l(h){h&&h.forEach(function(d){var u=Array.prototype.slice.call(d.addedNodes),f=Array.prototype.slice.call(d.removedNodes),m=u.concat(f);if(s(m))return c()})}Object.defineProperty(n,"__esModule",{value:!0});var c=function(){};n.default={isSupported:o,ready:a}},function(t,n){function s(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function r(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function u(f,m){for(var g=0;g<m.length;g++){var y=m[g];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(f,y.key,y)}}return function(f,m,g){return m&&u(f.prototype,m),g&&u(f,g),f}}(),a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,l=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,c=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,h=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,d=function(){function u(){s(this,u)}return o(u,[{key:"phone",value:function(){var f=r();return!(!a.test(f)&&!l.test(f.substr(0,4)))}},{key:"mobile",value:function(){var f=r();return!(!c.test(f)&&!h.test(f.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),u}();n.default=new d},function(t,n){Object.defineProperty(n,"__esModule",{value:!0});var s=function(o,a,l){var c=o.node.getAttribute("data-aos-once");a>o.position?o.node.classList.add("aos-animate"):typeof c<"u"&&(c==="false"||!l&&c!=="true")&&o.node.classList.remove("aos-animate")},r=function(o,a){var l=window.pageYOffset,c=window.innerHeight;o.forEach(function(h,d){s(h,c+l,a)})};n.default=r},function(t,n,s){function r(c){return c&&c.__esModule?c:{default:c}}Object.defineProperty(n,"__esModule",{value:!0});var o=s(12),a=r(o),l=function(c,h){return c.forEach(function(d,u){d.node.classList.add("aos-init"),d.position=(0,a.default)(d.node,h.offset)}),c};n.default=l},function(t,n,s){function r(c){return c&&c.__esModule?c:{default:c}}Object.defineProperty(n,"__esModule",{value:!0});var o=s(13),a=r(o),l=function(c,h){var d=0,u=0,f=window.innerHeight,m={offset:c.getAttribute("data-aos-offset"),anchor:c.getAttribute("data-aos-anchor"),anchorPlacement:c.getAttribute("data-aos-anchor-placement")};switch(m.offset&&!isNaN(m.offset)&&(u=parseInt(m.offset)),m.anchor&&document.querySelectorAll(m.anchor)&&(c=document.querySelectorAll(m.anchor)[0]),d=(0,a.default)(c).top,m.anchorPlacement){case"top-bottom":break;case"center-bottom":d+=c.offsetHeight/2;break;case"bottom-bottom":d+=c.offsetHeight;break;case"top-center":d+=f/2;break;case"bottom-center":d+=f/2+c.offsetHeight;break;case"center-center":d+=f/2+c.offsetHeight/2;break;case"top-top":d+=f;break;case"bottom-top":d+=c.offsetHeight+f;break;case"center-top":d+=c.offsetHeight/2+f}return m.anchorPlacement||m.offset||isNaN(h)||(u=h),d+u};n.default=l},function(t,n){Object.defineProperty(n,"__esModule",{value:!0});var s=function(r){for(var o=0,a=0;r&&!isNaN(r.offsetLeft)&&!isNaN(r.offsetTop);)o+=r.offsetLeft-(r.tagName!="BODY"?r.scrollLeft:0),a+=r.offsetTop-(r.tagName!="BODY"?r.scrollTop:0),r=r.offsetParent;return{top:a,left:o}};n.default=s},function(t,n){Object.defineProperty(n,"__esModule",{value:!0});var s=function(r){return r=r||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(r,function(o){return{node:o}})};n.default=s}])})}(Sn)),Sn.exports}var Gl=Nl();const Wl=Fl(Gl),Xl=()=>{Wl.init(),kl()},Bl=()=>{apos.util.widgetPlayers.accordion={selector:"[data-accordion]",player:function(i){i.querySelectorAll("[data-accordion-item]").forEach(t=>{const n=t.querySelector("[data-accordion-button]"),s=t.querySelector("[data-accordion-detail]");n.addEventListener("click",()=>{const r=n.getAttribute("aria-expanded")==="true";n.setAttribute("aria-expanded",!r),s.hidden=r})})}}};function Fr(i){return i!==null&&typeof i=="object"&&"constructor"in i&&i.constructor===Object}function Vs(i={},e={}){Object.keys(e).forEach(t=>{typeof i[t]>"u"?i[t]=e[t]:Fr(e[t])&&Fr(i[t])&&Object.keys(e[t]).length>0&&Vs(i[t],e[t])})}const Ho={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function ve(){const i=typeof document<"u"?document:{};return Vs(i,Ho),i}const Yl={document:Ho,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(i){return typeof setTimeout>"u"?(i(),null):setTimeout(i,0)},cancelAnimationFrame(i){typeof setTimeout>"u"||clearTimeout(i)}};function ae(){const i=typeof window<"u"?window:{};return Vs(i,Yl),i}function $l(i){const e=i;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function Gt(i,e=0){return setTimeout(i,e)}function Ne(){return Date.now()}function Hl(i){const e=ae();let t;return e.getComputedStyle&&(t=e.getComputedStyle(i,null)),!t&&i.currentStyle&&(t=i.currentStyle),t||(t=i.style),t}function ws(i,e="x"){const t=ae();let n,s,r;const o=Hl(i);return t.WebKitCSSMatrix?(s=o.transform||o.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(a=>a.replace(",",".")).join(", ")),r=new t.WebKitCSSMatrix(s==="none"?"":s)):(r=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=r.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?s=r.m41:n.length===16?s=parseFloat(n[12]):s=parseFloat(n[4])),e==="y"&&(t.WebKitCSSMatrix?s=r.m42:n.length===16?s=parseFloat(n[13]):s=parseFloat(n[5])),s||0}function Ci(i){return typeof i=="object"&&i!==null&&i.constructor&&Object.prototype.toString.call(i).slice(8,-1)==="Object"}function Zl(i){return typeof window<"u"&&typeof window.HTMLElement<"u"?i instanceof HTMLElement:i&&(i.nodeType===1||i.nodeType===11)}function Ae(...i){const e=Object(i[0]),t=["__proto__","constructor","prototype"];for(let n=1;n<i.length;n+=1){const s=i[n];if(s!=null&&!Zl(s)){const r=Object.keys(Object(s)).filter(o=>t.indexOf(o)<0);for(let o=0,a=r.length;o<a;o+=1){const l=r[o],c=Object.getOwnPropertyDescriptor(s,l);c!==void 0&&c.enumerable&&(Ci(e[l])&&Ci(s[l])?s[l].__swiper__?e[l]=s[l]:Ae(e[l],s[l]):!Ci(e[l])&&Ci(s[l])?(e[l]={},s[l].__swiper__?e[l]=s[l]:Ae(e[l],s[l])):e[l]=s[l])}}}return e}function Ii(i,e,t){i.style.setProperty(e,t)}function Zo({swiper:i,targetPosition:e,side:t}){const n=ae(),s=-i.translate;let r=null,o;const a=i.params.speed;i.wrapperEl.style.scrollSnapType="none",n.cancelAnimationFrame(i.cssModeFrameID);const l=e>s?"next":"prev",c=(d,u)=>l==="next"&&d>=u||l==="prev"&&d<=u,h=()=>{o=new Date().getTime(),r===null&&(r=o);const d=Math.max(Math.min((o-r)/a,1),0),u=.5-Math.cos(d*Math.PI)/2;let f=s+u*(e-s);if(c(f,e)&&(f=e),i.wrapperEl.scrollTo({[t]:f}),c(f,e)){i.wrapperEl.style.overflow="hidden",i.wrapperEl.style.scrollSnapType="",setTimeout(()=>{i.wrapperEl.style.overflow="",i.wrapperEl.scrollTo({[t]:f})}),n.cancelAnimationFrame(i.cssModeFrameID);return}i.cssModeFrameID=n.requestAnimationFrame(h)};h()}function Xt(i){return i.querySelector(".swiper-slide-transform")||i.shadowEl&&i.shadowEl.querySelector(".swiper-slide-transform")||i}function ye(i,e=""){return[...i.children].filter(t=>t.matches(e))}function $e(i,e=[]){const t=document.createElement(i);return t.classList.add(...Array.isArray(e)?e:[e]),t}function Cn(i){const e=ae(),t=ve(),n=i.getBoundingClientRect(),s=t.body,r=i.clientTop||s.clientTop||0,o=i.clientLeft||s.clientLeft||0,a=i===e?e.scrollY:i.scrollTop,l=i===e?e.scrollX:i.scrollLeft;return{top:n.top+a-r,left:n.left+l-o}}function Vl(i,e){const t=[];for(;i.previousElementSibling;){const n=i.previousElementSibling;e?n.matches(e)&&t.push(n):t.push(n),i=n}return t}function jl(i,e){const t=[];for(;i.nextElementSibling;){const n=i.nextElementSibling;e?n.matches(e)&&t.push(n):t.push(n),i=n}return t}function Et(i,e){return ae().getComputedStyle(i,null).getPropertyValue(e)}function Fi(i){let e=i,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function zt(i,e){const t=[];let n=i.parentElement;for(;n;)e?n.matches(e)&&t.push(n):t.push(n),n=n.parentElement;return t}function Pi(i,e){function t(n){n.target===i&&(e.call(i,n),i.removeEventListener("transitionend",t))}e&&i.addEventListener("transitionend",t)}function Ls(i,e,t){const n=ae();return i[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(n.getComputedStyle(i,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(n.getComputedStyle(i,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}let os;function ql(){const i=ae(),e=ve();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in i||i.DocumentTouch&&e instanceof i.DocumentTouch)}}function Vo(){return os||(os=ql()),os}let as;function Ul({userAgent:i}={}){const e=Vo(),t=ae(),n=t.navigator.platform,s=i||t.navigator.userAgent,r={ios:!1,android:!1},o=t.screen.width,a=t.screen.height,l=s.match(/(Android);?[\s\/]+([\d.]+)?/);let c=s.match(/(iPad).*OS\s([\d_]+)/);const h=s.match(/(iPod)(.*OS\s([\d_]+))?/),d=!c&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),u=n==="Win32";let f=n==="MacIntel";const m=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!c&&f&&e.touch&&m.indexOf(`${o}x${a}`)>=0&&(c=s.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),f=!1),l&&!u&&(r.os="android",r.android=!0),(c||d||h)&&(r.os="ios",r.ios=!0),r}function Kl(i={}){return as||(as=Ul(i)),as}let ls;function Jl(){const i=ae();let e=!1;function t(){const n=i.navigator.userAgent.toLowerCase();return n.indexOf("safari")>=0&&n.indexOf("chrome")<0&&n.indexOf("android")<0}if(t()){const n=String(i.navigator.userAgent);if(n.includes("Version/")){const[s,r]=n.split("Version/")[1].split(" ")[0].split(".").map(o=>Number(o));e=s<16||s===16&&r<2}}return{isSafari:e||t(),needPerspectiveFix:e,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(i.navigator.userAgent)}}function Ql(){return ls||(ls=Jl()),ls}function ec({swiper:i,on:e,emit:t}){const n=ae();let s=null,r=null;const o=()=>{!i||i.destroyed||!i.initialized||(t("beforeResize"),t("resize"))},a=()=>{!i||i.destroyed||!i.initialized||(s=new ResizeObserver(h=>{r=n.requestAnimationFrame(()=>{const{width:d,height:u}=i;let f=d,m=u;h.forEach(({contentBoxSize:g,contentRect:y,target:p})=>{p&&p!==i.el||(f=y?y.width:(g[0]||g).inlineSize,m=y?y.height:(g[0]||g).blockSize)}),(f!==d||m!==u)&&o()})}),s.observe(i.el))},l=()=>{r&&n.cancelAnimationFrame(r),s&&s.unobserve&&i.el&&(s.unobserve(i.el),s=null)},c=()=>{!i||i.destroyed||!i.initialized||t("orientationchange")};e("init",()=>{if(i.params.resizeObserver&&typeof n.ResizeObserver<"u"){a();return}n.addEventListener("resize",o),n.addEventListener("orientationchange",c)}),e("destroy",()=>{l(),n.removeEventListener("resize",o),n.removeEventListener("orientationchange",c)})}function tc({swiper:i,extendParams:e,on:t,emit:n}){const s=[],r=ae(),o=(c,h={})=>{const d=r.MutationObserver||r.WebkitMutationObserver,u=new d(f=>{if(i.__preventObserver__)return;if(f.length===1){n("observerUpdate",f[0]);return}const m=function(){n("observerUpdate",f[0])};r.requestAnimationFrame?r.requestAnimationFrame(m):r.setTimeout(m,0)});u.observe(c,{attributes:typeof h.attributes>"u"?!0:h.attributes,childList:typeof h.childList>"u"?!0:h.childList,characterData:typeof h.characterData>"u"?!0:h.characterData}),s.push(u)},a=()=>{if(i.params.observer){if(i.params.observeParents){const c=zt(i.el);for(let h=0;h<c.length;h+=1)o(c[h])}o(i.el,{childList:i.params.observeSlideChildren}),o(i.wrapperEl,{attributes:!1})}},l=()=>{s.forEach(c=>{c.disconnect()}),s.splice(0,s.length)};e({observer:!1,observeParents:!1,observeSlideChildren:!1}),t("init",a),t("destroy",l)}const ic={on(i,e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;const s=t?"unshift":"push";return i.split(" ").forEach(r=>{n.eventsListeners[r]||(n.eventsListeners[r]=[]),n.eventsListeners[r][s](e)}),n},once(i,e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;function s(...r){n.off(i,s),s.__emitterProxy&&delete s.__emitterProxy,e.apply(n,r)}return s.__emitterProxy=e,n.on(i,s,t)},onAny(i,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof i!="function")return t;const n=e?"unshift":"push";return t.eventsAnyListeners.indexOf(i)<0&&t.eventsAnyListeners[n](i),t},offAny(i){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(i);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(i,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||i.split(" ").forEach(n=>{typeof e>"u"?t.eventsListeners[n]=[]:t.eventsListeners[n]&&t.eventsListeners[n].forEach((s,r)=>{(s===e||s.__emitterProxy&&s.__emitterProxy===e)&&t.eventsListeners[n].splice(r,1)})}),t},emit(...i){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let t,n,s;return typeof i[0]=="string"||Array.isArray(i[0])?(t=i[0],n=i.slice(1,i.length),s=e):(t=i[0].events,n=i[0].data,s=i[0].context||e),n.unshift(s),(Array.isArray(t)?t:t.split(" ")).forEach(o=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(a=>{a.apply(s,[o,...n])}),e.eventsListeners&&e.eventsListeners[o]&&e.eventsListeners[o].forEach(a=>{a.apply(s,n)})}),e}};function nc(){const i=this;let e,t;const n=i.el;typeof i.params.width<"u"&&i.params.width!==null?e=i.params.width:e=n.clientWidth,typeof i.params.height<"u"&&i.params.height!==null?t=i.params.height:t=n.clientHeight,!(e===0&&i.isHorizontal()||t===0&&i.isVertical())&&(e=e-parseInt(Et(n,"padding-left")||0,10)-parseInt(Et(n,"padding-right")||0,10),t=t-parseInt(Et(n,"padding-top")||0,10)-parseInt(Et(n,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(i,{width:e,height:t,size:i.isHorizontal()?e:t}))}function sc(){const i=this;function e(T){return i.isHorizontal()?T:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[T]}function t(T,S){return parseFloat(T.getPropertyValue(e(S))||0)}const n=i.params,{wrapperEl:s,slidesEl:r,size:o,rtlTranslate:a,wrongRTL:l}=i,c=i.virtual&&n.virtual.enabled,h=c?i.virtual.slides.length:i.slides.length,d=ye(r,`.${i.params.slideClass}, swiper-slide`),u=c?i.virtual.slides.length:d.length;let f=[];const m=[],g=[];let y=n.slidesOffsetBefore;typeof y=="function"&&(y=n.slidesOffsetBefore.call(i));let p=n.slidesOffsetAfter;typeof p=="function"&&(p=n.slidesOffsetAfter.call(i));const _=i.snapGrid.length,v=i.slidesGrid.length;let x=n.spaceBetween,b=-y,I=0,P=0;if(typeof o>"u")return;typeof x=="string"&&x.indexOf("%")>=0?x=parseFloat(x.replace("%",""))/100*o:typeof x=="string"&&(x=parseFloat(x)),i.virtualSize=-x,d.forEach(T=>{a?T.style.marginLeft="":T.style.marginRight="",T.style.marginBottom="",T.style.marginTop=""}),n.centeredSlides&&n.cssMode&&(Ii(s,"--swiper-centered-offset-before",""),Ii(s,"--swiper-centered-offset-after",""));const L=n.grid&&n.grid.rows>1&&i.grid;L&&i.grid.initSlides(u);let O;const k=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(T=>typeof n.breakpoints[T].slidesPerView<"u").length>0;for(let T=0;T<u;T+=1){O=0;let S;if(d[T]&&(S=d[T]),L&&i.grid.updateSlide(T,S,u,e),!(d[T]&&Et(S,"display")==="none")){if(n.slidesPerView==="auto"){k&&(d[T].style[e("width")]="");const E=getComputedStyle(S),C=S.style.transform,R=S.style.webkitTransform;if(C&&(S.style.transform="none"),R&&(S.style.webkitTransform="none"),n.roundLengths)O=i.isHorizontal()?Ls(S,"width"):Ls(S,"height");else{const w=t(E,"width"),M=t(E,"padding-left"),A=t(E,"padding-right"),F=t(E,"margin-left"),z=t(E,"margin-right"),Z=E.getPropertyValue("box-sizing");if(Z&&Z==="border-box")O=w+F+z;else{const{clientWidth:D,offsetWidth:N}=S;O=w+M+A+F+z+(N-D)}}C&&(S.style.transform=C),R&&(S.style.webkitTransform=R),n.roundLengths&&(O=Math.floor(O))}else O=(o-(n.slidesPerView-1)*x)/n.slidesPerView,n.roundLengths&&(O=Math.floor(O)),d[T]&&(d[T].style[e("width")]=`${O}px`);d[T]&&(d[T].swiperSlideSize=O),g.push(O),n.centeredSlides?(b=b+O/2+I/2+x,I===0&&T!==0&&(b=b-o/2-x),T===0&&(b=b-o/2-x),Math.abs(b)<1/1e3&&(b=0),n.roundLengths&&(b=Math.floor(b)),P%n.slidesPerGroup===0&&f.push(b),m.push(b)):(n.roundLengths&&(b=Math.floor(b)),(P-Math.min(i.params.slidesPerGroupSkip,P))%i.params.slidesPerGroup===0&&f.push(b),m.push(b),b=b+O+x),i.virtualSize+=O+x,I=O,P+=1}}if(i.virtualSize=Math.max(i.virtualSize,o)+p,a&&l&&(n.effect==="slide"||n.effect==="coverflow")&&(s.style.width=`${i.virtualSize+x}px`),n.setWrapperSize&&(s.style[e("width")]=`${i.virtualSize+x}px`),L&&i.grid.updateWrapperSize(O,f,e),!n.centeredSlides){const T=[];for(let S=0;S<f.length;S+=1){let E=f[S];n.roundLengths&&(E=Math.floor(E)),f[S]<=i.virtualSize-o&&T.push(E)}f=T,Math.floor(i.virtualSize-o)-Math.floor(f[f.length-1])>1&&f.push(i.virtualSize-o)}if(c&&n.loop){const T=g[0]+x;if(n.slidesPerGroup>1){const S=Math.ceil((i.virtual.slidesBefore+i.virtual.slidesAfter)/n.slidesPerGroup),E=T*n.slidesPerGroup;for(let C=0;C<S;C+=1)f.push(f[f.length-1]+E)}for(let S=0;S<i.virtual.slidesBefore+i.virtual.slidesAfter;S+=1)n.slidesPerGroup===1&&f.push(f[f.length-1]+T),m.push(m[m.length-1]+T),i.virtualSize+=T}if(f.length===0&&(f=[0]),x!==0){const T=i.isHorizontal()&&a?"marginLeft":e("marginRight");d.filter((S,E)=>!n.cssMode||n.loop?!0:E!==d.length-1).forEach(S=>{S.style[T]=`${x}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let T=0;g.forEach(E=>{T+=E+(x||0)}),T-=x;const S=T-o;f=f.map(E=>E<=0?-y:E>S?S+p:E)}if(n.centerInsufficientSlides){let T=0;if(g.forEach(S=>{T+=S+(x||0)}),T-=x,T<o){const S=(o-T)/2;f.forEach((E,C)=>{f[C]=E-S}),m.forEach((E,C)=>{m[C]=E+S})}}if(Object.assign(i,{slides:d,snapGrid:f,slidesGrid:m,slidesSizesGrid:g}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){Ii(s,"--swiper-centered-offset-before",`${-f[0]}px`),Ii(s,"--swiper-centered-offset-after",`${i.size/2-g[g.length-1]/2}px`);const T=-i.snapGrid[0],S=-i.slidesGrid[0];i.snapGrid=i.snapGrid.map(E=>E+T),i.slidesGrid=i.slidesGrid.map(E=>E+S)}if(u!==h&&i.emit("slidesLengthChange"),f.length!==_&&(i.params.watchOverflow&&i.checkOverflow(),i.emit("snapGridLengthChange")),m.length!==v&&i.emit("slidesGridLengthChange"),n.watchSlidesProgress&&i.updateSlidesOffset(),!c&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){const T=`${n.containerModifierClass}backface-hidden`,S=i.el.classList.contains(T);u<=n.maxBackfaceHiddenSlides?S||i.el.classList.add(T):S&&i.el.classList.remove(T)}}function rc(i){const e=this,t=[],n=e.virtual&&e.params.virtual.enabled;let s=0,r;typeof i=="number"?e.setTransition(i):i===!0&&e.setTransition(e.params.speed);const o=a=>n?e.slides[e.getSlideIndexByData(a)]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{t.push(a)});else for(r=0;r<Math.ceil(e.params.slidesPerView);r+=1){const a=e.activeIndex+r;if(a>e.slides.length&&!n)break;t.push(o(a))}else t.push(o(e.activeIndex));for(r=0;r<t.length;r+=1)if(typeof t[r]<"u"){const a=t[r].offsetHeight;s=a>s?a:s}(s||s===0)&&(e.wrapperEl.style.height=`${s}px`)}function oc(){const i=this,e=i.slides,t=i.isElement?i.isHorizontal()?i.wrapperEl.offsetLeft:i.wrapperEl.offsetTop:0;for(let n=0;n<e.length;n+=1)e[n].swiperSlideOffset=(i.isHorizontal()?e[n].offsetLeft:e[n].offsetTop)-t-i.cssOverflowAdjustment()}function ac(i=this&&this.translate||0){const e=this,t=e.params,{slides:n,rtlTranslate:s,snapGrid:r}=e;if(n.length===0)return;typeof n[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-i;s&&(o=i),n.forEach(l=>{l.classList.remove(t.slideVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];let a=t.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*e.size:typeof a=="string"&&(a=parseFloat(a));for(let l=0;l<n.length;l+=1){const c=n[l];let h=c.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(h-=n[0].swiperSlideOffset);const d=(o+(t.centeredSlides?e.minTranslate():0)-h)/(c.swiperSlideSize+a),u=(o-r[0]+(t.centeredSlides?e.minTranslate():0)-h)/(c.swiperSlideSize+a),f=-(o-h),m=f+e.slidesSizesGrid[l];(f>=0&&f<e.size-1||m>1&&m<=e.size||f<=0&&m>=e.size)&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l),n[l].classList.add(t.slideVisibleClass)),c.progress=s?-d:d,c.originalProgress=s?-u:u}}function lc(i){const e=this;if(typeof i>"u"){const h=e.rtlTranslate?-1:1;i=e&&e.translate&&e.translate*h||0}const t=e.params,n=e.maxTranslate()-e.minTranslate();let{progress:s,isBeginning:r,isEnd:o,progressLoop:a}=e;const l=r,c=o;if(n===0)s=0,r=!0,o=!0;else{s=(i-e.minTranslate())/n;const h=Math.abs(i-e.minTranslate())<1,d=Math.abs(i-e.maxTranslate())<1;r=h||s<=0,o=d||s>=1,h&&(s=0),d&&(s=1)}if(t.loop){const h=e.getSlideIndexByData(0),d=e.getSlideIndexByData(e.slides.length-1),u=e.slidesGrid[h],f=e.slidesGrid[d],m=e.slidesGrid[e.slidesGrid.length-1],g=Math.abs(i);g>=u?a=(g-u)/m:a=(g+m-f)/m,a>1&&(a-=1)}Object.assign(e,{progress:s,progressLoop:a,isBeginning:r,isEnd:o}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(i),r&&!l&&e.emit("reachBeginning toEdge"),o&&!c&&e.emit("reachEnd toEdge"),(l&&!r||c&&!o)&&e.emit("fromEdge"),e.emit("progress",s)}function cc(){const i=this,{slides:e,params:t,slidesEl:n,activeIndex:s}=i,r=i.virtual&&t.virtual.enabled,o=l=>ye(n,`.${t.slideClass}${l}, swiper-slide${l}`)[0];e.forEach(l=>{l.classList.remove(t.slideActiveClass,t.slideNextClass,t.slidePrevClass)});let a;if(r)if(t.loop){let l=s-i.virtual.slidesBefore;l<0&&(l=i.virtual.slides.length+l),l>=i.virtual.slides.length&&(l-=i.virtual.slides.length),a=o(`[data-swiper-slide-index="${l}"]`)}else a=o(`[data-swiper-slide-index="${s}"]`);else a=e[s];if(a){a.classList.add(t.slideActiveClass);let l=jl(a,`.${t.slideClass}, swiper-slide`)[0];t.loop&&!l&&(l=e[0]),l&&l.classList.add(t.slideNextClass);let c=Vl(a,`.${t.slideClass}, swiper-slide`)[0];t.loop&&!c===0&&(c=e[e.length-1]),c&&c.classList.add(t.slidePrevClass)}i.emitSlidesClasses()}const bn=(i,e)=>{if(!i||i.destroyed||!i.params)return;const t=()=>i.isElement?"swiper-slide":`.${i.params.slideClass}`,n=e.closest(t());if(n){const s=n.querySelector(`.${i.params.lazyPreloaderClass}`);s&&s.remove()}},cs=(i,e)=>{if(!i.slides[e])return;const t=i.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},Ms=i=>{if(!i||i.destroyed||!i.params)return;let e=i.params.lazyPreloadPrevNext;const t=i.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const n=i.params.slidesPerView==="auto"?i.slidesPerViewDynamic():Math.ceil(i.params.slidesPerView),s=i.activeIndex;if(i.params.grid&&i.params.grid.rows>1){const o=s,a=[o-e];a.push(...Array.from({length:e}).map((l,c)=>o+n+c)),i.slides.forEach((l,c)=>{a.includes(l.column)&&cs(i,c)});return}const r=s+n-1;if(i.params.rewind||i.params.loop)for(let o=s-e;o<=r+e;o+=1){const a=(o%t+t)%t;(a<s||a>r)&&cs(i,a)}else for(let o=Math.max(s-e,0);o<=Math.min(r+e,t-1);o+=1)o!==s&&(o>r||o<s)&&cs(i,o)};function hc(i){const{slidesGrid:e,params:t}=i,n=i.rtlTranslate?i.translate:-i.translate;let s;for(let r=0;r<e.length;r+=1)typeof e[r+1]<"u"?n>=e[r]&&n<e[r+1]-(e[r+1]-e[r])/2?s=r:n>=e[r]&&n<e[r+1]&&(s=r+1):n>=e[r]&&(s=r);return t.normalizeSlideIndex&&(s<0||typeof s>"u")&&(s=0),s}function dc(i){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:n,params:s,activeIndex:r,realIndex:o,snapIndex:a}=e;let l=i,c;const h=u=>{let f=u-e.virtual.slidesBefore;return f<0&&(f=e.virtual.slides.length+f),f>=e.virtual.slides.length&&(f-=e.virtual.slides.length),f};if(typeof l>"u"&&(l=hc(e)),n.indexOf(t)>=0)c=n.indexOf(t);else{const u=Math.min(s.slidesPerGroupSkip,l);c=u+Math.floor((l-u)/s.slidesPerGroup)}if(c>=n.length&&(c=n.length-1),l===r){c!==a&&(e.snapIndex=c,e.emit("snapIndexChange")),e.params.loop&&e.virtual&&e.params.virtual.enabled&&(e.realIndex=h(l));return}let d;e.virtual&&s.virtual.enabled&&s.loop?d=h(l):e.slides[l]?d=parseInt(e.slides[l].getAttribute("data-swiper-slide-index")||l,10):d=l,Object.assign(e,{previousSnapIndex:a,snapIndex:c,previousRealIndex:o,realIndex:d,previousIndex:r,activeIndex:l}),e.initialized&&Ms(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),o!==d&&e.emit("realIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&e.emit("slideChange")}function uc(i){const e=this,t=e.params,n=i.closest(`.${t.slideClass}, swiper-slide`);let s=!1,r;if(n){for(let o=0;o<e.slides.length;o+=1)if(e.slides[o]===n){s=!0,r=o;break}}if(n&&s)e.clickedSlide=n,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(n.getAttribute("data-swiper-slide-index"),10):e.clickedIndex=r;else{e.clickedSlide=void 0,e.clickedIndex=void 0;return}t.slideToClickedSlide&&e.clickedIndex!==void 0&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}const fc={updateSize:nc,updateSlides:sc,updateAutoHeight:rc,updateSlidesOffset:oc,updateSlidesProgress:ac,updateProgress:lc,updateSlidesClasses:cc,updateActiveIndex:dc,updateClickedSlide:uc};function mc(i=this.isHorizontal()?"x":"y"){const e=this,{params:t,rtlTranslate:n,translate:s,wrapperEl:r}=e;if(t.virtualTranslate)return n?-s:s;if(t.cssMode)return s;let o=ws(r,i);return o+=e.cssOverflowAdjustment(),n&&(o=-o),o||0}function gc(i,e){const t=this,{rtlTranslate:n,params:s,wrapperEl:r,progress:o}=t;let a=0,l=0;const c=0;t.isHorizontal()?a=n?-i:i:l=i,s.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?a:l,s.cssMode?r[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-a:-l:s.virtualTranslate||(t.isHorizontal()?a-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),r.style.transform=`translate3d(${a}px, ${l}px, ${c}px)`);let h;const d=t.maxTranslate()-t.minTranslate();d===0?h=0:h=(i-t.minTranslate())/d,h!==o&&t.updateProgress(i),t.emit("setTranslate",t.translate,e)}function pc(){return-this.snapGrid[0]}function _c(){return-this.snapGrid[this.snapGrid.length-1]}function yc(i=0,e=this.params.speed,t=!0,n=!0,s){const r=this,{params:o,wrapperEl:a}=r;if(r.animating&&o.preventInteractionOnTransition)return!1;const l=r.minTranslate(),c=r.maxTranslate();let h;if(n&&i>l?h=l:n&&i<c?h=c:h=i,r.updateProgress(h),o.cssMode){const d=r.isHorizontal();if(e===0)a[d?"scrollLeft":"scrollTop"]=-h;else{if(!r.support.smoothScroll)return Zo({swiper:r,targetPosition:-h,side:d?"left":"top"}),!0;a.scrollTo({[d?"left":"top"]:-h,behavior:"smooth"})}return!0}return e===0?(r.setTransition(0),r.setTranslate(h),t&&(r.emit("beforeTransitionStart",e,s),r.emit("transitionEnd"))):(r.setTransition(e),r.setTranslate(h),t&&(r.emit("beforeTransitionStart",e,s),r.emit("transitionStart")),r.animating||(r.animating=!0,r.onTranslateToWrapperTransitionEnd||(r.onTranslateToWrapperTransitionEnd=function(u){!r||r.destroyed||u.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onTranslateToWrapperTransitionEnd),r.onTranslateToWrapperTransitionEnd=null,delete r.onTranslateToWrapperTransitionEnd,t&&r.emit("transitionEnd"))}),r.wrapperEl.addEventListener("transitionend",r.onTranslateToWrapperTransitionEnd))),!0}const vc={getTranslate:mc,setTranslate:gc,minTranslate:pc,maxTranslate:_c,translateTo:yc};function xc(i,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${i}ms`),t.emit("setTransition",i,e)}function jo({swiper:i,runCallbacks:e,direction:t,step:n}){const{activeIndex:s,previousIndex:r}=i;let o=t;if(o||(s>r?o="next":s<r?o="prev":o="reset"),i.emit(`transition${n}`),e&&s!==r){if(o==="reset"){i.emit(`slideResetTransition${n}`);return}i.emit(`slideChangeTransition${n}`),o==="next"?i.emit(`slideNextTransition${n}`):i.emit(`slidePrevTransition${n}`)}}function Ec(i=!0,e){const t=this,{params:n}=t;n.cssMode||(n.autoHeight&&t.updateAutoHeight(),jo({swiper:t,runCallbacks:i,direction:e,step:"Start"}))}function Sc(i=!0,e){const t=this,{params:n}=t;t.animating=!1,!n.cssMode&&(t.setTransition(0),jo({swiper:t,runCallbacks:i,direction:e,step:"End"}))}const bc={setTransition:xc,transitionStart:Ec,transitionEnd:Sc};function Tc(i=0,e=this.params.speed,t=!0,n,s){typeof i=="string"&&(i=parseInt(i,10));const r=this;let o=i;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:c,previousIndex:h,activeIndex:d,rtlTranslate:u,wrapperEl:f,enabled:m}=r;if(r.animating&&a.preventInteractionOnTransition||!m&&!n&&!s)return!1;const g=Math.min(r.params.slidesPerGroupSkip,o);let y=g+Math.floor((o-g)/r.params.slidesPerGroup);y>=l.length&&(y=l.length-1);const p=-l[y];if(a.normalizeSlideIndex)for(let v=0;v<c.length;v+=1){const x=-Math.floor(p*100),b=Math.floor(c[v]*100),I=Math.floor(c[v+1]*100);typeof c[v+1]<"u"?x>=b&&x<I-(I-b)/2?o=v:x>=b&&x<I&&(o=v+1):x>=b&&(o=v)}if(r.initialized&&o!==d&&(!r.allowSlideNext&&(u?p>r.translate&&p>r.minTranslate():p<r.translate&&p<r.minTranslate())||!r.allowSlidePrev&&p>r.translate&&p>r.maxTranslate()&&(d||0)!==o))return!1;o!==(h||0)&&t&&r.emit("beforeSlideChangeStart"),r.updateProgress(p);let _;if(o>d?_="next":o<d?_="prev":_="reset",u&&-p===r.translate||!u&&p===r.translate)return r.updateActiveIndex(o),a.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),a.effect!=="slide"&&r.setTranslate(p),_!=="reset"&&(r.transitionStart(t,_),r.transitionEnd(t,_)),!1;if(a.cssMode){const v=r.isHorizontal(),x=u?p:-p;if(e===0){const b=r.virtual&&r.params.virtual.enabled;b&&(r.wrapperEl.style.scrollSnapType="none",r._immediateVirtual=!0),b&&!r._cssModeVirtualInitialSet&&r.params.initialSlide>0?(r._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{f[v?"scrollLeft":"scrollTop"]=x})):f[v?"scrollLeft":"scrollTop"]=x,b&&requestAnimationFrame(()=>{r.wrapperEl.style.scrollSnapType="",r._immediateVirtual=!1})}else{if(!r.support.smoothScroll)return Zo({swiper:r,targetPosition:x,side:v?"left":"top"}),!0;f.scrollTo({[v?"left":"top"]:x,behavior:"smooth"})}return!0}return r.setTransition(e),r.setTranslate(p),r.updateActiveIndex(o),r.updateSlidesClasses(),r.emit("beforeTransitionStart",e,n),r.transitionStart(t,_),e===0?r.transitionEnd(t,_):r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(x){!r||r.destroyed||x.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(t,_))}),r.wrapperEl.addEventListener("transitionend",r.onSlideToWrapperTransitionEnd)),!0}function Cc(i=0,e=this.params.speed,t=!0,n){typeof i=="string"&&(i=parseInt(i,10));const s=this;let r=i;return s.params.loop&&(s.virtual&&s.params.virtual.enabled?r=r+s.virtual.slidesBefore:r=s.getSlideIndexByData(r)),s.slideTo(r,e,t,n)}function Ic(i=this.params.speed,e=!0,t){const n=this,{enabled:s,params:r,animating:o}=n;if(!s)return n;let a=r.slidesPerGroup;r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(a=Math.max(n.slidesPerViewDynamic("current",!0),1));const l=n.activeIndex<r.slidesPerGroupSkip?1:a,c=n.virtual&&r.virtual.enabled;if(r.loop){if(o&&!c&&r.loopPreventsSliding)return!1;n.loopFix({direction:"next"}),n._clientLeft=n.wrapperEl.clientLeft}return r.rewind&&n.isEnd?n.slideTo(0,i,e,t):n.slideTo(n.activeIndex+l,i,e,t)}function wc(i=this.params.speed,e=!0,t){const n=this,{params:s,snapGrid:r,slidesGrid:o,rtlTranslate:a,enabled:l,animating:c}=n;if(!l)return n;const h=n.virtual&&s.virtual.enabled;if(s.loop){if(c&&!h&&s.loopPreventsSliding)return!1;n.loopFix({direction:"prev"}),n._clientLeft=n.wrapperEl.clientLeft}const d=a?n.translate:-n.translate;function u(p){return p<0?-Math.floor(Math.abs(p)):Math.floor(p)}const f=u(d),m=r.map(p=>u(p));let g=r[m.indexOf(f)-1];if(typeof g>"u"&&s.cssMode){let p;r.forEach((_,v)=>{f>=_&&(p=v)}),typeof p<"u"&&(g=r[p>0?p-1:p])}let y=0;if(typeof g<"u"&&(y=o.indexOf(g),y<0&&(y=n.activeIndex-1),s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(y=y-n.slidesPerViewDynamic("previous",!0)+1,y=Math.max(y,0))),s.rewind&&n.isBeginning){const p=n.params.virtual&&n.params.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1;return n.slideTo(p,i,e,t)}return n.slideTo(y,i,e,t)}function Lc(i=this.params.speed,e=!0,t){const n=this;return n.slideTo(n.activeIndex,i,e,t)}function Mc(i=this.params.speed,e=!0,t,n=.5){const s=this;let r=s.activeIndex;const o=Math.min(s.params.slidesPerGroupSkip,r),a=o+Math.floor((r-o)/s.params.slidesPerGroup),l=s.rtlTranslate?s.translate:-s.translate;if(l>=s.snapGrid[a]){const c=s.snapGrid[a],h=s.snapGrid[a+1];l-c>(h-c)*n&&(r+=s.params.slidesPerGroup)}else{const c=s.snapGrid[a-1],h=s.snapGrid[a];l-c<=(h-c)*n&&(r-=s.params.slidesPerGroup)}return r=Math.max(r,0),r=Math.min(r,s.slidesGrid.length-1),s.slideTo(r,i,e,t)}function Rc(){const i=this,{params:e,slidesEl:t}=i,n=e.slidesPerView==="auto"?i.slidesPerViewDynamic():e.slidesPerView;let s=i.clickedIndex,r;const o=i.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(i.animating)return;r=parseInt(i.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?s<i.loopedSlides-n/2||s>i.slides.length-i.loopedSlides+n/2?(i.loopFix(),s=i.getSlideIndex(ye(t,`${o}[data-swiper-slide-index="${r}"]`)[0]),Gt(()=>{i.slideTo(s)})):i.slideTo(s):s>i.slides.length-n?(i.loopFix(),s=i.getSlideIndex(ye(t,`${o}[data-swiper-slide-index="${r}"]`)[0]),Gt(()=>{i.slideTo(s)})):i.slideTo(s)}else i.slideTo(s)}const Ac={slideTo:Tc,slideToLoop:Cc,slideNext:Ic,slidePrev:wc,slideReset:Lc,slideToClosest:Mc,slideToClickedSlide:Rc};function Pc(i){const e=this,{params:t,slidesEl:n}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;ye(n,`.${t.slideClass}, swiper-slide`).forEach((r,o)=>{r.setAttribute("data-swiper-slide-index",o)}),e.loopFix({slideRealIndex:i,direction:t.centeredSlides?void 0:"next"})}function Oc({slideRealIndex:i,slideTo:e=!0,direction:t,setTranslate:n,activeSlideIndex:s,byController:r,byMousewheel:o}={}){const a=this;if(!a.params.loop)return;a.emit("beforeLoopFix");const{slides:l,allowSlidePrev:c,allowSlideNext:h,slidesEl:d,params:u}=a;if(a.allowSlidePrev=!0,a.allowSlideNext=!0,a.virtual&&u.virtual.enabled){e&&(!u.centeredSlides&&a.snapIndex===0?a.slideTo(a.virtual.slides.length,0,!1,!0):u.centeredSlides&&a.snapIndex<u.slidesPerView?a.slideTo(a.virtual.slides.length+a.snapIndex,0,!1,!0):a.snapIndex===a.snapGrid.length-1&&a.slideTo(a.virtual.slidesBefore,0,!1,!0)),a.allowSlidePrev=c,a.allowSlideNext=h,a.emit("loopFix");return}const f=u.slidesPerView==="auto"?a.slidesPerViewDynamic():Math.ceil(parseFloat(u.slidesPerView,10));let m=u.loopedSlides||f;m%u.slidesPerGroup!==0&&(m+=u.slidesPerGroup-m%u.slidesPerGroup),a.loopedSlides=m;const g=[],y=[];let p=a.activeIndex;typeof s>"u"?s=a.getSlideIndex(a.slides.filter(I=>I.classList.contains(u.slideActiveClass))[0]):p=s;const _=t==="next"||!t,v=t==="prev"||!t;let x=0,b=0;if(s<m){x=Math.max(m-s,u.slidesPerGroup);for(let I=0;I<m-s;I+=1){const P=I-Math.floor(I/l.length)*l.length;g.push(l.length-P-1)}}else if(s>a.slides.length-m*2){b=Math.max(s-(a.slides.length-m*2),u.slidesPerGroup);for(let I=0;I<b;I+=1){const P=I-Math.floor(I/l.length)*l.length;y.push(P)}}if(v&&g.forEach(I=>{a.slides[I].swiperLoopMoveDOM=!0,d.prepend(a.slides[I]),a.slides[I].swiperLoopMoveDOM=!1}),_&&y.forEach(I=>{a.slides[I].swiperLoopMoveDOM=!0,d.append(a.slides[I]),a.slides[I].swiperLoopMoveDOM=!1}),a.recalcSlides(),u.slidesPerView==="auto"&&a.updateSlides(),u.watchSlidesProgress&&a.updateSlidesOffset(),e){if(g.length>0&&v)if(typeof i>"u"){const I=a.slidesGrid[p],L=a.slidesGrid[p+x]-I;o?a.setTranslate(a.translate-L):(a.slideTo(p+x,0,!1,!0),n&&(a.touches[a.isHorizontal()?"startX":"startY"]+=L))}else n&&a.slideToLoop(i,0,!1,!0);else if(y.length>0&&_)if(typeof i>"u"){const I=a.slidesGrid[p],L=a.slidesGrid[p-b]-I;o?a.setTranslate(a.translate-L):(a.slideTo(p-b,0,!1,!0),n&&(a.touches[a.isHorizontal()?"startX":"startY"]+=L))}else a.slideToLoop(i,0,!1,!0)}if(a.allowSlidePrev=c,a.allowSlideNext=h,a.controller&&a.controller.control&&!r){const I={slideRealIndex:i,slideTo:!1,direction:t,setTranslate:n,activeSlideIndex:s,byController:!0};Array.isArray(a.controller.control)?a.controller.control.forEach(P=>{!P.destroyed&&P.params.loop&&P.loopFix(I)}):a.controller.control instanceof a.constructor&&a.controller.control.params.loop&&a.controller.control.loopFix(I)}a.emit("loopFix")}function Dc(){const i=this,{params:e,slidesEl:t}=i;if(!e.loop||i.virtual&&i.params.virtual.enabled)return;i.recalcSlides();const n=[];i.slides.forEach(s=>{const r=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;n[r]=s}),i.slides.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),n.forEach(s=>{t.append(s)}),i.recalcSlides(),i.slideTo(i.realIndex,0)}const kc={loopCreate:Pc,loopFix:Oc,loopDestroy:Dc};function Fc(i){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=i?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function zc(){const i=this;i.params.watchOverflow&&i.isLocked||i.params.cssMode||(i.isElement&&(i.__preventObserver__=!0),i[i.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",i.isElement&&requestAnimationFrame(()=>{i.__preventObserver__=!1}))}const Nc={setGrabCursor:Fc,unsetGrabCursor:zc};function Gc(i,e=this){function t(n){if(!n||n===ve()||n===ae())return null;n.assignedSlot&&(n=n.assignedSlot);const s=n.closest(i);return!s&&!n.getRootNode?null:s||t(n.getRootNode().host)}return t(e)}function Wc(i){const e=this,t=ve(),n=ae(),s=e.touchEventsData;s.evCache.push(i);const{params:r,touches:o,enabled:a}=e;if(!a||!r.simulateTouch&&i.pointerType==="mouse"||e.animating&&r.preventInteractionOnTransition)return;!e.animating&&r.cssMode&&r.loop&&e.loopFix();let l=i;l.originalEvent&&(l=l.originalEvent);let c=l.target;if(r.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(c)||"which"in l&&l.which===3||"button"in l&&l.button>0||s.isTouched&&s.isMoved)return;const h=!!r.noSwipingClass&&r.noSwipingClass!=="",d=i.composedPath?i.composedPath():i.path;h&&l.target&&l.target.shadowRoot&&d&&(c=d[0]);const u=r.noSwipingSelector?r.noSwipingSelector:`.${r.noSwipingClass}`,f=!!(l.target&&l.target.shadowRoot);if(r.noSwiping&&(f?Gc(u,c):c.closest(u))){e.allowClick=!0;return}if(r.swipeHandler&&!c.closest(r.swipeHandler))return;o.currentX=l.pageX,o.currentY=l.pageY;const m=o.currentX,g=o.currentY,y=r.edgeSwipeDetection||r.iOSEdgeSwipeDetection,p=r.edgeSwipeThreshold||r.iOSEdgeSwipeThreshold;if(y&&(m<=p||m>=n.innerWidth-p))if(y==="prevent")i.preventDefault();else return;Object.assign(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=m,o.startY=g,s.touchStartTime=Ne(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,r.threshold>0&&(s.allowThresholdMove=!1);let _=!0;c.matches(s.focusableElements)&&(_=!1,c.nodeName==="SELECT"&&(s.isTouched=!1)),t.activeElement&&t.activeElement.matches(s.focusableElements)&&t.activeElement!==c&&t.activeElement.blur();const v=_&&e.allowTouchMove&&r.touchStartPreventDefault;(r.touchStartForcePreventDefault||v)&&!c.isContentEditable&&l.preventDefault(),r.freeMode&&r.freeMode.enabled&&e.freeMode&&e.animating&&!r.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",l)}function Xc(i){const e=ve(),t=this,n=t.touchEventsData,{params:s,touches:r,rtlTranslate:o,enabled:a}=t;if(!a||!s.simulateTouch&&i.pointerType==="mouse")return;let l=i;if(l.originalEvent&&(l=l.originalEvent),!n.isTouched){n.startMoving&&n.isScrolling&&t.emit("touchMoveOpposite",l);return}const c=n.evCache.findIndex(I=>I.pointerId===l.pointerId);c>=0&&(n.evCache[c]=l);const h=n.evCache.length>1?n.evCache[0]:l,d=h.pageX,u=h.pageY;if(l.preventedByNestedSwiper){r.startX=d,r.startY=u;return}if(!t.allowTouchMove){l.target.matches(n.focusableElements)||(t.allowClick=!1),n.isTouched&&(Object.assign(r,{startX:d,startY:u,prevX:t.touches.currentX,prevY:t.touches.currentY,currentX:d,currentY:u}),n.touchStartTime=Ne());return}if(s.touchReleaseOnEdges&&!s.loop){if(t.isVertical()){if(u<r.startY&&t.translate<=t.maxTranslate()||u>r.startY&&t.translate>=t.minTranslate()){n.isTouched=!1,n.isMoved=!1;return}}else if(d<r.startX&&t.translate<=t.maxTranslate()||d>r.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(n.focusableElements)){n.isMoved=!0,t.allowClick=!1;return}if(n.allowTouchCallbacks&&t.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;r.currentX=d,r.currentY=u;const f=r.currentX-r.startX,m=r.currentY-r.startY;if(t.params.threshold&&Math.sqrt(f**2+m**2)<t.params.threshold)return;if(typeof n.isScrolling>"u"){let I;t.isHorizontal()&&r.currentY===r.startY||t.isVertical()&&r.currentX===r.startX?n.isScrolling=!1:f*f+m*m>=25&&(I=Math.atan2(Math.abs(m),Math.abs(f))*180/Math.PI,n.isScrolling=t.isHorizontal()?I>s.touchAngle:90-I>s.touchAngle)}if(n.isScrolling&&t.emit("touchMoveOpposite",l),typeof n.startMoving>"u"&&(r.currentX!==r.startX||r.currentY!==r.startY)&&(n.startMoving=!0),n.isScrolling||t.zoom&&t.params.zoom&&t.params.zoom.enabled&&n.evCache.length>1){n.isTouched=!1;return}if(!n.startMoving)return;t.allowClick=!1,!s.cssMode&&l.cancelable&&l.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&l.stopPropagation();let g=t.isHorizontal()?f:m,y=t.isHorizontal()?r.currentX-r.previousX:r.currentY-r.previousY;s.oneWayMovement&&(g=Math.abs(g)*(o?1:-1),y=Math.abs(y)*(o?1:-1)),r.diff=g,g*=s.touchRatio,o&&(g=-g,y=-y);const p=t.touchesDirection;t.swipeDirection=g>0?"prev":"next",t.touchesDirection=y>0?"prev":"next";const _=t.params.loop&&!s.cssMode;if(!n.isMoved){if(_&&t.loopFix({direction:t.swipeDirection}),n.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const I=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(I)}n.allowMomentumBounce=!1,s.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let v;n.isMoved&&p!==t.touchesDirection&&_&&Math.abs(g)>=1&&(t.loopFix({direction:t.swipeDirection,setTranslate:!0}),v=!0),t.emit("sliderMove",l),n.isMoved=!0,n.currentTranslate=g+n.startTranslate;let x=!0,b=s.resistanceRatio;if(s.touchReleaseOnEdges&&(b=0),g>0?(_&&!v&&n.currentTranslate>(s.centeredSlides?t.minTranslate()-t.size/2:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),n.currentTranslate>t.minTranslate()&&(x=!1,s.resistance&&(n.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+n.startTranslate+g)**b))):g<0&&(_&&!v&&n.currentTranslate<(s.centeredSlides?t.maxTranslate()+t.size/2:t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(s.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(s.slidesPerView,10)))}),n.currentTranslate<t.maxTranslate()&&(x=!1,s.resistance&&(n.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-n.startTranslate-g)**b))),x&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(n.currentTranslate=n.startTranslate),s.threshold>0)if(Math.abs(g)>s.threshold||n.allowThresholdMove){if(!n.allowThresholdMove){n.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,n.currentTranslate=n.startTranslate,r.diff=t.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY;return}}else{n.currentTranslate=n.startTranslate;return}!s.followFinger||s.cssMode||((s.freeMode&&s.freeMode.enabled&&t.freeMode||s.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),s.freeMode&&s.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(n.currentTranslate),t.setTranslate(n.currentTranslate))}function Bc(i){const e=this,t=e.touchEventsData,n=t.evCache.findIndex(v=>v.pointerId===i.pointerId);if(n>=0&&t.evCache.splice(n,1),["pointercancel","pointerout","pointerleave"].includes(i.type)&&!(i.type==="pointercancel"&&(e.browser.isSafari||e.browser.isWebView)))return;const{params:s,touches:r,rtlTranslate:o,slidesGrid:a,enabled:l}=e;if(!l||!s.simulateTouch&&i.pointerType==="mouse")return;let c=i;if(c.originalEvent&&(c=c.originalEvent),t.allowTouchCallbacks&&e.emit("touchEnd",c),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&s.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}s.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const h=Ne(),d=h-t.touchStartTime;if(e.allowClick){const v=c.path||c.composedPath&&c.composedPath();e.updateClickedSlide(v&&v[0]||c.target),e.emit("tap click",c),d<300&&h-t.lastClickTime<300&&e.emit("doubleTap doubleClick",c)}if(t.lastClickTime=Ne(),Gt(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||r.diff===0||t.currentTranslate===t.startTranslate){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let u;if(s.followFinger?u=o?e.translate:-e.translate:u=-t.currentTranslate,s.cssMode)return;if(s.freeMode&&s.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:u});return}let f=0,m=e.slidesSizesGrid[0];for(let v=0;v<a.length;v+=v<s.slidesPerGroupSkip?1:s.slidesPerGroup){const x=v<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;typeof a[v+x]<"u"?u>=a[v]&&u<a[v+x]&&(f=v,m=a[v+x]-a[v]):u>=a[v]&&(f=v,m=a[a.length-1]-a[a.length-2])}let g=null,y=null;s.rewind&&(e.isBeginning?y=s.virtual&&s.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(g=0));const p=(u-a[f])/m,_=f<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;if(d>s.longSwipesMs){if(!s.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(p>=s.longSwipesRatio?e.slideTo(s.rewind&&e.isEnd?g:f+_):e.slideTo(f)),e.swipeDirection==="prev"&&(p>1-s.longSwipesRatio?e.slideTo(f+_):y!==null&&p<0&&Math.abs(p)>s.longSwipesRatio?e.slideTo(y):e.slideTo(f))}else{if(!s.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(c.target===e.navigation.nextEl||c.target===e.navigation.prevEl)?c.target===e.navigation.nextEl?e.slideTo(f+_):e.slideTo(f):(e.swipeDirection==="next"&&e.slideTo(g!==null?g:f+_),e.swipeDirection==="prev"&&e.slideTo(y!==null?y:f))}}function zr(){const i=this,{params:e,el:t}=i;if(t&&t.offsetWidth===0)return;e.breakpoints&&i.setBreakpoint();const{allowSlideNext:n,allowSlidePrev:s,snapGrid:r}=i,o=i.virtual&&i.params.virtual.enabled;i.allowSlideNext=!0,i.allowSlidePrev=!0,i.updateSize(),i.updateSlides(),i.updateSlidesClasses();const a=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&i.isEnd&&!i.isBeginning&&!i.params.centeredSlides&&!a?i.slideTo(i.slides.length-1,0,!1,!0):i.params.loop&&!o?i.slideToLoop(i.realIndex,0,!1,!0):i.slideTo(i.activeIndex,0,!1,!0),i.autoplay&&i.autoplay.running&&i.autoplay.paused&&(clearTimeout(i.autoplay.resizeTimeout),i.autoplay.resizeTimeout=setTimeout(()=>{i.autoplay&&i.autoplay.running&&i.autoplay.paused&&i.autoplay.resume()},500)),i.allowSlidePrev=s,i.allowSlideNext=n,i.params.watchOverflow&&r!==i.snapGrid&&i.checkOverflow()}function Yc(i){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&i.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(i.stopPropagation(),i.stopImmediatePropagation())))}function $c(){const i=this,{wrapperEl:e,rtlTranslate:t,enabled:n}=i;if(!n)return;i.previousTranslate=i.translate,i.isHorizontal()?i.translate=-e.scrollLeft:i.translate=-e.scrollTop,i.translate===0&&(i.translate=0),i.updateActiveIndex(),i.updateSlidesClasses();let s;const r=i.maxTranslate()-i.minTranslate();r===0?s=0:s=(i.translate-i.minTranslate())/r,s!==i.progress&&i.updateProgress(t?-i.translate:i.translate),i.emit("setTranslate",i.translate,!1)}function Hc(i){const e=this;bn(e,i.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}let Nr=!1;function Zc(){}const qo=(i,e)=>{const t=ve(),{params:n,el:s,wrapperEl:r,device:o}=i,a=!!n.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;s[l]("pointerdown",i.onTouchStart,{passive:!1}),t[l]("pointermove",i.onTouchMove,{passive:!1,capture:a}),t[l]("pointerup",i.onTouchEnd,{passive:!0}),t[l]("pointercancel",i.onTouchEnd,{passive:!0}),t[l]("pointerout",i.onTouchEnd,{passive:!0}),t[l]("pointerleave",i.onTouchEnd,{passive:!0}),(n.preventClicks||n.preventClicksPropagation)&&s[l]("click",i.onClick,!0),n.cssMode&&r[l]("scroll",i.onScroll),n.updateOnWindowResize?i[c](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",zr,!0):i[c]("observerUpdate",zr,!0),s[l]("load",i.onLoad,{capture:!0})};function Vc(){const i=this,e=ve(),{params:t}=i;i.onTouchStart=Wc.bind(i),i.onTouchMove=Xc.bind(i),i.onTouchEnd=Bc.bind(i),t.cssMode&&(i.onScroll=$c.bind(i)),i.onClick=Yc.bind(i),i.onLoad=Hc.bind(i),Nr||(e.addEventListener("touchstart",Zc),Nr=!0),qo(i,"on")}function jc(){qo(this,"off")}const qc={attachEvents:Vc,detachEvents:jc},Gr=(i,e)=>i.grid&&e.grid&&e.grid.rows>1;function Uc(){const i=this,{realIndex:e,initialized:t,params:n,el:s}=i,r=n.breakpoints;if(!r||r&&Object.keys(r).length===0)return;const o=i.getBreakpoint(r,i.params.breakpointsBase,i.el);if(!o||i.currentBreakpoint===o)return;const l=(o in r?r[o]:void 0)||i.originalParams,c=Gr(i,n),h=Gr(i,l),d=n.enabled;c&&!h?(s.classList.remove(`${n.containerModifierClass}grid`,`${n.containerModifierClass}grid-column`),i.emitContainerClasses()):!c&&h&&(s.classList.add(`${n.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&n.grid.fill==="column")&&s.classList.add(`${n.containerModifierClass}grid-column`),i.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(g=>{if(typeof l[g]>"u")return;const y=n[g]&&n[g].enabled,p=l[g]&&l[g].enabled;y&&!p&&i[g].disable(),!y&&p&&i[g].enable()});const u=l.direction&&l.direction!==n.direction,f=n.loop&&(l.slidesPerView!==n.slidesPerView||u);u&&t&&i.changeDirection(),Ae(i.params,l);const m=i.params.enabled;Object.assign(i,{allowTouchMove:i.params.allowTouchMove,allowSlideNext:i.params.allowSlideNext,allowSlidePrev:i.params.allowSlidePrev}),d&&!m?i.disable():!d&&m&&i.enable(),i.currentBreakpoint=o,i.emit("_beforeBreakpoint",l),f&&t&&(i.loopDestroy(),i.loopCreate(e),i.updateSlides()),i.emit("breakpoint",l)}function Kc(i,e="window",t){if(!i||e==="container"&&!t)return;let n=!1;const s=ae(),r=e==="window"?s.innerHeight:t.clientHeight,o=Object.keys(i).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:r*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){const{point:l,value:c}=o[a];e==="window"?s.matchMedia(`(min-width: ${c}px)`).matches&&(n=l):c<=t.clientWidth&&(n=l)}return n||"max"}const Jc={setBreakpoint:Uc,getBreakpoint:Kc};function Qc(i,e){const t=[];return i.forEach(n=>{typeof n=="object"?Object.keys(n).forEach(s=>{n[s]&&t.push(e+s)}):typeof n=="string"&&t.push(e+n)}),t}function eh(){const i=this,{classNames:e,params:t,rtl:n,el:s,device:r}=i,o=Qc(["initialized",t.direction,{"free-mode":i.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:n},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:r.android},{ios:r.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...o),s.classList.add(...e),i.emitContainerClasses()}function th(){const i=this,{el:e,classNames:t}=i;e.classList.remove(...t),i.emitContainerClasses()}const ih={addClasses:eh,removeClasses:th};function nh(){const i=this,{isLocked:e,params:t}=i,{slidesOffsetBefore:n}=t;if(n){const s=i.slides.length-1,r=i.slidesGrid[s]+i.slidesSizesGrid[s]+n*2;i.isLocked=i.size>r}else i.isLocked=i.snapGrid.length===1;t.allowSlideNext===!0&&(i.allowSlideNext=!i.isLocked),t.allowSlidePrev===!0&&(i.allowSlidePrev=!i.isLocked),e&&e!==i.isLocked&&(i.isEnd=!1),e!==i.isLocked&&i.emit(i.isLocked?"lock":"unlock")}const sh={checkOverflow:nh},Wr={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function rh(i,e){return function(n={}){const s=Object.keys(n)[0],r=n[s];if(typeof r!="object"||r===null){Ae(e,n);return}if(["navigation","pagination","scrollbar"].indexOf(s)>=0&&i[s]===!0&&(i[s]={auto:!0}),!(s in i&&"enabled"in r)){Ae(e,n);return}i[s]===!0&&(i[s]={enabled:!0}),typeof i[s]=="object"&&!("enabled"in i[s])&&(i[s].enabled=!0),i[s]||(i[s]={enabled:!1}),Ae(e,n)}}const hs={eventsEmitter:ic,update:fc,translate:vc,transition:bc,slide:Ac,loop:kc,grabCursor:Nc,events:qc,breakpoints:Jc,checkOverflow:sh,classes:ih},ds={};class Re{constructor(...e){let t,n;e.length===1&&e[0].constructor&&Object.prototype.toString.call(e[0]).slice(8,-1)==="Object"?n=e[0]:[t,n]=e,n||(n={}),n=Ae({},n),t&&!n.el&&(n.el=t);const s=ve();if(n.el&&typeof n.el=="string"&&s.querySelectorAll(n.el).length>1){const l=[];return s.querySelectorAll(n.el).forEach(c=>{const h=Ae({},n,{el:c});l.push(new Re(h))}),l}const r=this;r.__swiper__=!0,r.support=Vo(),r.device=Kl({userAgent:n.userAgent}),r.browser=Ql(),r.eventsListeners={},r.eventsAnyListeners=[],r.modules=[...r.__modules__],n.modules&&Array.isArray(n.modules)&&r.modules.push(...n.modules);const o={};r.modules.forEach(l=>{l({params:n,swiper:r,extendParams:rh(n,o),on:r.on.bind(r),once:r.once.bind(r),off:r.off.bind(r),emit:r.emit.bind(r)})});const a=Ae({},Wr,o);return r.params=Ae({},a,ds,n),r.originalParams=Ae({},r.params),r.passedParams=Ae({},n),r.params&&r.params.on&&Object.keys(r.params.on).forEach(l=>{r.on(l,r.params.on[l])}),r.params&&r.params.onAny&&r.onAny(r.params.onAny),Object.assign(r,{enabled:r.params.enabled,el:t,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return r.params.direction==="horizontal"},isVertical(){return r.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:r.params.allowSlideNext,allowSlidePrev:r.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:r.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:r.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),r.emit("_swiper"),r.params.init&&r.init(),r}getSlideIndex(e){const{slidesEl:t,params:n}=this,s=ye(t,`.${n.slideClass}, swiper-slide`),r=Fi(s[0]);return Fi(e)-r}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:t,params:n}=e;e.slides=ye(t,`.${n.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const s=n.minTranslate(),o=(n.maxTranslate()-s)*e+s;n.translateTo(o,typeof t>"u"?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(n=>n.indexOf("swiper")===0||n.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(n=>n.indexOf("swiper-slide")===0||n.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(n=>{const s=e.getSlideClasses(n);t.push({slideEl:n,classNames:s}),e.emit("_slideClass",n,s)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e="current",t=!1){const n=this,{params:s,slides:r,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:c}=n;let h=1;if(s.centeredSlides){let d=r[c]?r[c].swiperSlideSize:0,u;for(let f=c+1;f<r.length;f+=1)r[f]&&!u&&(d+=r[f].swiperSlideSize,h+=1,d>l&&(u=!0));for(let f=c-1;f>=0;f-=1)r[f]&&!u&&(d+=r[f].swiperSlideSize,h+=1,d>l&&(u=!0))}else if(e==="current")for(let d=c+1;d<r.length;d+=1)(t?o[d]+a[d]-o[c]<l:o[d]-o[c]<l)&&(h+=1);else for(let d=c-1;d>=0;d-=1)o[c]-o[d]<l&&(h+=1);return h}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;n.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&bn(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function s(){const o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let r;if(n.freeMode&&n.freeMode.enabled&&!n.cssMode)s(),n.autoHeight&&e.updateAutoHeight();else{if((n.slidesPerView==="auto"||n.slidesPerView>1)&&e.isEnd&&!n.centeredSlides){const o=e.virtual&&n.virtual.enabled?e.virtual.slides:e.slides;r=e.slideTo(o.length-1,0,!1,!0)}else r=e.slideTo(e.activeIndex,0,!1,!0);r||s()}n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t=!0){const n=this,s=n.params.direction;return e||(e=s==="horizontal"?"vertical":"horizontal"),e===s||e!=="horizontal"&&e!=="vertical"||(n.el.classList.remove(`${n.params.containerModifierClass}${s}`),n.el.classList.add(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.forEach(r=>{e==="vertical"?r.style.width="":r.style.height=""}),n.emit("changeDirection"),t&&n.update()),n}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let n=e||t.params.el;if(typeof n=="string"&&(n=document.querySelector(n)),!n)return!1;n.swiper=t,n.shadowEl&&(t.isElement=!0);const s=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=n&&n.shadowRoot&&n.shadowRoot.querySelector?n.shadowRoot.querySelector(s()):ye(n,s())[0];return!o&&t.params.createElements&&(o=$e("div",t.params.wrapperClass),n.append(o),ye(n,`.${t.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(t,{el:n,wrapperEl:o,slidesEl:t.isElement?n:o,mounted:!0,rtl:n.dir.toLowerCase()==="rtl"||Et(n,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(n.dir.toLowerCase()==="rtl"||Et(n,"direction")==="rtl"),wrongRTL:Et(o,"display")==="-webkit-box"}),!0}init(e){const t=this;return t.initialized||t.mount(e)===!1||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(s=>{s.complete?bn(t,s):s.addEventListener("load",r=>{bn(t,r.target)})}),Ms(t),t.initialized=!0,Ms(t),t.emit("init"),t.emit("afterInit")),t}destroy(e=!0,t=!0){const n=this,{params:s,el:r,wrapperEl:o,slides:a}=n;return typeof n.params>"u"||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),s.loop&&n.loopDestroy(),t&&(n.removeClasses(),r.removeAttribute("style"),o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(s.slideVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(l=>{n.off(l)}),e!==!1&&(n.el.swiper=null,$l(n)),n.destroyed=!0),null}static extendDefaults(e){Ae(ds,e)}static get extendedDefaults(){return ds}static get defaults(){return Wr}static installModule(e){Re.prototype.__modules__||(Re.prototype.__modules__=[]);const t=Re.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>Re.installModule(t)),Re):(Re.installModule(e),Re)}}Object.keys(hs).forEach(i=>{Object.keys(hs[i]).forEach(e=>{Re.prototype[e]=hs[i][e]})});Re.use([ec,tc]);function oh({swiper:i,extendParams:e,on:t,emit:n}){e({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}});let s;const r=ve();i.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]};const o=r.createElement("div");function a(f,m){const g=i.params.virtual;if(g.cache&&i.virtual.cache[m])return i.virtual.cache[m];let y;return g.renderSlide?(y=g.renderSlide.call(i,f,m),typeof y=="string"&&(o.innerHTML=y,y=o.children[0])):i.isElement?y=$e("swiper-slide"):y=$e("div",i.params.slideClass),y.setAttribute("data-swiper-slide-index",m),g.renderSlide||(y.innerHTML=f),g.cache&&(i.virtual.cache[m]=y),y}function l(f){const{slidesPerView:m,slidesPerGroup:g,centeredSlides:y,loop:p}=i.params,{addSlidesBefore:_,addSlidesAfter:v}=i.params.virtual,{from:x,to:b,slides:I,slidesGrid:P,offset:L}=i.virtual;i.params.cssMode||i.updateActiveIndex();const O=i.activeIndex||0;let k;i.rtlTranslate?k="right":k=i.isHorizontal()?"left":"top";let T,S;y?(T=Math.floor(m/2)+g+v,S=Math.floor(m/2)+g+_):(T=m+(g-1)+v,S=(p?m:g)+_);let E=O-S,C=O+T;p||(E=Math.max(E,0),C=Math.min(C,I.length-1));let R=(i.slidesGrid[E]||0)-(i.slidesGrid[0]||0);p&&O>=S?(E-=S,y||(R+=i.slidesGrid[0])):p&&O<S&&(E=-S,y&&(R+=i.slidesGrid[0])),Object.assign(i.virtual,{from:E,to:C,offset:R,slidesGrid:i.slidesGrid,slidesBefore:S,slidesAfter:T});function w(){i.updateSlides(),i.updateProgress(),i.updateSlidesClasses(),n("virtualUpdate")}if(x===E&&b===C&&!f){i.slidesGrid!==P&&R!==L&&i.slides.forEach(D=>{D.style[k]=`${R-Math.abs(i.cssOverflowAdjustment())}px`}),i.updateProgress(),n("virtualUpdate");return}if(i.params.virtual.renderExternal){i.params.virtual.renderExternal.call(i,{offset:R,from:E,to:C,slides:function(){const N=[];for(let G=E;G<=C;G+=1)N.push(I[G]);return N}()}),i.params.virtual.renderExternalUpdate?w():n("virtualUpdate");return}const M=[],A=[],F=D=>{let N=D;return D<0?N=I.length+D:N>=I.length&&(N=N-I.length),N};if(f)i.slidesEl.querySelectorAll(`.${i.params.slideClass}, swiper-slide`).forEach(D=>{D.remove()});else for(let D=x;D<=b;D+=1)if(D<E||D>C){const N=F(D);i.slidesEl.querySelectorAll(`.${i.params.slideClass}[data-swiper-slide-index="${N}"], swiper-slide[data-swiper-slide-index="${N}"]`).forEach(G=>{G.remove()})}const z=p?-I.length:0,Z=p?I.length*2:I.length;for(let D=z;D<Z;D+=1)if(D>=E&&D<=C){const N=F(D);typeof b>"u"||f?A.push(N):(D>b&&A.push(N),D<x&&M.push(N))}if(A.forEach(D=>{i.slidesEl.append(a(I[D],D))}),p)for(let D=M.length-1;D>=0;D-=1){const N=M[D];i.slidesEl.prepend(a(I[N],N))}else M.sort((D,N)=>N-D),M.forEach(D=>{i.slidesEl.prepend(a(I[D],D))});ye(i.slidesEl,".swiper-slide, swiper-slide").forEach(D=>{D.style[k]=`${R-Math.abs(i.cssOverflowAdjustment())}px`}),w()}function c(f){if(typeof f=="object"&&"length"in f)for(let m=0;m<f.length;m+=1)f[m]&&i.virtual.slides.push(f[m]);else i.virtual.slides.push(f);l(!0)}function h(f){const m=i.activeIndex;let g=m+1,y=1;if(Array.isArray(f)){for(let p=0;p<f.length;p+=1)f[p]&&i.virtual.slides.unshift(f[p]);g=m+f.length,y=f.length}else i.virtual.slides.unshift(f);if(i.params.virtual.cache){const p=i.virtual.cache,_={};Object.keys(p).forEach(v=>{const x=p[v],b=x.getAttribute("data-swiper-slide-index");b&&x.setAttribute("data-swiper-slide-index",parseInt(b,10)+y),_[parseInt(v,10)+y]=x}),i.virtual.cache=_}l(!0),i.slideTo(g,0)}function d(f){if(typeof f>"u"||f===null)return;let m=i.activeIndex;if(Array.isArray(f))for(let g=f.length-1;g>=0;g-=1)i.virtual.slides.splice(f[g],1),i.params.virtual.cache&&delete i.virtual.cache[f[g]],f[g]<m&&(m-=1),m=Math.max(m,0);else i.virtual.slides.splice(f,1),i.params.virtual.cache&&delete i.virtual.cache[f],f<m&&(m-=1),m=Math.max(m,0);l(!0),i.slideTo(m,0)}function u(){i.virtual.slides=[],i.params.virtual.cache&&(i.virtual.cache={}),l(!0),i.slideTo(0,0)}t("beforeInit",()=>{if(!i.params.virtual.enabled)return;let f;if(typeof i.passedParams.virtual.slides>"u"){const m=[...i.slidesEl.children].filter(g=>g.matches(`.${i.params.slideClass}, swiper-slide`));m&&m.length&&(i.virtual.slides=[...m],f=!0,m.forEach((g,y)=>{g.setAttribute("data-swiper-slide-index",y),i.virtual.cache[y]=g,g.remove()}))}f||(i.virtual.slides=i.params.virtual.slides),i.classNames.push(`${i.params.containerModifierClass}virtual`),i.params.watchSlidesProgress=!0,i.originalParams.watchSlidesProgress=!0,i.params.initialSlide||l()}),t("setTranslate",()=>{i.params.virtual.enabled&&(i.params.cssMode&&!i._immediateVirtual?(clearTimeout(s),s=setTimeout(()=>{l()},100)):l())}),t("init update resize",()=>{i.params.virtual.enabled&&i.params.cssMode&&Ii(i.wrapperEl,"--swiper-virtual-size",`${i.virtualSize}px`)}),Object.assign(i.virtual,{appendSlide:c,prependSlide:h,removeSlide:d,removeAllSlides:u,update:l})}function ah({swiper:i,extendParams:e,on:t,emit:n}){const s=ve(),r=ae();i.keyboard={enabled:!1},e({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}});function o(c){if(!i.enabled)return;const{rtlTranslate:h}=i;let d=c;d.originalEvent&&(d=d.originalEvent);const u=d.keyCode||d.charCode,f=i.params.keyboard.pageUpDown,m=f&&u===33,g=f&&u===34,y=u===37,p=u===39,_=u===38,v=u===40;if(!i.allowSlideNext&&(i.isHorizontal()&&p||i.isVertical()&&v||g)||!i.allowSlidePrev&&(i.isHorizontal()&&y||i.isVertical()&&_||m))return!1;if(!(d.shiftKey||d.altKey||d.ctrlKey||d.metaKey)&&!(s.activeElement&&s.activeElement.nodeName&&(s.activeElement.nodeName.toLowerCase()==="input"||s.activeElement.nodeName.toLowerCase()==="textarea"))){if(i.params.keyboard.onlyInViewport&&(m||g||y||p||_||v)){let x=!1;if(zt(i.el,`.${i.params.slideClass}, swiper-slide`).length>0&&zt(i.el,`.${i.params.slideActiveClass}`).length===0)return;const b=i.el,I=b.clientWidth,P=b.clientHeight,L=r.innerWidth,O=r.innerHeight,k=Cn(b);h&&(k.left-=b.scrollLeft);const T=[[k.left,k.top],[k.left+I,k.top],[k.left,k.top+P],[k.left+I,k.top+P]];for(let S=0;S<T.length;S+=1){const E=T[S];if(E[0]>=0&&E[0]<=L&&E[1]>=0&&E[1]<=O){if(E[0]===0&&E[1]===0)continue;x=!0}}if(!x)return}i.isHorizontal()?((m||g||y||p)&&(d.preventDefault?d.preventDefault():d.returnValue=!1),((g||p)&&!h||(m||y)&&h)&&i.slideNext(),((m||y)&&!h||(g||p)&&h)&&i.slidePrev()):((m||g||_||v)&&(d.preventDefault?d.preventDefault():d.returnValue=!1),(g||v)&&i.slideNext(),(m||_)&&i.slidePrev()),n("keyPress",u)}}function a(){i.keyboard.enabled||(s.addEventListener("keydown",o),i.keyboard.enabled=!0)}function l(){i.keyboard.enabled&&(s.removeEventListener("keydown",o),i.keyboard.enabled=!1)}t("init",()=>{i.params.keyboard.enabled&&a()}),t("destroy",()=>{i.keyboard.enabled&&l()}),Object.assign(i.keyboard,{enable:a,disable:l})}function lh({swiper:i,extendParams:e,on:t,emit:n}){const s=ae();e({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),i.mousewheel={enabled:!1};let r,o=Ne(),a;const l=[];function c(_){let I=0,P=0,L=0,O=0;return"detail"in _&&(P=_.detail),"wheelDelta"in _&&(P=-_.wheelDelta/120),"wheelDeltaY"in _&&(P=-_.wheelDeltaY/120),"wheelDeltaX"in _&&(I=-_.wheelDeltaX/120),"axis"in _&&_.axis===_.HORIZONTAL_AXIS&&(I=P,P=0),L=I*10,O=P*10,"deltaY"in _&&(O=_.deltaY),"deltaX"in _&&(L=_.deltaX),_.shiftKey&&!L&&(L=O,O=0),(L||O)&&_.deltaMode&&(_.deltaMode===1?(L*=40,O*=40):(L*=800,O*=800)),L&&!I&&(I=L<1?-1:1),O&&!P&&(P=O<1?-1:1),{spinX:I,spinY:P,pixelX:L,pixelY:O}}function h(){i.enabled&&(i.mouseEntered=!0)}function d(){i.enabled&&(i.mouseEntered=!1)}function u(_){return i.params.mousewheel.thresholdDelta&&_.delta<i.params.mousewheel.thresholdDelta||i.params.mousewheel.thresholdTime&&Ne()-o<i.params.mousewheel.thresholdTime?!1:_.delta>=6&&Ne()-o<60?!0:(_.direction<0?(!i.isEnd||i.params.loop)&&!i.animating&&(i.slideNext(),n("scroll",_.raw)):(!i.isBeginning||i.params.loop)&&!i.animating&&(i.slidePrev(),n("scroll",_.raw)),o=new s.Date().getTime(),!1)}function f(_){const v=i.params.mousewheel;if(_.direction<0){if(i.isEnd&&!i.params.loop&&v.releaseOnEdges)return!0}else if(i.isBeginning&&!i.params.loop&&v.releaseOnEdges)return!0;return!1}function m(_){let v=_,x=!0;if(!i.enabled||_.target.closest(`.${i.params.mousewheel.noMousewheelClass}`))return;const b=i.params.mousewheel;i.params.cssMode&&v.preventDefault();let I=i.el;i.params.mousewheel.eventsTarget!=="container"&&(I=document.querySelector(i.params.mousewheel.eventsTarget));const P=I&&I.contains(v.target);if(!i.mouseEntered&&!P&&!b.releaseOnEdges)return!0;v.originalEvent&&(v=v.originalEvent);let L=0;const O=i.rtlTranslate?-1:1,k=c(v);if(b.forceToAxis)if(i.isHorizontal())if(Math.abs(k.pixelX)>Math.abs(k.pixelY))L=-k.pixelX*O;else return!0;else if(Math.abs(k.pixelY)>Math.abs(k.pixelX))L=-k.pixelY;else return!0;else L=Math.abs(k.pixelX)>Math.abs(k.pixelY)?-k.pixelX*O:-k.pixelY;if(L===0)return!0;b.invert&&(L=-L);let T=i.getTranslate()+L*b.sensitivity;if(T>=i.minTranslate()&&(T=i.minTranslate()),T<=i.maxTranslate()&&(T=i.maxTranslate()),x=i.params.loop?!0:!(T===i.minTranslate()||T===i.maxTranslate()),x&&i.params.nested&&v.stopPropagation(),!i.params.freeMode||!i.params.freeMode.enabled){const S={time:Ne(),delta:Math.abs(L),direction:Math.sign(L),raw:_};l.length>=2&&l.shift();const E=l.length?l[l.length-1]:void 0;if(l.push(S),E?(S.direction!==E.direction||S.delta>E.delta||S.time>E.time+150)&&u(S):u(S),f(S))return!0}else{const S={time:Ne(),delta:Math.abs(L),direction:Math.sign(L)},E=a&&S.time<a.time+500&&S.delta<=a.delta&&S.direction===a.direction;if(!E){a=void 0;let C=i.getTranslate()+L*b.sensitivity;const R=i.isBeginning,w=i.isEnd;if(C>=i.minTranslate()&&(C=i.minTranslate()),C<=i.maxTranslate()&&(C=i.maxTranslate()),i.setTransition(0),i.setTranslate(C),i.updateProgress(),i.updateActiveIndex(),i.updateSlidesClasses(),(!R&&i.isBeginning||!w&&i.isEnd)&&i.updateSlidesClasses(),i.params.loop&&i.loopFix({direction:S.direction<0?"next":"prev",byMousewheel:!0}),i.params.freeMode.sticky){clearTimeout(r),r=void 0,l.length>=15&&l.shift();const M=l.length?l[l.length-1]:void 0,A=l[0];if(l.push(S),M&&(S.delta>M.delta||S.direction!==M.direction))l.splice(0);else if(l.length>=15&&S.time-A.time<500&&A.delta-S.delta>=1&&S.delta<=6){const F=L>0?.8:.2;a=S,l.splice(0),r=Gt(()=>{i.slideToClosest(i.params.speed,!0,void 0,F)},0)}r||(r=Gt(()=>{a=S,l.splice(0),i.slideToClosest(i.params.speed,!0,void 0,.5)},500))}if(E||n("scroll",v),i.params.autoplay&&i.params.autoplayDisableOnInteraction&&i.autoplay.stop(),C===i.minTranslate()||C===i.maxTranslate())return!0}}return v.preventDefault?v.preventDefault():v.returnValue=!1,!1}function g(_){let v=i.el;i.params.mousewheel.eventsTarget!=="container"&&(v=document.querySelector(i.params.mousewheel.eventsTarget)),v[_]("mouseenter",h),v[_]("mouseleave",d),v[_]("wheel",m)}function y(){return i.params.cssMode?(i.wrapperEl.removeEventListener("wheel",m),!0):i.mousewheel.enabled?!1:(g("addEventListener"),i.mousewheel.enabled=!0,!0)}function p(){return i.params.cssMode?(i.wrapperEl.addEventListener(event,m),!0):i.mousewheel.enabled?(g("removeEventListener"),i.mousewheel.enabled=!1,!0):!1}t("init",()=>{!i.params.mousewheel.enabled&&i.params.cssMode&&p(),i.params.mousewheel.enabled&&y()}),t("destroy",()=>{i.params.cssMode&&y(),i.mousewheel.enabled&&p()}),Object.assign(i.mousewheel,{enable:y,disable:p})}function js(i,e,t,n){return i.params.createElements&&Object.keys(n).forEach(s=>{if(!t[s]&&t.auto===!0){let r=ye(i.el,`.${n[s]}`)[0];r||(r=$e("div",n[s]),r.className=n[s],i.el.append(r)),t[s]=r,e[s]=r}}),t}function ch({swiper:i,extendParams:e,on:t,emit:n}){e({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),i.navigation={nextEl:null,prevEl:null};const s=m=>(Array.isArray(m)||(m=[m].filter(g=>!!g)),m);function r(m){let g;return m&&typeof m=="string"&&i.isElement&&(g=i.el.shadowRoot.querySelector(m),g)?g:(m&&(typeof m=="string"&&(g=[...document.querySelectorAll(m)]),i.params.uniqueNavElements&&typeof m=="string"&&g.length>1&&i.el.querySelectorAll(m).length===1&&(g=i.el.querySelector(m))),m&&!g?m:g)}function o(m,g){const y=i.params.navigation;m=s(m),m.forEach(p=>{p&&(p.classList[g?"add":"remove"](...y.disabledClass.split(" ")),p.tagName==="BUTTON"&&(p.disabled=g),i.params.watchOverflow&&i.enabled&&p.classList[i.isLocked?"add":"remove"](y.lockClass))})}function a(){const{nextEl:m,prevEl:g}=i.navigation;if(i.params.loop){o(g,!1),o(m,!1);return}o(g,i.isBeginning&&!i.params.rewind),o(m,i.isEnd&&!i.params.rewind)}function l(m){m.preventDefault(),!(i.isBeginning&&!i.params.loop&&!i.params.rewind)&&(i.slidePrev(),n("navigationPrev"))}function c(m){m.preventDefault(),!(i.isEnd&&!i.params.loop&&!i.params.rewind)&&(i.slideNext(),n("navigationNext"))}function h(){const m=i.params.navigation;if(i.params.navigation=js(i,i.originalParams.navigation,i.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(m.nextEl||m.prevEl))return;let g=r(m.nextEl),y=r(m.prevEl);Object.assign(i.navigation,{nextEl:g,prevEl:y}),g=s(g),y=s(y);const p=(_,v)=>{_&&_.addEventListener("click",v==="next"?c:l),!i.enabled&&_&&_.classList.add(...m.lockClass.split(" "))};g.forEach(_=>p(_,"next")),y.forEach(_=>p(_,"prev"))}function d(){let{nextEl:m,prevEl:g}=i.navigation;m=s(m),g=s(g);const y=(p,_)=>{p.removeEventListener("click",_==="next"?c:l),p.classList.remove(...i.params.navigation.disabledClass.split(" "))};m.forEach(p=>y(p,"next")),g.forEach(p=>y(p,"prev"))}t("init",()=>{i.params.navigation.enabled===!1?f():(h(),a())}),t("toEdge fromEdge lock unlock",()=>{a()}),t("destroy",()=>{d()}),t("enable disable",()=>{let{nextEl:m,prevEl:g}=i.navigation;m=s(m),g=s(g),[...m,...g].filter(y=>!!y).forEach(y=>y.classList[i.enabled?"remove":"add"](i.params.navigation.lockClass))}),t("click",(m,g)=>{let{nextEl:y,prevEl:p}=i.navigation;y=s(y),p=s(p);const _=g.target;if(i.params.navigation.hideOnClick&&!p.includes(_)&&!y.includes(_)){if(i.pagination&&i.params.pagination&&i.params.pagination.clickable&&(i.pagination.el===_||i.pagination.el.contains(_)))return;let v;y.length?v=y[0].classList.contains(i.params.navigation.hiddenClass):p.length&&(v=p[0].classList.contains(i.params.navigation.hiddenClass)),n(v===!0?"navigationShow":"navigationHide"),[...y,...p].filter(x=>!!x).forEach(x=>x.classList.toggle(i.params.navigation.hiddenClass))}});const u=()=>{i.el.classList.remove(...i.params.navigation.navigationDisabledClass.split(" ")),h(),a()},f=()=>{i.el.classList.add(...i.params.navigation.navigationDisabledClass.split(" ")),d()};Object.assign(i.navigation,{enable:u,disable:f,update:a,init:h,destroy:d})}function xt(i=""){return`.${i.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function hh({swiper:i,extendParams:e,on:t,emit:n}){const s="swiper-pagination";e({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:p=>p,formatFractionTotal:p=>p,bulletClass:`${s}-bullet`,bulletActiveClass:`${s}-bullet-active`,modifierClass:`${s}-`,currentClass:`${s}-current`,totalClass:`${s}-total`,hiddenClass:`${s}-hidden`,progressbarFillClass:`${s}-progressbar-fill`,progressbarOppositeClass:`${s}-progressbar-opposite`,clickableClass:`${s}-clickable`,lockClass:`${s}-lock`,horizontalClass:`${s}-horizontal`,verticalClass:`${s}-vertical`,paginationDisabledClass:`${s}-disabled`}}),i.pagination={el:null,bullets:[]};let r,o=0;const a=p=>(Array.isArray(p)||(p=[p].filter(_=>!!_)),p);function l(){return!i.params.pagination.el||!i.pagination.el||Array.isArray(i.pagination.el)&&i.pagination.el.length===0}function c(p,_){const{bulletActiveClass:v}=i.params.pagination;p&&(p=p[`${_==="prev"?"previous":"next"}ElementSibling`],p&&(p.classList.add(`${v}-${_}`),p=p[`${_==="prev"?"previous":"next"}ElementSibling`],p&&p.classList.add(`${v}-${_}-${_}`)))}function h(p){const _=p.target.closest(xt(i.params.pagination.bulletClass));if(!_)return;p.preventDefault();const v=Fi(_)*i.params.slidesPerGroup;if(i.params.loop){if(i.realIndex===v)return;const x=i.getSlideIndexByData(v),b=i.getSlideIndexByData(i.realIndex);x>i.slides.length-i.loopedSlides&&i.loopFix({direction:x>b?"next":"prev",activeSlideIndex:x,slideTo:!1}),i.slideToLoop(v)}else i.slideTo(v)}function d(){const p=i.rtl,_=i.params.pagination;if(l())return;let v=i.pagination.el;v=a(v);let x,b;const I=i.virtual&&i.params.virtual.enabled?i.virtual.slides.length:i.slides.length,P=i.params.loop?Math.ceil(I/i.params.slidesPerGroup):i.snapGrid.length;if(i.params.loop?(b=i.previousRealIndex||0,x=i.params.slidesPerGroup>1?Math.floor(i.realIndex/i.params.slidesPerGroup):i.realIndex):typeof i.snapIndex<"u"?(x=i.snapIndex,b=i.previousSnapIndex):(b=i.previousIndex||0,x=i.activeIndex||0),_.type==="bullets"&&i.pagination.bullets&&i.pagination.bullets.length>0){const L=i.pagination.bullets;let O,k,T;if(_.dynamicBullets&&(r=Ls(L[0],i.isHorizontal()?"width":"height"),v.forEach(S=>{S.style[i.isHorizontal()?"width":"height"]=`${r*(_.dynamicMainBullets+4)}px`}),_.dynamicMainBullets>1&&b!==void 0&&(o+=x-(b||0),o>_.dynamicMainBullets-1?o=_.dynamicMainBullets-1:o<0&&(o=0)),O=Math.max(x-o,0),k=O+(Math.min(L.length,_.dynamicMainBullets)-1),T=(k+O)/2),L.forEach(S=>{const E=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(C=>`${_.bulletActiveClass}${C}`)].map(C=>typeof C=="string"&&C.includes(" ")?C.split(" "):C).flat();S.classList.remove(...E)}),v.length>1)L.forEach(S=>{const E=Fi(S);E===x?S.classList.add(..._.bulletActiveClass.split(" ")):i.isElement&&S.setAttribute("part","bullet"),_.dynamicBullets&&(E>=O&&E<=k&&S.classList.add(...`${_.bulletActiveClass}-main`.split(" ")),E===O&&c(S,"prev"),E===k&&c(S,"next"))});else{const S=L[x];if(S&&S.classList.add(..._.bulletActiveClass.split(" ")),i.isElement&&L.forEach((E,C)=>{E.setAttribute("part",C===x?"bullet-active":"bullet")}),_.dynamicBullets){const E=L[O],C=L[k];for(let R=O;R<=k;R+=1)L[R]&&L[R].classList.add(...`${_.bulletActiveClass}-main`.split(" "));c(E,"prev"),c(C,"next")}}if(_.dynamicBullets){const S=Math.min(L.length,_.dynamicMainBullets+4),E=(r*S-r)/2-T*r,C=p?"right":"left";L.forEach(R=>{R.style[i.isHorizontal()?C:"top"]=`${E}px`})}}v.forEach((L,O)=>{if(_.type==="fraction"&&(L.querySelectorAll(xt(_.currentClass)).forEach(k=>{k.textContent=_.formatFractionCurrent(x+1)}),L.querySelectorAll(xt(_.totalClass)).forEach(k=>{k.textContent=_.formatFractionTotal(P)})),_.type==="progressbar"){let k;_.progressbarOpposite?k=i.isHorizontal()?"vertical":"horizontal":k=i.isHorizontal()?"horizontal":"vertical";const T=(x+1)/P;let S=1,E=1;k==="horizontal"?S=T:E=T,L.querySelectorAll(xt(_.progressbarFillClass)).forEach(C=>{C.style.transform=`translate3d(0,0,0) scaleX(${S}) scaleY(${E})`,C.style.transitionDuration=`${i.params.speed}ms`})}_.type==="custom"&&_.renderCustom?(L.innerHTML=_.renderCustom(i,x+1,P),O===0&&n("paginationRender",L)):(O===0&&n("paginationRender",L),n("paginationUpdate",L)),i.params.watchOverflow&&i.enabled&&L.classList[i.isLocked?"add":"remove"](_.lockClass)})}function u(){const p=i.params.pagination;if(l())return;const _=i.virtual&&i.params.virtual.enabled?i.virtual.slides.length:i.slides.length;let v=i.pagination.el;v=a(v);let x="";if(p.type==="bullets"){let b=i.params.loop?Math.ceil(_/i.params.slidesPerGroup):i.snapGrid.length;i.params.freeMode&&i.params.freeMode.enabled&&b>_&&(b=_);for(let I=0;I<b;I+=1)p.renderBullet?x+=p.renderBullet.call(i,I,p.bulletClass):x+=`<${p.bulletElement} ${i.isElement?'part="bullet"':""} class="${p.bulletClass}"></${p.bulletElement}>`}p.type==="fraction"&&(p.renderFraction?x=p.renderFraction.call(i,p.currentClass,p.totalClass):x=`<span class="${p.currentClass}"></span> / <span class="${p.totalClass}"></span>`),p.type==="progressbar"&&(p.renderProgressbar?x=p.renderProgressbar.call(i,p.progressbarFillClass):x=`<span class="${p.progressbarFillClass}"></span>`),i.pagination.bullets=[],v.forEach(b=>{p.type!=="custom"&&(b.innerHTML=x||""),p.type==="bullets"&&i.pagination.bullets.push(...b.querySelectorAll(xt(p.bulletClass)))}),p.type!=="custom"&&n("paginationRender",v[0])}function f(){i.params.pagination=js(i,i.originalParams.pagination,i.params.pagination,{el:"swiper-pagination"});const p=i.params.pagination;if(!p.el)return;let _;typeof p.el=="string"&&i.isElement&&(_=i.el.shadowRoot.querySelector(p.el)),!_&&typeof p.el=="string"&&(_=[...document.querySelectorAll(p.el)]),_||(_=p.el),!(!_||_.length===0)&&(i.params.uniqueNavElements&&typeof p.el=="string"&&Array.isArray(_)&&_.length>1&&(_=[...i.el.querySelectorAll(p.el)],_.length>1&&(_=_.filter(v=>zt(v,".swiper")[0]===i.el)[0])),Array.isArray(_)&&_.length===1&&(_=_[0]),Object.assign(i.pagination,{el:_}),_=a(_),_.forEach(v=>{p.type==="bullets"&&p.clickable&&v.classList.add(p.clickableClass),v.classList.add(p.modifierClass+p.type),v.classList.add(i.isHorizontal()?p.horizontalClass:p.verticalClass),p.type==="bullets"&&p.dynamicBullets&&(v.classList.add(`${p.modifierClass}${p.type}-dynamic`),o=0,p.dynamicMainBullets<1&&(p.dynamicMainBullets=1)),p.type==="progressbar"&&p.progressbarOpposite&&v.classList.add(p.progressbarOppositeClass),p.clickable&&v.addEventListener("click",h),i.enabled||v.classList.add(p.lockClass)}))}function m(){const p=i.params.pagination;if(l())return;let _=i.pagination.el;_&&(_=a(_),_.forEach(v=>{v.classList.remove(p.hiddenClass),v.classList.remove(p.modifierClass+p.type),v.classList.remove(i.isHorizontal()?p.horizontalClass:p.verticalClass),p.clickable&&v.removeEventListener("click",h)})),i.pagination.bullets&&i.pagination.bullets.forEach(v=>v.classList.remove(...p.bulletActiveClass.split(" ")))}t("changeDirection",()=>{if(!i.pagination||!i.pagination.el)return;const p=i.params.pagination;let{el:_}=i.pagination;_=a(_),_.forEach(v=>{v.classList.remove(p.horizontalClass,p.verticalClass),v.classList.add(i.isHorizontal()?p.horizontalClass:p.verticalClass)})}),t("init",()=>{i.params.pagination.enabled===!1?y():(f(),u(),d())}),t("activeIndexChange",()=>{typeof i.snapIndex>"u"&&d()}),t("snapIndexChange",()=>{d()}),t("snapGridLengthChange",()=>{u(),d()}),t("destroy",()=>{m()}),t("enable disable",()=>{let{el:p}=i.pagination;p&&(p=a(p),p.forEach(_=>_.classList[i.enabled?"remove":"add"](i.params.pagination.lockClass)))}),t("lock unlock",()=>{d()}),t("click",(p,_)=>{const v=_.target;let{el:x}=i.pagination;if(Array.isArray(x)||(x=[x].filter(b=>!!b)),i.params.pagination.el&&i.params.pagination.hideOnClick&&x&&x.length>0&&!v.classList.contains(i.params.pagination.bulletClass)){if(i.navigation&&(i.navigation.nextEl&&v===i.navigation.nextEl||i.navigation.prevEl&&v===i.navigation.prevEl))return;const b=x[0].classList.contains(i.params.pagination.hiddenClass);n(b===!0?"paginationShow":"paginationHide"),x.forEach(I=>I.classList.toggle(i.params.pagination.hiddenClass))}});const g=()=>{i.el.classList.remove(i.params.pagination.paginationDisabledClass);let{el:p}=i.pagination;p&&(p=a(p),p.forEach(_=>_.classList.remove(i.params.pagination.paginationDisabledClass))),f(),u(),d()},y=()=>{i.el.classList.add(i.params.pagination.paginationDisabledClass);let{el:p}=i.pagination;p&&(p=a(p),p.forEach(_=>_.classList.add(i.params.pagination.paginationDisabledClass))),m()};Object.assign(i.pagination,{enable:g,disable:y,render:u,update:d,init:f,destroy:m})}function dh({swiper:i,extendParams:e,on:t,emit:n}){const s=ve();let r=!1,o=null,a=null,l,c,h,d;e({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),i.scrollbar={el:null,dragEl:null};function u(){if(!i.params.scrollbar.el||!i.scrollbar.el)return;const{scrollbar:T,rtlTranslate:S}=i,{dragEl:E,el:C}=T,R=i.params.scrollbar,w=i.params.loop?i.progressLoop:i.progress;let M=c,A=(h-c)*w;S?(A=-A,A>0?(M=c-A,A=0):-A+c>h&&(M=h+A)):A<0?(M=c+A,A=0):A+c>h&&(M=h-A),i.isHorizontal()?(E.style.transform=`translate3d(${A}px, 0, 0)`,E.style.width=`${M}px`):(E.style.transform=`translate3d(0px, ${A}px, 0)`,E.style.height=`${M}px`),R.hide&&(clearTimeout(o),C.style.opacity=1,o=setTimeout(()=>{C.style.opacity=0,C.style.transitionDuration="400ms"},1e3))}function f(T){!i.params.scrollbar.el||!i.scrollbar.el||(i.scrollbar.dragEl.style.transitionDuration=`${T}ms`)}function m(){if(!i.params.scrollbar.el||!i.scrollbar.el)return;const{scrollbar:T}=i,{dragEl:S,el:E}=T;S.style.width="",S.style.height="",h=i.isHorizontal()?E.offsetWidth:E.offsetHeight,d=i.size/(i.virtualSize+i.params.slidesOffsetBefore-(i.params.centeredSlides?i.snapGrid[0]:0)),i.params.scrollbar.dragSize==="auto"?c=h*d:c=parseInt(i.params.scrollbar.dragSize,10),i.isHorizontal()?S.style.width=`${c}px`:S.style.height=`${c}px`,d>=1?E.style.display="none":E.style.display="",i.params.scrollbar.hide&&(E.style.opacity=0),i.params.watchOverflow&&i.enabled&&T.el.classList[i.isLocked?"add":"remove"](i.params.scrollbar.lockClass)}function g(T){return i.isHorizontal()?T.clientX:T.clientY}function y(T){const{scrollbar:S,rtlTranslate:E}=i,{el:C}=S;let R;R=(g(T)-Cn(C)[i.isHorizontal()?"left":"top"]-(l!==null?l:c/2))/(h-c),R=Math.max(Math.min(R,1),0),E&&(R=1-R);const w=i.minTranslate()+(i.maxTranslate()-i.minTranslate())*R;i.updateProgress(w),i.setTranslate(w),i.updateActiveIndex(),i.updateSlidesClasses()}function p(T){const S=i.params.scrollbar,{scrollbar:E,wrapperEl:C}=i,{el:R,dragEl:w}=E;r=!0,l=T.target===w?g(T)-T.target.getBoundingClientRect()[i.isHorizontal()?"left":"top"]:null,T.preventDefault(),T.stopPropagation(),C.style.transitionDuration="100ms",w.style.transitionDuration="100ms",y(T),clearTimeout(a),R.style.transitionDuration="0ms",S.hide&&(R.style.opacity=1),i.params.cssMode&&(i.wrapperEl.style["scroll-snap-type"]="none"),n("scrollbarDragStart",T)}function _(T){const{scrollbar:S,wrapperEl:E}=i,{el:C,dragEl:R}=S;r&&(T.preventDefault?T.preventDefault():T.returnValue=!1,y(T),E.style.transitionDuration="0ms",C.style.transitionDuration="0ms",R.style.transitionDuration="0ms",n("scrollbarDragMove",T))}function v(T){const S=i.params.scrollbar,{scrollbar:E,wrapperEl:C}=i,{el:R}=E;r&&(r=!1,i.params.cssMode&&(i.wrapperEl.style["scroll-snap-type"]="",C.style.transitionDuration=""),S.hide&&(clearTimeout(a),a=Gt(()=>{R.style.opacity=0,R.style.transitionDuration="400ms"},1e3)),n("scrollbarDragEnd",T),S.snapOnRelease&&i.slideToClosest())}function x(T){const{scrollbar:S,params:E}=i,C=S.el;if(!C)return;const R=C,w=E.passiveListeners?{passive:!1,capture:!1}:!1,M=E.passiveListeners?{passive:!0,capture:!1}:!1;if(!R)return;const A=T==="on"?"addEventListener":"removeEventListener";R[A]("pointerdown",p,w),s[A]("pointermove",_,w),s[A]("pointerup",v,M)}function b(){!i.params.scrollbar.el||!i.scrollbar.el||x("on")}function I(){!i.params.scrollbar.el||!i.scrollbar.el||x("off")}function P(){const{scrollbar:T,el:S}=i;i.params.scrollbar=js(i,i.originalParams.scrollbar,i.params.scrollbar,{el:"swiper-scrollbar"});const E=i.params.scrollbar;if(!E.el)return;let C;typeof E.el=="string"&&i.isElement&&(C=i.el.shadowRoot.querySelector(E.el)),!C&&typeof E.el=="string"?C=s.querySelectorAll(E.el):C||(C=E.el),i.params.uniqueNavElements&&typeof E.el=="string"&&C.length>1&&S.querySelectorAll(E.el).length===1&&(C=S.querySelector(E.el)),C.length>0&&(C=C[0]),C.classList.add(i.isHorizontal()?E.horizontalClass:E.verticalClass);let R;C&&(R=C.querySelector(`.${i.params.scrollbar.dragClass}`),R||(R=$e("div",i.params.scrollbar.dragClass),C.append(R))),Object.assign(T,{el:C,dragEl:R}),E.draggable&&b(),C&&C.classList[i.enabled?"remove":"add"](i.params.scrollbar.lockClass)}function L(){const T=i.params.scrollbar,S=i.scrollbar.el;S&&S.classList.remove(i.isHorizontal()?T.horizontalClass:T.verticalClass),I()}t("init",()=>{i.params.scrollbar.enabled===!1?k():(P(),m(),u())}),t("update resize observerUpdate lock unlock",()=>{m()}),t("setTranslate",()=>{u()}),t("setTransition",(T,S)=>{f(S)}),t("enable disable",()=>{const{el:T}=i.scrollbar;T&&T.classList[i.enabled?"remove":"add"](i.params.scrollbar.lockClass)}),t("destroy",()=>{L()});const O=()=>{i.el.classList.remove(i.params.scrollbar.scrollbarDisabledClass),i.scrollbar.el&&i.scrollbar.el.classList.remove(i.params.scrollbar.scrollbarDisabledClass),P(),m(),u()},k=()=>{i.el.classList.add(i.params.scrollbar.scrollbarDisabledClass),i.scrollbar.el&&i.scrollbar.el.classList.add(i.params.scrollbar.scrollbarDisabledClass),L()};Object.assign(i.scrollbar,{enable:O,disable:k,updateSize:m,setTranslate:u,init:P,destroy:L})}function uh({swiper:i,extendParams:e,on:t}){e({parallax:{enabled:!1}});const n=(o,a)=>{const{rtl:l}=i,c=l?-1:1,h=o.getAttribute("data-swiper-parallax")||"0";let d=o.getAttribute("data-swiper-parallax-x"),u=o.getAttribute("data-swiper-parallax-y");const f=o.getAttribute("data-swiper-parallax-scale"),m=o.getAttribute("data-swiper-parallax-opacity"),g=o.getAttribute("data-swiper-parallax-rotate");if(d||u?(d=d||"0",u=u||"0"):i.isHorizontal()?(d=h,u="0"):(u=h,d="0"),d.indexOf("%")>=0?d=`${parseInt(d,10)*a*c}%`:d=`${d*a*c}px`,u.indexOf("%")>=0?u=`${parseInt(u,10)*a}%`:u=`${u*a}px`,typeof m<"u"&&m!==null){const p=m-(m-1)*(1-Math.abs(a));o.style.opacity=p}let y=`translate3d(${d}, ${u}, 0px)`;if(typeof f<"u"&&f!==null){const p=f-(f-1)*(1-Math.abs(a));y+=` scale(${p})`}if(g&&typeof g<"u"&&g!==null){const p=g*a*-1;y+=` rotate(${p}deg)`}o.style.transform=y},s=()=>{const{el:o,slides:a,progress:l,snapGrid:c}=i;ye(o,"[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").forEach(h=>{n(h,l)}),a.forEach((h,d)=>{let u=h.progress;i.params.slidesPerGroup>1&&i.params.slidesPerView!=="auto"&&(u+=Math.ceil(d/2)-l*(c.length-1)),u=Math.min(Math.max(u,-1),1),h.querySelectorAll("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale], [data-swiper-parallax-rotate]").forEach(f=>{n(f,u)})})},r=(o=i.params.speed)=>{const{el:a}=i;a.querySelectorAll("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").forEach(l=>{let c=parseInt(l.getAttribute("data-swiper-parallax-duration"),10)||o;o===0&&(c=0),l.style.transitionDuration=`${c}ms`})};t("beforeInit",()=>{i.params.parallax.enabled&&(i.params.watchSlidesProgress=!0,i.originalParams.watchSlidesProgress=!0)}),t("init",()=>{i.params.parallax.enabled&&s()}),t("setTranslate",()=>{i.params.parallax.enabled&&s()}),t("setTransition",(o,a)=>{i.params.parallax.enabled&&r(a)})}function fh({swiper:i,extendParams:e,on:t,emit:n}){const s=ae();e({zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),i.zoom={enabled:!1};let r=1,o=!1,a,l;const c=[],h={originX:0,originY:0,slideEl:void 0,slideWidth:void 0,slideHeight:void 0,imageEl:void 0,imageWrapEl:void 0,maxRatio:3},d={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},u={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0};let f=1;Object.defineProperty(i.zoom,"scale",{get(){return f},set(w){if(f!==w){const M=h.imageEl,A=h.slideEl;n("zoomChange",w,M,A)}f=w}});function m(){if(c.length<2)return 1;const w=c[0].pageX,M=c[0].pageY,A=c[1].pageX,F=c[1].pageY;return Math.sqrt((A-w)**2+(F-M)**2)}function g(){if(c.length<2)return{x:null,y:null};const w=h.imageEl.getBoundingClientRect();return[(c[0].pageX+(c[1].pageX-c[0].pageX)/2-w.x)/r,(c[0].pageY+(c[1].pageY-c[0].pageY)/2-w.y)/r]}function y(){return i.isElement?"swiper-slide":`.${i.params.slideClass}`}function p(w){const M=y();return!!(w.target.matches(M)||i.slides.filter(A=>A.contains(w.target)).length>0)}function _(w){const M=`.${i.params.zoom.containerClass}`;return!!(w.target.matches(M)||[...i.el.querySelectorAll(M)].filter(A=>A.contains(w.target)).length>0)}function v(w){if(w.pointerType==="mouse"&&c.splice(0,c.length),!p(w))return;const M=i.params.zoom;if(a=!1,l=!1,c.push(w),!(c.length<2)){if(a=!0,h.scaleStart=m(),!h.slideEl){h.slideEl=w.target.closest(`.${i.params.slideClass}, swiper-slide`),h.slideEl||(h.slideEl=i.slides[i.activeIndex]);let A=h.slideEl.querySelector(`.${M.containerClass}`);if(A&&(A=A.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),h.imageEl=A,A?h.imageWrapEl=zt(h.imageEl,`.${M.containerClass}`)[0]:h.imageWrapEl=void 0,!h.imageWrapEl){h.imageEl=void 0;return}h.maxRatio=h.imageWrapEl.getAttribute("data-swiper-zoom")||M.maxRatio}if(h.imageEl){const[A,F]=g();h.originX=A,h.originY=F,h.imageEl.style.transitionDuration="0ms"}o=!0}}function x(w){if(!p(w))return;const M=i.params.zoom,A=i.zoom,F=c.findIndex(z=>z.pointerId===w.pointerId);F>=0&&(c[F]=w),!(c.length<2)&&(l=!0,h.scaleMove=m(),h.imageEl&&(A.scale=h.scaleMove/h.scaleStart*r,A.scale>h.maxRatio&&(A.scale=h.maxRatio-1+(A.scale-h.maxRatio+1)**.5),A.scale<M.minRatio&&(A.scale=M.minRatio+1-(M.minRatio-A.scale+1)**.5),h.imageEl.style.transform=`translate3d(0,0,0) scale(${A.scale})`))}function b(w){if(!p(w)||w.pointerType==="mouse"&&w.type==="pointerout")return;const M=i.params.zoom,A=i.zoom,F=c.findIndex(z=>z.pointerId===w.pointerId);F>=0&&c.splice(F,1),!(!a||!l)&&(a=!1,l=!1,h.imageEl&&(A.scale=Math.max(Math.min(A.scale,h.maxRatio),M.minRatio),h.imageEl.style.transitionDuration=`${i.params.speed}ms`,h.imageEl.style.transform=`translate3d(0,0,0) scale(${A.scale})`,r=A.scale,o=!1,A.scale>1&&h.slideEl?h.slideEl.classList.add(`${M.zoomedSlideClass}`):A.scale<=1&&h.slideEl&&h.slideEl.classList.remove(`${M.zoomedSlideClass}`),A.scale===1&&(h.originX=0,h.originY=0,h.slideEl=void 0)))}function I(w){const M=i.device;if(!h.imageEl||d.isTouched)return;M.android&&w.cancelable&&w.preventDefault(),d.isTouched=!0;const A=c.length>0?c[0]:w;d.touchesStart.x=A.pageX,d.touchesStart.y=A.pageY}function P(w){if(!p(w)||!_(w))return;const M=i.zoom;if(!h.imageEl||!d.isTouched||!h.slideEl)return;d.isMoved||(d.width=h.imageEl.offsetWidth,d.height=h.imageEl.offsetHeight,d.startX=ws(h.imageWrapEl,"x")||0,d.startY=ws(h.imageWrapEl,"y")||0,h.slideWidth=h.slideEl.offsetWidth,h.slideHeight=h.slideEl.offsetHeight,h.imageWrapEl.style.transitionDuration="0ms");const A=d.width*M.scale,F=d.height*M.scale;if(A<h.slideWidth&&F<h.slideHeight)return;if(d.minX=Math.min(h.slideWidth/2-A/2,0),d.maxX=-d.minX,d.minY=Math.min(h.slideHeight/2-F/2,0),d.maxY=-d.minY,d.touchesCurrent.x=c.length>0?c[0].pageX:w.pageX,d.touchesCurrent.y=c.length>0?c[0].pageY:w.pageY,Math.max(Math.abs(d.touchesCurrent.x-d.touchesStart.x),Math.abs(d.touchesCurrent.y-d.touchesStart.y))>5&&(i.allowClick=!1),!d.isMoved&&!o){if(i.isHorizontal()&&(Math.floor(d.minX)===Math.floor(d.startX)&&d.touchesCurrent.x<d.touchesStart.x||Math.floor(d.maxX)===Math.floor(d.startX)&&d.touchesCurrent.x>d.touchesStart.x)){d.isTouched=!1;return}if(!i.isHorizontal()&&(Math.floor(d.minY)===Math.floor(d.startY)&&d.touchesCurrent.y<d.touchesStart.y||Math.floor(d.maxY)===Math.floor(d.startY)&&d.touchesCurrent.y>d.touchesStart.y)){d.isTouched=!1;return}}w.cancelable&&w.preventDefault(),w.stopPropagation(),d.isMoved=!0;const Z=(M.scale-r)/(h.maxRatio-i.params.zoom.minRatio),{originX:D,originY:N}=h;d.currentX=d.touchesCurrent.x-d.touchesStart.x+d.startX+Z*(d.width-D*2),d.currentY=d.touchesCurrent.y-d.touchesStart.y+d.startY+Z*(d.height-N*2),d.currentX<d.minX&&(d.currentX=d.minX+1-(d.minX-d.currentX+1)**.8),d.currentX>d.maxX&&(d.currentX=d.maxX-1+(d.currentX-d.maxX+1)**.8),d.currentY<d.minY&&(d.currentY=d.minY+1-(d.minY-d.currentY+1)**.8),d.currentY>d.maxY&&(d.currentY=d.maxY-1+(d.currentY-d.maxY+1)**.8),u.prevPositionX||(u.prevPositionX=d.touchesCurrent.x),u.prevPositionY||(u.prevPositionY=d.touchesCurrent.y),u.prevTime||(u.prevTime=Date.now()),u.x=(d.touchesCurrent.x-u.prevPositionX)/(Date.now()-u.prevTime)/2,u.y=(d.touchesCurrent.y-u.prevPositionY)/(Date.now()-u.prevTime)/2,Math.abs(d.touchesCurrent.x-u.prevPositionX)<2&&(u.x=0),Math.abs(d.touchesCurrent.y-u.prevPositionY)<2&&(u.y=0),u.prevPositionX=d.touchesCurrent.x,u.prevPositionY=d.touchesCurrent.y,u.prevTime=Date.now(),h.imageWrapEl.style.transform=`translate3d(${d.currentX}px, ${d.currentY}px,0)`}function L(){const w=i.zoom;if(!h.imageEl)return;if(!d.isTouched||!d.isMoved){d.isTouched=!1,d.isMoved=!1;return}d.isTouched=!1,d.isMoved=!1;let M=300,A=300;const F=u.x*M,z=d.currentX+F,Z=u.y*A,D=d.currentY+Z;u.x!==0&&(M=Math.abs((z-d.currentX)/u.x)),u.y!==0&&(A=Math.abs((D-d.currentY)/u.y));const N=Math.max(M,A);d.currentX=z,d.currentY=D;const G=d.width*w.scale,B=d.height*w.scale;d.minX=Math.min(h.slideWidth/2-G/2,0),d.maxX=-d.minX,d.minY=Math.min(h.slideHeight/2-B/2,0),d.maxY=-d.minY,d.currentX=Math.max(Math.min(d.currentX,d.maxX),d.minX),d.currentY=Math.max(Math.min(d.currentY,d.maxY),d.minY),h.imageWrapEl.style.transitionDuration=`${N}ms`,h.imageWrapEl.style.transform=`translate3d(${d.currentX}px, ${d.currentY}px,0)`}function O(){const w=i.zoom;h.slideEl&&i.activeIndex!==i.slides.indexOf(h.slideEl)&&(h.imageEl&&(h.imageEl.style.transform="translate3d(0,0,0) scale(1)"),h.imageWrapEl&&(h.imageWrapEl.style.transform="translate3d(0,0,0)"),h.slideEl.classList.remove(`${i.params.zoom.zoomedSlideClass}`),w.scale=1,r=1,h.slideEl=void 0,h.imageEl=void 0,h.imageWrapEl=void 0,h.originX=0,h.originY=0)}function k(w){const M=i.zoom,A=i.params.zoom;if(!h.slideEl){w&&w.target&&(h.slideEl=w.target.closest(`.${i.params.slideClass}, swiper-slide`)),h.slideEl||(i.params.virtual&&i.params.virtual.enabled&&i.virtual?h.slideEl=ye(i.slidesEl,`.${i.params.slideActiveClass}`)[0]:h.slideEl=i.slides[i.activeIndex]);let Ve=h.slideEl.querySelector(`.${A.containerClass}`);Ve&&(Ve=Ve.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),h.imageEl=Ve,Ve?h.imageWrapEl=zt(h.imageEl,`.${A.containerClass}`)[0]:h.imageWrapEl=void 0}if(!h.imageEl||!h.imageWrapEl)return;i.params.cssMode&&(i.wrapperEl.style.overflow="hidden",i.wrapperEl.style.touchAction="none"),h.slideEl.classList.add(`${A.zoomedSlideClass}`);let F,z,Z,D,N,G,B,ee,K,$,te,ue,fe,le,j,Y,ne,ce;typeof d.touchesStart.x>"u"&&w?(F=w.pageX,z=w.pageY):(F=d.touchesStart.x,z=d.touchesStart.y);const we=typeof w=="number"?w:null;r===1&&we&&(F=void 0,z=void 0),M.scale=we||h.imageWrapEl.getAttribute("data-swiper-zoom")||A.maxRatio,r=we||h.imageWrapEl.getAttribute("data-swiper-zoom")||A.maxRatio,w&&!(r===1&&we)?(ne=h.slideEl.offsetWidth,ce=h.slideEl.offsetHeight,Z=Cn(h.slideEl).left+s.scrollX,D=Cn(h.slideEl).top+s.scrollY,N=Z+ne/2-F,G=D+ce/2-z,K=h.imageEl.offsetWidth,$=h.imageEl.offsetHeight,te=K*M.scale,ue=$*M.scale,fe=Math.min(ne/2-te/2,0),le=Math.min(ce/2-ue/2,0),j=-fe,Y=-le,B=N*M.scale,ee=G*M.scale,B<fe&&(B=fe),B>j&&(B=j),ee<le&&(ee=le),ee>Y&&(ee=Y)):(B=0,ee=0),we&&M.scale===1&&(h.originX=0,h.originY=0),h.imageWrapEl.style.transitionDuration="300ms",h.imageWrapEl.style.transform=`translate3d(${B}px, ${ee}px,0)`,h.imageEl.style.transitionDuration="300ms",h.imageEl.style.transform=`translate3d(0,0,0) scale(${M.scale})`}function T(){const w=i.zoom,M=i.params.zoom;if(!h.slideEl){i.params.virtual&&i.params.virtual.enabled&&i.virtual?h.slideEl=ye(i.slidesEl,`.${i.params.slideActiveClass}`)[0]:h.slideEl=i.slides[i.activeIndex];let A=h.slideEl.querySelector(`.${M.containerClass}`);A&&(A=A.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),h.imageEl=A,A?h.imageWrapEl=zt(h.imageEl,`.${M.containerClass}`)[0]:h.imageWrapEl=void 0}!h.imageEl||!h.imageWrapEl||(i.params.cssMode&&(i.wrapperEl.style.overflow="",i.wrapperEl.style.touchAction=""),w.scale=1,r=1,h.imageWrapEl.style.transitionDuration="300ms",h.imageWrapEl.style.transform="translate3d(0,0,0)",h.imageEl.style.transitionDuration="300ms",h.imageEl.style.transform="translate3d(0,0,0) scale(1)",h.slideEl.classList.remove(`${M.zoomedSlideClass}`),h.slideEl=void 0,h.originX=0,h.originY=0)}function S(w){const M=i.zoom;M.scale&&M.scale!==1?T():k(w)}function E(){const w=i.params.passiveListeners?{passive:!0,capture:!1}:!1,M=i.params.passiveListeners?{passive:!1,capture:!0}:!0;return{passiveListener:w,activeListenerWithCapture:M}}function C(){const w=i.zoom;if(w.enabled)return;w.enabled=!0;const{passiveListener:M,activeListenerWithCapture:A}=E();i.wrapperEl.addEventListener("pointerdown",v,M),i.wrapperEl.addEventListener("pointermove",x,A),["pointerup","pointercancel","pointerout"].forEach(F=>{i.wrapperEl.addEventListener(F,b,M)}),i.wrapperEl.addEventListener("pointermove",P,A)}function R(){const w=i.zoom;if(!w.enabled)return;w.enabled=!1;const{passiveListener:M,activeListenerWithCapture:A}=E();i.wrapperEl.removeEventListener("pointerdown",v,M),i.wrapperEl.removeEventListener("pointermove",x,A),["pointerup","pointercancel","pointerout"].forEach(F=>{i.wrapperEl.removeEventListener(F,b,M)}),i.wrapperEl.removeEventListener("pointermove",P,A)}t("init",()=>{i.params.zoom.enabled&&C()}),t("destroy",()=>{R()}),t("touchStart",(w,M)=>{i.zoom.enabled&&I(M)}),t("touchEnd",(w,M)=>{i.zoom.enabled&&L()}),t("doubleTap",(w,M)=>{!i.animating&&i.params.zoom.enabled&&i.zoom.enabled&&i.params.zoom.toggle&&S(M)}),t("transitionEnd",()=>{i.zoom.enabled&&i.params.zoom.enabled&&O()}),t("slideChange",()=>{i.zoom.enabled&&i.params.zoom.enabled&&i.params.cssMode&&O()}),Object.assign(i.zoom,{enable:C,disable:R,in:k,out:T,toggle:S})}function mh({swiper:i,extendParams:e,on:t}){e({controller:{control:void 0,inverse:!1,by:"slide"}}),i.controller={control:void 0};function n(l,c){const h=function(){let m,g,y;return(p,_)=>{for(g=-1,m=p.length;m-g>1;)y=m+g>>1,p[y]<=_?g=y:m=y;return m}}();this.x=l,this.y=c,this.lastIndex=l.length-1;let d,u;return this.interpolate=function(m){return m?(u=h(this.x,m),d=u-1,(m-this.x[d])*(this.y[u]-this.y[d])/(this.x[u]-this.x[d])+this.y[d]):0},this}function s(l){i.controller.spline=i.params.loop?new n(i.slidesGrid,l.slidesGrid):new n(i.snapGrid,l.snapGrid)}function r(l,c){const h=i.controller.control;let d,u;const f=i.constructor;function m(g){if(g.destroyed)return;const y=i.rtlTranslate?-i.translate:i.translate;i.params.controller.by==="slide"&&(s(g),u=-i.controller.spline.interpolate(-y)),(!u||i.params.controller.by==="container")&&(d=(g.maxTranslate()-g.minTranslate())/(i.maxTranslate()-i.minTranslate()),(Number.isNaN(d)||!Number.isFinite(d))&&(d=1),u=(y-i.minTranslate())*d+g.minTranslate()),i.params.controller.inverse&&(u=g.maxTranslate()-u),g.updateProgress(u),g.setTranslate(u,i),g.updateActiveIndex(),g.updateSlidesClasses()}if(Array.isArray(h))for(let g=0;g<h.length;g+=1)h[g]!==c&&h[g]instanceof f&&m(h[g]);else h instanceof f&&c!==h&&m(h)}function o(l,c){const h=i.constructor,d=i.controller.control;let u;function f(m){m.destroyed||(m.setTransition(l,i),l!==0&&(m.transitionStart(),m.params.autoHeight&&Gt(()=>{m.updateAutoHeight()}),Pi(m.wrapperEl,()=>{d&&m.transitionEnd()})))}if(Array.isArray(d))for(u=0;u<d.length;u+=1)d[u]!==c&&d[u]instanceof h&&f(d[u]);else d instanceof h&&c!==d&&f(d)}function a(){i.controller.control&&i.controller.spline&&(i.controller.spline=void 0,delete i.controller.spline)}t("beforeInit",()=>{if(typeof window<"u"&&(typeof i.params.controller.control=="string"||i.params.controller.control instanceof HTMLElement)){const l=document.querySelector(i.params.controller.control);if(l&&l.swiper)i.controller.control=l.swiper;else if(l){const c=h=>{i.controller.control=h.detail[0],i.update(),l.removeEventListener("init",c)};l.addEventListener("init",c)}return}i.controller.control=i.params.controller.control}),t("update",()=>{a()}),t("resize",()=>{a()}),t("observerUpdate",()=>{a()}),t("setTranslate",(l,c,h)=>{!i.controller.control||i.controller.control.destroyed||i.controller.setTranslate(c,h)}),t("setTransition",(l,c,h)=>{!i.controller.control||i.controller.control.destroyed||i.controller.setTransition(c,h)}),Object.assign(i.controller,{setTranslate:r,setTransition:o})}function gh({swiper:i,extendParams:e,on:t}){e({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),i.a11y={clicked:!1};let n=null;function s(E){const C=n;C.length!==0&&(C.innerHTML="",C.innerHTML=E)}const r=E=>(Array.isArray(E)||(E=[E].filter(C=>!!C)),E);function o(E=16){const C=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(E).replace(/x/g,C)}function a(E){E=r(E),E.forEach(C=>{C.setAttribute("tabIndex","0")})}function l(E){E=r(E),E.forEach(C=>{C.setAttribute("tabIndex","-1")})}function c(E,C){E=r(E),E.forEach(R=>{R.setAttribute("role",C)})}function h(E,C){E=r(E),E.forEach(R=>{R.setAttribute("aria-roledescription",C)})}function d(E,C){E=r(E),E.forEach(R=>{R.setAttribute("aria-controls",C)})}function u(E,C){E=r(E),E.forEach(R=>{R.setAttribute("aria-label",C)})}function f(E,C){E=r(E),E.forEach(R=>{R.setAttribute("id",C)})}function m(E,C){E=r(E),E.forEach(R=>{R.setAttribute("aria-live",C)})}function g(E){E=r(E),E.forEach(C=>{C.setAttribute("aria-disabled",!0)})}function y(E){E=r(E),E.forEach(C=>{C.setAttribute("aria-disabled",!1)})}function p(E){if(E.keyCode!==13&&E.keyCode!==32)return;const C=i.params.a11y,R=E.target;i.pagination&&i.pagination.el&&(R===i.pagination.el||i.pagination.el.contains(E.target))&&!E.target.matches(xt(i.params.pagination.bulletClass))||(i.navigation&&i.navigation.nextEl&&R===i.navigation.nextEl&&(i.isEnd&&!i.params.loop||i.slideNext(),i.isEnd?s(C.lastSlideMessage):s(C.nextSlideMessage)),i.navigation&&i.navigation.prevEl&&R===i.navigation.prevEl&&(i.isBeginning&&!i.params.loop||i.slidePrev(),i.isBeginning?s(C.firstSlideMessage):s(C.prevSlideMessage)),i.pagination&&R.matches(xt(i.params.pagination.bulletClass))&&R.click())}function _(){if(i.params.loop||i.params.rewind||!i.navigation)return;const{nextEl:E,prevEl:C}=i.navigation;C&&(i.isBeginning?(g(C),l(C)):(y(C),a(C))),E&&(i.isEnd?(g(E),l(E)):(y(E),a(E)))}function v(){return i.pagination&&i.pagination.bullets&&i.pagination.bullets.length}function x(){return v()&&i.params.pagination.clickable}function b(){const E=i.params.a11y;v()&&i.pagination.bullets.forEach(C=>{i.params.pagination.clickable&&(a(C),i.params.pagination.renderBullet||(c(C,"button"),u(C,E.paginationBulletMessage.replace(/\{\{index\}\}/,Fi(C)+1)))),C.matches(xt(i.params.pagination.bulletActiveClass))?C.setAttribute("aria-current","true"):C.removeAttribute("aria-current")})}const I=(E,C,R)=>{a(E),E.tagName!=="BUTTON"&&(c(E,"button"),E.addEventListener("keydown",p)),u(E,R),d(E,C)},P=()=>{i.a11y.clicked=!0},L=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{i.destroyed||(i.a11y.clicked=!1)})})},O=E=>{if(i.a11y.clicked)return;const C=E.target.closest(`.${i.params.slideClass}, swiper-slide`);if(!C||!i.slides.includes(C))return;const R=i.slides.indexOf(C)===i.activeIndex,w=i.params.watchSlidesProgress&&i.visibleSlides&&i.visibleSlides.includes(C);R||w||E.sourceCapabilities&&E.sourceCapabilities.firesTouchEvents||(i.isHorizontal()?i.el.scrollLeft=0:i.el.scrollTop=0,i.slideTo(i.slides.indexOf(C),0))},k=()=>{const E=i.params.a11y;E.itemRoleDescriptionMessage&&h(i.slides,E.itemRoleDescriptionMessage),E.slideRole&&c(i.slides,E.slideRole);const C=i.slides.length;E.slideLabelMessage&&i.slides.forEach((R,w)=>{const M=i.params.loop?parseInt(R.getAttribute("data-swiper-slide-index"),10):w,A=E.slideLabelMessage.replace(/\{\{index\}\}/,M+1).replace(/\{\{slidesLength\}\}/,C);u(R,A)})},T=()=>{const E=i.params.a11y;i.isElement?i.el.shadowEl.append(n):i.el.append(n);const C=i.el;E.containerRoleDescriptionMessage&&h(C,E.containerRoleDescriptionMessage),E.containerMessage&&u(C,E.containerMessage);const R=i.wrapperEl,w=E.id||R.getAttribute("id")||`swiper-wrapper-${o(16)}`,M=i.params.autoplay&&i.params.autoplay.enabled?"off":"polite";f(R,w),m(R,M),k();let{nextEl:A,prevEl:F}=i.navigation?i.navigation:{};A=r(A),F=r(F),A&&A.forEach(z=>I(z,w,E.nextSlideMessage)),F&&F.forEach(z=>I(z,w,E.prevSlideMessage)),x()&&(Array.isArray(i.pagination.el)?i.pagination.el:[i.pagination.el]).forEach(Z=>{Z.addEventListener("keydown",p)}),i.el.addEventListener("focus",O,!0),i.el.addEventListener("pointerdown",P,!0),i.el.addEventListener("pointerup",L,!0)};function S(){n&&n.remove();let{nextEl:E,prevEl:C}=i.navigation?i.navigation:{};E=r(E),C=r(C),E&&E.forEach(R=>R.removeEventListener("keydown",p)),C&&C.forEach(R=>R.removeEventListener("keydown",p)),x()&&(Array.isArray(i.pagination.el)?i.pagination.el:[i.pagination.el]).forEach(w=>{w.removeEventListener("keydown",p)}),i.el.removeEventListener("focus",O,!0),i.el.removeEventListener("pointerdown",P,!0),i.el.removeEventListener("pointerup",L,!0)}t("beforeInit",()=>{n=$e("span",i.params.a11y.notificationClass),n.setAttribute("aria-live","assertive"),n.setAttribute("aria-atomic","true")}),t("afterInit",()=>{i.params.a11y.enabled&&T()}),t("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{i.params.a11y.enabled&&k()}),t("fromEdge toEdge afterInit lock unlock",()=>{i.params.a11y.enabled&&_()}),t("paginationUpdate",()=>{i.params.a11y.enabled&&b()}),t("destroy",()=>{i.params.a11y.enabled&&S()})}function ph({swiper:i,extendParams:e,on:t}){e({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let n=!1,s={};const r=u=>u.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),o=u=>{const f=ae();let m;u?m=new URL(u):m=f.location;const g=m.pathname.slice(1).split("/").filter(v=>v!==""),y=g.length,p=g[y-2],_=g[y-1];return{key:p,value:_}},a=(u,f)=>{const m=ae();if(!n||!i.params.history.enabled)return;let g;i.params.url?g=new URL(i.params.url):g=m.location;const y=i.slides[f];let p=r(y.getAttribute("data-history"));if(i.params.history.root.length>0){let v=i.params.history.root;v[v.length-1]==="/"&&(v=v.slice(0,v.length-1)),p=`${v}/${u?`${u}/`:""}${p}`}else g.pathname.includes(u)||(p=`${u?`${u}/`:""}${p}`);i.params.history.keepQuery&&(p+=g.search);const _=m.history.state;_&&_.value===p||(i.params.history.replaceState?m.history.replaceState({value:p},null,p):m.history.pushState({value:p},null,p))},l=(u,f,m)=>{if(f)for(let g=0,y=i.slides.length;g<y;g+=1){const p=i.slides[g];if(r(p.getAttribute("data-history"))===f){const v=i.getSlideIndex(p);i.slideTo(v,u,m)}}else i.slideTo(0,u,m)},c=()=>{s=o(i.params.url),l(i.params.speed,s.value,!1)},h=()=>{const u=ae();if(i.params.history){if(!u.history||!u.history.pushState){i.params.history.enabled=!1,i.params.hashNavigation.enabled=!0;return}if(n=!0,s=o(i.params.url),!s.key&&!s.value){i.params.history.replaceState||u.addEventListener("popstate",c);return}l(0,s.value,i.params.runCallbacksOnInit),i.params.history.replaceState||u.addEventListener("popstate",c)}},d=()=>{const u=ae();i.params.history.replaceState||u.removeEventListener("popstate",c)};t("init",()=>{i.params.history.enabled&&h()}),t("destroy",()=>{i.params.history.enabled&&d()}),t("transitionEnd _freeModeNoMomentumRelease",()=>{n&&a(i.params.history.key,i.activeIndex)}),t("slideChange",()=>{n&&i.params.cssMode&&a(i.params.history.key,i.activeIndex)})}function _h({swiper:i,extendParams:e,emit:t,on:n}){let s=!1;const r=ve(),o=ae();e({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(d,u){if(i.virtual&&i.params.virtual.enabled){const f=i.slides.filter(g=>g.getAttribute("data-hash")===u)[0];return f?parseInt(f.getAttribute("data-swiper-slide-index"),10):0}return i.getSlideIndex(ye(i.slidesEl,`.${i.params.slideClass}[data-hash="${u}"], swiper-slide[data-hash="${u}"]`)[0])}}});const a=()=>{t("hashChange");const d=r.location.hash.replace("#",""),u=i.virtual&&i.params.virtual.enabled?i.slidesEl.querySelector(`[data-swiper-slide-index="${i.activeIndex}"]`):i.slides[i.activeIndex],f=u?u.getAttribute("data-hash"):"";if(d!==f){const m=i.params.hashNavigation.getSlideIndex(i,d);if(typeof m>"u"||Number.isNaN(m))return;i.slideTo(m)}},l=()=>{if(!s||!i.params.hashNavigation.enabled)return;const d=i.virtual&&i.params.virtual.enabled?i.slidesEl.querySelector(`[data-swiper-slide-index="${i.activeIndex}"]`):i.slides[i.activeIndex],u=d?d.getAttribute("data-hash")||d.getAttribute("data-history"):"";i.params.hashNavigation.replaceState&&o.history&&o.history.replaceState?(o.history.replaceState(null,null,`#${u}`||""),t("hashSet")):(r.location.hash=u||"",t("hashSet"))},c=()=>{if(!i.params.hashNavigation.enabled||i.params.history&&i.params.history.enabled)return;s=!0;const d=r.location.hash.replace("#","");if(d){const f=i.params.hashNavigation.getSlideIndex(i,d);i.slideTo(f||0,0,i.params.runCallbacksOnInit,!0)}i.params.hashNavigation.watchState&&o.addEventListener("hashchange",a)},h=()=>{i.params.hashNavigation.watchState&&o.removeEventListener("hashchange",a)};n("init",()=>{i.params.hashNavigation.enabled&&c()}),n("destroy",()=>{i.params.hashNavigation.enabled&&h()}),n("transitionEnd _freeModeNoMomentumRelease",()=>{s&&l()}),n("slideChange",()=>{s&&i.params.cssMode&&l()})}function yh({swiper:i,extendParams:e,on:t,emit:n,params:s}){i.autoplay={running:!1,paused:!1,timeLeft:0},e({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let r,o,a=s&&s.autoplay?s.autoplay.delay:3e3,l=s&&s.autoplay?s.autoplay.delay:3e3,c,h=new Date().getTime,d,u,f,m,g,y;function p(w){!i||i.destroyed||!i.wrapperEl||w.target===i.wrapperEl&&(i.wrapperEl.removeEventListener("transitionend",p),L())}const _=()=>{if(i.destroyed||!i.autoplay.running)return;i.autoplay.paused?d=!0:d&&(l=c,d=!1);const w=i.autoplay.paused?c:h+l-new Date().getTime();i.autoplay.timeLeft=w,n("autoplayTimeLeft",w,w/a),o=requestAnimationFrame(()=>{_()})},v=()=>{let w;return i.virtual&&i.params.virtual.enabled?w=i.slides.filter(A=>A.classList.contains("swiper-slide-active"))[0]:w=i.slides[i.activeIndex],w?parseInt(w.getAttribute("data-swiper-autoplay"),10):void 0},x=w=>{if(i.destroyed||!i.autoplay.running)return;cancelAnimationFrame(o),_();let M=typeof w>"u"?i.params.autoplay.delay:w;a=i.params.autoplay.delay,l=i.params.autoplay.delay;const A=v();!Number.isNaN(A)&&A>0&&typeof w>"u"&&(M=A,a=A,l=A),c=M;const F=i.params.speed,z=()=>{!i||i.destroyed||(i.params.autoplay.reverseDirection?!i.isBeginning||i.params.loop||i.params.rewind?(i.slidePrev(F,!0,!0),n("autoplay")):i.params.autoplay.stopOnLastSlide||(i.slideTo(i.slides.length-1,F,!0,!0),n("autoplay")):!i.isEnd||i.params.loop||i.params.rewind?(i.slideNext(F,!0,!0),n("autoplay")):i.params.autoplay.stopOnLastSlide||(i.slideTo(0,F,!0,!0),n("autoplay")),i.params.cssMode&&(h=new Date().getTime(),requestAnimationFrame(()=>{x()})))};return M>0?(clearTimeout(r),r=setTimeout(()=>{z()},M)):requestAnimationFrame(()=>{z()}),M},b=()=>{i.autoplay.running=!0,x(),n("autoplayStart")},I=()=>{i.autoplay.running=!1,clearTimeout(r),cancelAnimationFrame(o),n("autoplayStop")},P=(w,M)=>{if(i.destroyed||!i.autoplay.running)return;clearTimeout(r),w||(y=!0);const A=()=>{n("autoplayPause"),i.params.autoplay.waitForTransition?i.wrapperEl.addEventListener("transitionend",p):L()};if(i.autoplay.paused=!0,M){g&&(c=i.params.autoplay.delay),g=!1,A();return}c=(c||i.params.autoplay.delay)-(new Date().getTime()-h),!(i.isEnd&&c<0&&!i.params.loop)&&(c<0&&(c=0),A())},L=()=>{i.isEnd&&c<0&&!i.params.loop||i.destroyed||!i.autoplay.running||(h=new Date().getTime(),y?(y=!1,x(c)):x(),i.autoplay.paused=!1,n("autoplayResume"))},O=()=>{if(i.destroyed||!i.autoplay.running)return;const w=ve();w.visibilityState==="hidden"&&(y=!0,P(!0)),w.visibilityState==="visible"&&L()},k=w=>{w.pointerType==="mouse"&&(y=!0,P(!0))},T=w=>{w.pointerType==="mouse"&&i.autoplay.paused&&L()},S=()=>{i.params.autoplay.pauseOnMouseEnter&&(i.el.addEventListener("pointerenter",k),i.el.addEventListener("pointerleave",T))},E=()=>{i.el.removeEventListener("pointerenter",k),i.el.removeEventListener("pointerleave",T)},C=()=>{ve().addEventListener("visibilitychange",O)},R=()=>{ve().removeEventListener("visibilitychange",O)};t("init",()=>{i.params.autoplay.enabled&&(S(),C(),h=new Date().getTime(),b())}),t("destroy",()=>{E(),R(),i.autoplay.running&&I()}),t("beforeTransitionStart",(w,M,A)=>{i.destroyed||!i.autoplay.running||(A||!i.params.autoplay.disableOnInteraction?P(!0,!0):I())}),t("sliderFirstMove",()=>{if(!(i.destroyed||!i.autoplay.running)){if(i.params.autoplay.disableOnInteraction){I();return}u=!0,f=!1,y=!1,m=setTimeout(()=>{y=!0,f=!0,P(!0)},200)}}),t("touchEnd",()=>{if(!(i.destroyed||!i.autoplay.running||!u)){if(clearTimeout(m),clearTimeout(r),i.params.autoplay.disableOnInteraction){f=!1,u=!1;return}f&&i.params.cssMode&&L(),f=!1,u=!1}}),t("slideChange",()=>{i.destroyed||!i.autoplay.running||(g=!0)}),Object.assign(i.autoplay,{start:b,stop:I,pause:P,resume:L})}function vh({swiper:i,extendParams:e,on:t}){e({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let n=!1,s=!1;i.thumbs={swiper:null};function r(){const l=i.thumbs.swiper;if(!l||l.destroyed)return;const c=l.clickedIndex,h=l.clickedSlide;if(h&&h.classList.contains(i.params.thumbs.slideThumbActiveClass)||typeof c>"u"||c===null)return;let d;l.params.loop?d=parseInt(l.clickedSlide.getAttribute("data-swiper-slide-index"),10):d=c,i.params.loop?i.slideToLoop(d):i.slideTo(d)}function o(){const{thumbs:l}=i.params;if(n)return!1;n=!0;const c=i.constructor;if(l.swiper instanceof c)i.thumbs.swiper=l.swiper,Object.assign(i.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(i.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),i.thumbs.swiper.update();else if(Ci(l.swiper)){const h=Object.assign({},l.swiper);Object.assign(h,{watchSlidesProgress:!0,slideToClickedSlide:!1}),i.thumbs.swiper=new c(h),s=!0}return i.thumbs.swiper.el.classList.add(i.params.thumbs.thumbsContainerClass),i.thumbs.swiper.on("tap",r),!0}function a(l){const c=i.thumbs.swiper;if(!c||c.destroyed)return;const h=c.params.slidesPerView==="auto"?c.slidesPerViewDynamic():c.params.slidesPerView;let d=1;const u=i.params.thumbs.slideThumbActiveClass;if(i.params.slidesPerView>1&&!i.params.centeredSlides&&(d=i.params.slidesPerView),i.params.thumbs.multipleActiveThumbs||(d=1),d=Math.floor(d),c.slides.forEach(g=>g.classList.remove(u)),c.params.loop||c.params.virtual&&c.params.virtual.enabled)for(let g=0;g<d;g+=1)ye(c.slidesEl,`[data-swiper-slide-index="${i.realIndex+g}"]`).forEach(y=>{y.classList.add(u)});else for(let g=0;g<d;g+=1)c.slides[i.realIndex+g]&&c.slides[i.realIndex+g].classList.add(u);const f=i.params.thumbs.autoScrollOffset,m=f&&!c.params.loop;if(i.realIndex!==c.realIndex||m){const g=c.activeIndex;let y,p;if(c.params.loop){const _=c.slides.filter(v=>v.getAttribute("data-swiper-slide-index")===`${i.realIndex}`)[0];y=c.slides.indexOf(_),p=i.activeIndex>i.previousIndex?"next":"prev"}else y=i.realIndex,p=y>i.previousIndex?"next":"prev";m&&(y+=p==="next"?f:-1*f),c.visibleSlidesIndexes&&c.visibleSlidesIndexes.indexOf(y)<0&&(c.params.centeredSlides?y>g?y=y-Math.floor(h/2)+1:y=y+Math.floor(h/2)-1:y>g&&c.params.slidesPerGroup,c.slideTo(y,l?0:void 0))}}t("beforeInit",()=>{const{thumbs:l}=i.params;if(!(!l||!l.swiper))if(typeof l.swiper=="string"||l.swiper instanceof HTMLElement){const c=ve(),h=()=>{const u=typeof l.swiper=="string"?c.querySelector(l.swiper):l.swiper;if(u&&u.swiper)l.swiper=u.swiper,o(),a(!0);else if(u){const f=m=>{l.swiper=m.detail[0],u.removeEventListener("init",f),o(),a(!0),l.swiper.update(),i.update()};u.addEventListener("init",f)}return u},d=()=>{if(i.destroyed)return;h()||requestAnimationFrame(d)};requestAnimationFrame(d)}else o(),a(!0)}),t("slideChange update resize observerUpdate",()=>{a()}),t("setTransition",(l,c)=>{const h=i.thumbs.swiper;!h||h.destroyed||h.setTransition(c)}),t("beforeDestroy",()=>{const l=i.thumbs.swiper;!l||l.destroyed||s&&l.destroy()}),Object.assign(i.thumbs,{init:o,update:a})}function xh({swiper:i,extendParams:e,emit:t,once:n}){e({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function s(){if(i.params.cssMode)return;const a=i.getTranslate();i.setTranslate(a),i.setTransition(0),i.touchEventsData.velocities.length=0,i.freeMode.onTouchEnd({currentPos:i.rtl?i.translate:-i.translate})}function r(){if(i.params.cssMode)return;const{touchEventsData:a,touches:l}=i;a.velocities.length===0&&a.velocities.push({position:l[i.isHorizontal()?"startX":"startY"],time:a.touchStartTime}),a.velocities.push({position:l[i.isHorizontal()?"currentX":"currentY"],time:Ne()})}function o({currentPos:a}){if(i.params.cssMode)return;const{params:l,wrapperEl:c,rtlTranslate:h,snapGrid:d,touchEventsData:u}=i,m=Ne()-u.touchStartTime;if(a<-i.minTranslate()){i.slideTo(i.activeIndex);return}if(a>-i.maxTranslate()){i.slides.length<d.length?i.slideTo(d.length-1):i.slideTo(i.slides.length-1);return}if(l.freeMode.momentum){if(u.velocities.length>1){const I=u.velocities.pop(),P=u.velocities.pop(),L=I.position-P.position,O=I.time-P.time;i.velocity=L/O,i.velocity/=2,Math.abs(i.velocity)<l.freeMode.minimumVelocity&&(i.velocity=0),(O>150||Ne()-I.time>300)&&(i.velocity=0)}else i.velocity=0;i.velocity*=l.freeMode.momentumVelocityRatio,u.velocities.length=0;let g=1e3*l.freeMode.momentumRatio;const y=i.velocity*g;let p=i.translate+y;h&&(p=-p);let _=!1,v;const x=Math.abs(i.velocity)*20*l.freeMode.momentumBounceRatio;let b;if(p<i.maxTranslate())l.freeMode.momentumBounce?(p+i.maxTranslate()<-x&&(p=i.maxTranslate()-x),v=i.maxTranslate(),_=!0,u.allowMomentumBounce=!0):p=i.maxTranslate(),l.loop&&l.centeredSlides&&(b=!0);else if(p>i.minTranslate())l.freeMode.momentumBounce?(p-i.minTranslate()>x&&(p=i.minTranslate()+x),v=i.minTranslate(),_=!0,u.allowMomentumBounce=!0):p=i.minTranslate(),l.loop&&l.centeredSlides&&(b=!0);else if(l.freeMode.sticky){let I;for(let P=0;P<d.length;P+=1)if(d[P]>-p){I=P;break}Math.abs(d[I]-p)<Math.abs(d[I-1]-p)||i.swipeDirection==="next"?p=d[I]:p=d[I-1],p=-p}if(b&&n("transitionEnd",()=>{i.loopFix()}),i.velocity!==0){if(h?g=Math.abs((-p-i.translate)/i.velocity):g=Math.abs((p-i.translate)/i.velocity),l.freeMode.sticky){const I=Math.abs((h?-p:p)-i.translate),P=i.slidesSizesGrid[i.activeIndex];I<P?g=l.speed:I<2*P?g=l.speed*1.5:g=l.speed*2.5}}else if(l.freeMode.sticky){i.slideToClosest();return}l.freeMode.momentumBounce&&_?(i.updateProgress(v),i.setTransition(g),i.setTranslate(p),i.transitionStart(!0,i.swipeDirection),i.animating=!0,Pi(c,()=>{!i||i.destroyed||!u.allowMomentumBounce||(t("momentumBounce"),i.setTransition(l.speed),setTimeout(()=>{i.setTranslate(v),Pi(c,()=>{!i||i.destroyed||i.transitionEnd()})},0))})):i.velocity?(t("_freeModeNoMomentumRelease"),i.updateProgress(p),i.setTransition(g),i.setTranslate(p),i.transitionStart(!0,i.swipeDirection),i.animating||(i.animating=!0,Pi(c,()=>{!i||i.destroyed||i.transitionEnd()}))):i.updateProgress(p),i.updateActiveIndex(),i.updateSlidesClasses()}else if(l.freeMode.sticky){i.slideToClosest();return}else l.freeMode&&t("_freeModeNoMomentumRelease");(!l.freeMode.momentum||m>=l.longSwipesMs)&&(i.updateProgress(),i.updateActiveIndex(),i.updateSlidesClasses())}Object.assign(i,{freeMode:{onTouchStart:s,onTouchMove:r,onTouchEnd:o}})}function Eh({swiper:i,extendParams:e}){e({grid:{rows:1,fill:"column"}});let t,n,s;const r=()=>{let c=i.params.spaceBetween;return typeof c=="string"&&c.indexOf("%")>=0?c=parseFloat(c.replace("%",""))/100*i.size:typeof c=="string"&&(c=parseFloat(c)),c},o=c=>{const{slidesPerView:h}=i.params,{rows:d,fill:u}=i.params.grid;s=Math.floor(c/d),Math.floor(c/d)===c/d?t=c:t=Math.ceil(c/d)*d,h!=="auto"&&u==="row"&&(t=Math.max(t,h*d)),n=t/d},a=(c,h,d,u)=>{const{slidesPerGroup:f}=i.params,m=r(),{rows:g,fill:y}=i.params.grid;let p,_,v;if(y==="row"&&f>1){const x=Math.floor(c/(f*g)),b=c-g*f*x,I=x===0?f:Math.min(Math.ceil((d-x*g*f)/g),f);v=Math.floor(b/I),_=b-v*I+x*f,p=_+v*t/g,h.style.order=p}else y==="column"?(_=Math.floor(c/g),v=c-_*g,(_>s||_===s&&v===g-1)&&(v+=1,v>=g&&(v=0,_+=1))):(v=Math.floor(c/n),_=c-v*n);h.row=v,h.column=_,h.style[u("margin-top")]=v!==0?m&&`${m}px`:""},l=(c,h,d)=>{const{centeredSlides:u,roundLengths:f}=i.params,m=r(),{rows:g}=i.params.grid;if(i.virtualSize=(c+m)*t,i.virtualSize=Math.ceil(i.virtualSize/g)-m,i.wrapperEl.style[d("width")]=`${i.virtualSize+m}px`,u){const y=[];for(let p=0;p<h.length;p+=1){let _=h[p];f&&(_=Math.floor(_)),h[p]<i.virtualSize+h[0]&&y.push(_)}h.splice(0,h.length),h.push(...y)}};i.grid={initSlides:o,updateSlide:a,updateWrapperSize:l}}function Sh(i){const e=this,{params:t,slidesEl:n}=e;t.loop&&e.loopDestroy();const s=r=>{if(typeof r=="string"){const o=document.createElement("div");o.innerHTML=r,n.append(o.children[0]),o.innerHTML=""}else n.append(r)};if(typeof i=="object"&&"length"in i)for(let r=0;r<i.length;r+=1)i[r]&&s(i[r]);else s(i);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update()}function bh(i){const e=this,{params:t,activeIndex:n,slidesEl:s}=e;t.loop&&e.loopDestroy();let r=n+1;const o=a=>{if(typeof a=="string"){const l=document.createElement("div");l.innerHTML=a,s.prepend(l.children[0]),l.innerHTML=""}else s.prepend(a)};if(typeof i=="object"&&"length"in i){for(let a=0;a<i.length;a+=1)i[a]&&o(i[a]);r=n+i.length}else o(i);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update(),e.slideTo(r,0,!1)}function Th(i,e){const t=this,{params:n,activeIndex:s,slidesEl:r}=t;let o=s;n.loop&&(o-=t.loopedSlides,t.loopDestroy(),t.recalcSlides());const a=t.slides.length;if(i<=0){t.prependSlide(e);return}if(i>=a){t.appendSlide(e);return}let l=o>i?o+1:o;const c=[];for(let h=a-1;h>=i;h-=1){const d=t.slides[h];d.remove(),c.unshift(d)}if(typeof e=="object"&&"length"in e){for(let h=0;h<e.length;h+=1)e[h]&&r.append(e[h]);l=o>i?o+e.length:o}else r.append(e);for(let h=0;h<c.length;h+=1)r.append(c[h]);t.recalcSlides(),n.loop&&t.loopCreate(),(!n.observer||t.isElement)&&t.update(),n.loop?t.slideTo(l+t.loopedSlides,0,!1):t.slideTo(l,0,!1)}function Ch(i){const e=this,{params:t,activeIndex:n}=e;let s=n;t.loop&&(s-=e.loopedSlides,e.loopDestroy());let r=s,o;if(typeof i=="object"&&"length"in i){for(let a=0;a<i.length;a+=1)o=i[a],e.slides[o]&&e.slides[o].remove(),o<r&&(r-=1);r=Math.max(r,0)}else o=i,e.slides[o]&&e.slides[o].remove(),o<r&&(r-=1),r=Math.max(r,0);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update(),t.loop?e.slideTo(r+e.loopedSlides,0,!1):e.slideTo(r,0,!1)}function Ih(){const i=this,e=[];for(let t=0;t<i.slides.length;t+=1)e.push(t);i.removeSlide(e)}function wh({swiper:i}){Object.assign(i,{appendSlide:Sh.bind(i),prependSlide:bh.bind(i),addSlide:Th.bind(i),removeSlide:Ch.bind(i),removeAllSlides:Ih.bind(i)})}function pi(i){const{effect:e,swiper:t,on:n,setTranslate:s,setTransition:r,overwriteParams:o,perspective:a,recreateShadows:l,getEffectParams:c}=i;n("beforeInit",()=>{if(t.params.effect!==e)return;t.classNames.push(`${t.params.containerModifierClass}${e}`),a&&a()&&t.classNames.push(`${t.params.containerModifierClass}3d`);const d=o?o():{};Object.assign(t.params,d),Object.assign(t.originalParams,d)}),n("setTranslate",()=>{t.params.effect===e&&s()}),n("setTransition",(d,u)=>{t.params.effect===e&&r(u)}),n("transitionEnd",()=>{if(t.params.effect===e&&l){if(!c||!c().slideShadows)return;t.slides.forEach(d=>{d.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(u=>u.remove())}),l()}});let h;n("virtualUpdate",()=>{t.params.effect===e&&(t.slides.length||(h=!0),requestAnimationFrame(()=>{h&&t.slides&&t.slides.length&&(s(),h=!1)}))})}function qi(i,e){const t=Xt(e);return t!==e&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function Nn({swiper:i,duration:e,transformElements:t,allSlides:n}){const{activeIndex:s}=i,r=o=>o.parentElement?o.parentElement:i.slides.filter(l=>l.shadowEl&&l.shadowEl===o.parentNode)[0];if(i.params.virtualTranslate&&e!==0){let o=!1,a;n?a=t:a=t.filter(l=>{const c=l.classList.contains("swiper-slide-transform")?r(l):l;return i.getSlideIndex(c)===s}),a.forEach(l=>{Pi(l,()=>{if(o||!i||i.destroyed)return;o=!0,i.animating=!1;const c=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});i.wrapperEl.dispatchEvent(c)})})}}function Lh({swiper:i,extendParams:e,on:t}){e({fadeEffect:{crossFade:!1}}),pi({effect:"fade",swiper:i,on:t,setTranslate:()=>{const{slides:r}=i,o=i.params.fadeEffect;for(let a=0;a<r.length;a+=1){const l=i.slides[a];let h=-l.swiperSlideOffset;i.params.virtualTranslate||(h-=i.translate);let d=0;i.isHorizontal()||(d=h,h=0);const u=i.params.fadeEffect.crossFade?Math.max(1-Math.abs(l.progress),0):1+Math.min(Math.max(l.progress,-1),0),f=qi(o,l);f.style.opacity=u,f.style.transform=`translate3d(${h}px, ${d}px, 0px)`}},setTransition:r=>{const o=i.slides.map(a=>Xt(a));o.forEach(a=>{a.style.transitionDuration=`${r}ms`}),Nn({swiper:i,duration:r,transformElements:o,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!i.params.cssMode})})}function Mh({swiper:i,extendParams:e,on:t}){e({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});const n=(a,l,c)=>{let h=c?a.querySelector(".swiper-slide-shadow-left"):a.querySelector(".swiper-slide-shadow-top"),d=c?a.querySelector(".swiper-slide-shadow-right"):a.querySelector(".swiper-slide-shadow-bottom");h||(h=$e("div",`swiper-slide-shadow-${c?"left":"top"}`),a.append(h)),d||(d=$e("div",`swiper-slide-shadow-${c?"right":"bottom"}`),a.append(d)),h&&(h.style.opacity=Math.max(-l,0)),d&&(d.style.opacity=Math.max(l,0))};pi({effect:"cube",swiper:i,on:t,setTranslate:()=>{const{el:a,wrapperEl:l,slides:c,width:h,height:d,rtlTranslate:u,size:f,browser:m}=i,g=i.params.cubeEffect,y=i.isHorizontal(),p=i.virtual&&i.params.virtual.enabled;let _=0,v;g.shadow&&(y?(v=i.slidesEl.querySelector(".swiper-cube-shadow"),v||(v=$e("div","swiper-cube-shadow"),i.slidesEl.append(v)),v.style.height=`${h}px`):(v=a.querySelector(".swiper-cube-shadow"),v||(v=$e("div","swiper-cube-shadow"),a.append(v))));for(let b=0;b<c.length;b+=1){const I=c[b];let P=b;p&&(P=parseInt(I.getAttribute("data-swiper-slide-index"),10));let L=P*90,O=Math.floor(L/360);u&&(L=-L,O=Math.floor(-L/360));const k=Math.max(Math.min(I.progress,1),-1);let T=0,S=0,E=0;P%4===0?(T=-O*4*f,E=0):(P-1)%4===0?(T=0,E=-O*4*f):(P-2)%4===0?(T=f+O*4*f,E=f):(P-3)%4===0&&(T=-f,E=3*f+f*4*O),u&&(T=-T),y||(S=T,T=0);const C=`rotateX(${y?0:-L}deg) rotateY(${y?L:0}deg) translate3d(${T}px, ${S}px, ${E}px)`;k<=1&&k>-1&&(_=P*90+k*90,u&&(_=-P*90-k*90)),I.style.transform=C,g.slideShadows&&n(I,k,y)}if(l.style.transformOrigin=`50% 50% -${f/2}px`,l.style["-webkit-transform-origin"]=`50% 50% -${f/2}px`,g.shadow)if(y)v.style.transform=`translate3d(0px, ${h/2+g.shadowOffset}px, ${-h/2}px) rotateX(90deg) rotateZ(0deg) scale(${g.shadowScale})`;else{const b=Math.abs(_)-Math.floor(Math.abs(_)/90)*90,I=1.5-(Math.sin(b*2*Math.PI/360)/2+Math.cos(b*2*Math.PI/360)/2),P=g.shadowScale,L=g.shadowScale/I,O=g.shadowOffset;v.style.transform=`scale3d(${P}, 1, ${L}) translate3d(0px, ${d/2+O}px, ${-d/2/L}px) rotateX(-90deg)`}const x=(m.isSafari||m.isWebView)&&m.needPerspectiveFix?-f/2:0;l.style.transform=`translate3d(0px,0,${x}px) rotateX(${i.isHorizontal()?0:_}deg) rotateY(${i.isHorizontal()?-_:0}deg)`,l.style.setProperty("--swiper-cube-translate-z",`${x}px`)},setTransition:a=>{const{el:l,slides:c}=i;if(c.forEach(h=>{h.style.transitionDuration=`${a}ms`,h.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(d=>{d.style.transitionDuration=`${a}ms`})}),i.params.cubeEffect.shadow&&!i.isHorizontal()){const h=l.querySelector(".swiper-cube-shadow");h&&(h.style.transitionDuration=`${a}ms`)}},recreateShadows:()=>{const a=i.isHorizontal();i.slides.forEach(l=>{const c=Math.max(Math.min(l.progress,1),-1);n(l,c,a)})},getEffectParams:()=>i.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})}function hi(i,e,t){const n=`swiper-slide-shadow${t?`-${t}`:""}`,s=Xt(e);let r=s.querySelector(`.${n}`);return r||(r=$e("div",`swiper-slide-shadow${t?`-${t}`:""}`),s.append(r)),r}function Rh({swiper:i,extendParams:e,on:t}){e({flipEffect:{slideShadows:!0,limitRotation:!0}});const n=(a,l,c)=>{let h=i.isHorizontal()?a.querySelector(".swiper-slide-shadow-left"):a.querySelector(".swiper-slide-shadow-top"),d=i.isHorizontal()?a.querySelector(".swiper-slide-shadow-right"):a.querySelector(".swiper-slide-shadow-bottom");h||(h=hi(c,a,i.isHorizontal()?"left":"top")),d||(d=hi(c,a,i.isHorizontal()?"right":"bottom")),h&&(h.style.opacity=Math.max(-l,0)),d&&(d.style.opacity=Math.max(l,0))};pi({effect:"flip",swiper:i,on:t,setTranslate:()=>{const{slides:a,rtlTranslate:l}=i,c=i.params.flipEffect;for(let h=0;h<a.length;h+=1){const d=a[h];let u=d.progress;i.params.flipEffect.limitRotation&&(u=Math.max(Math.min(d.progress,1),-1));const f=d.swiperSlideOffset;let g=-180*u,y=0,p=i.params.cssMode?-f-i.translate:-f,_=0;i.isHorizontal()?l&&(g=-g):(_=p,p=0,y=-g,g=0),d.style.zIndex=-Math.abs(Math.round(u))+a.length,c.slideShadows&&n(d,u,c);const v=`translate3d(${p}px, ${_}px, 0px) rotateX(${y}deg) rotateY(${g}deg)`,x=qi(c,d);x.style.transform=v}},setTransition:a=>{const l=i.slides.map(c=>Xt(c));l.forEach(c=>{c.style.transitionDuration=`${a}ms`,c.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>{h.style.transitionDuration=`${a}ms`})}),Nn({swiper:i,duration:a,transformElements:l})},recreateShadows:()=>{const a=i.params.flipEffect;i.slides.forEach(l=>{let c=l.progress;i.params.flipEffect.limitRotation&&(c=Math.max(Math.min(l.progress,1),-1)),n(l,c,a)})},getEffectParams:()=>i.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!i.params.cssMode})})}function Ah({swiper:i,extendParams:e,on:t}){e({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),pi({effect:"coverflow",swiper:i,on:t,setTranslate:()=>{const{width:r,height:o,slides:a,slidesSizesGrid:l}=i,c=i.params.coverflowEffect,h=i.isHorizontal(),d=i.translate,u=h?-d+r/2:-d+o/2,f=h?c.rotate:-c.rotate,m=c.depth;for(let g=0,y=a.length;g<y;g+=1){const p=a[g],_=l[g],v=p.swiperSlideOffset,x=(u-v-_/2)/_,b=typeof c.modifier=="function"?c.modifier(x):x*c.modifier;let I=h?f*b:0,P=h?0:f*b,L=-m*Math.abs(b),O=c.stretch;typeof O=="string"&&O.indexOf("%")!==-1&&(O=parseFloat(c.stretch)/100*_);let k=h?0:O*b,T=h?O*b:0,S=1-(1-c.scale)*Math.abs(b);Math.abs(T)<.001&&(T=0),Math.abs(k)<.001&&(k=0),Math.abs(L)<.001&&(L=0),Math.abs(I)<.001&&(I=0),Math.abs(P)<.001&&(P=0),Math.abs(S)<.001&&(S=0);const E=`translate3d(${T}px,${k}px,${L}px)  rotateX(${P}deg) rotateY(${I}deg) scale(${S})`,C=qi(c,p);if(C.style.transform=E,p.style.zIndex=-Math.abs(Math.round(b))+1,c.slideShadows){let R=h?p.querySelector(".swiper-slide-shadow-left"):p.querySelector(".swiper-slide-shadow-top"),w=h?p.querySelector(".swiper-slide-shadow-right"):p.querySelector(".swiper-slide-shadow-bottom");R||(R=hi(c,p,h?"left":"top")),w||(w=hi(c,p,h?"right":"bottom")),R&&(R.style.opacity=b>0?b:0),w&&(w.style.opacity=-b>0?-b:0)}}},setTransition:r=>{i.slides.map(a=>Xt(a)).forEach(a=>{a.style.transitionDuration=`${r}ms`,a.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(l=>{l.style.transitionDuration=`${r}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}function Ph({swiper:i,extendParams:e,on:t}){e({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});const n=o=>typeof o=="string"?o:`${o}px`;pi({effect:"creative",swiper:i,on:t,setTranslate:()=>{const{slides:o,wrapperEl:a,slidesSizesGrid:l}=i,c=i.params.creativeEffect,{progressMultiplier:h}=c,d=i.params.centeredSlides;if(d){const u=l[0]/2-i.params.slidesOffsetBefore||0;a.style.transform=`translateX(calc(50% - ${u}px))`}for(let u=0;u<o.length;u+=1){const f=o[u],m=f.progress,g=Math.min(Math.max(f.progress,-c.limitProgress),c.limitProgress);let y=g;d||(y=Math.min(Math.max(f.originalProgress,-c.limitProgress),c.limitProgress));const p=f.swiperSlideOffset,_=[i.params.cssMode?-p-i.translate:-p,0,0],v=[0,0,0];let x=!1;i.isHorizontal()||(_[1]=_[0],_[0]=0);let b={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};g<0?(b=c.next,x=!0):g>0&&(b=c.prev,x=!0),_.forEach((S,E)=>{_[E]=`calc(${S}px + (${n(b.translate[E])} * ${Math.abs(g*h)}))`}),v.forEach((S,E)=>{v[E]=b.rotate[E]*Math.abs(g*h)}),f.style.zIndex=-Math.abs(Math.round(m))+o.length;const I=_.join(", "),P=`rotateX(${v[0]}deg) rotateY(${v[1]}deg) rotateZ(${v[2]}deg)`,L=y<0?`scale(${1+(1-b.scale)*y*h})`:`scale(${1-(1-b.scale)*y*h})`,O=y<0?1+(1-b.opacity)*y*h:1-(1-b.opacity)*y*h,k=`translate3d(${I}) ${P} ${L}`;if(x&&b.shadow||!x){let S=f.querySelector(".swiper-slide-shadow");if(!S&&b.shadow&&(S=hi(c,f)),S){const E=c.shadowPerProgress?g*(1/c.limitProgress):g;S.style.opacity=Math.min(Math.max(Math.abs(E),0),1)}}const T=qi(c,f);T.style.transform=k,T.style.opacity=O,b.origin&&(T.style.transformOrigin=b.origin)}},setTransition:o=>{const a=i.slides.map(l=>Xt(l));a.forEach(l=>{l.style.transitionDuration=`${o}ms`,l.querySelectorAll(".swiper-slide-shadow").forEach(c=>{c.style.transitionDuration=`${o}ms`})}),Nn({swiper:i,duration:o,transformElements:a,allSlides:!0})},perspective:()=>i.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!i.params.cssMode})})}function Oh({swiper:i,extendParams:e,on:t}){e({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),pi({effect:"cards",swiper:i,on:t,setTranslate:()=>{const{slides:r,activeIndex:o,rtlTranslate:a}=i,l=i.params.cardsEffect,{startTranslate:c,isTouched:h}=i.touchEventsData,d=a?-i.translate:i.translate;for(let u=0;u<r.length;u+=1){const f=r[u],m=f.progress,g=Math.min(Math.max(m,-4),4);let y=f.swiperSlideOffset;i.params.centeredSlides&&!i.params.cssMode&&(i.wrapperEl.style.transform=`translateX(${i.minTranslate()}px)`),i.params.centeredSlides&&i.params.cssMode&&(y-=r[0].swiperSlideOffset);let p=i.params.cssMode?-y-i.translate:-y,_=0;const v=-100*Math.abs(g);let x=1,b=-l.perSlideRotate*g,I=l.perSlideOffset-Math.abs(g)*.75;const P=i.virtual&&i.params.virtual.enabled?i.virtual.from+u:u,L=(P===o||P===o-1)&&g>0&&g<1&&(h||i.params.cssMode)&&d<c,O=(P===o||P===o+1)&&g<0&&g>-1&&(h||i.params.cssMode)&&d>c;if(L||O){const E=(1-Math.abs((Math.abs(g)-.5)/.5))**.5;b+=-28*g*E,x+=-.5*E,I+=96*E,_=`${-25*E*Math.abs(g)}%`}if(g<0?p=`calc(${p}px ${a?"-":"+"} (${I*Math.abs(g)}%))`:g>0?p=`calc(${p}px ${a?"-":"+"} (-${I*Math.abs(g)}%))`:p=`${p}px`,!i.isHorizontal()){const E=_;_=p,p=E}const k=g<0?`${1+(1-x)*g}`:`${1-(1-x)*g}`,T=`
        translate3d(${p}, ${_}, ${v}px)
        rotateZ(${l.rotate?a?-b:b:0}deg)
        scale(${k})
      `;if(l.slideShadows){let E=f.querySelector(".swiper-slide-shadow");E||(E=hi(l,f)),E&&(E.style.opacity=Math.min(Math.max((Math.abs(g)-.5)/.5,0),1))}f.style.zIndex=-Math.abs(Math.round(m))+r.length;const S=qi(l,f);S.style.transform=T}},setTransition:r=>{const o=i.slides.map(a=>Xt(a));o.forEach(a=>{a.style.transitionDuration=`${r}ms`,a.querySelectorAll(".swiper-slide-shadow").forEach(l=>{l.style.transitionDuration=`${r}ms`})}),Nn({swiper:i,duration:r,transformElements:o})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!i.params.cssMode})})}const Dh=[oh,ah,lh,ch,hh,dh,uh,fh,mh,gh,ph,_h,yh,vh,xh,Eh,wh,Lh,Mh,Rh,Ah,Ph,Oh];Re.use(Dh);/*!
  * PhotoSwipe Lightbox 5.4.4 - https://photoswipe.com
  * (c) 2024 Dmytro Semenov
  */function wi(i,e,t){const n=document.createElement(e);return i&&(n.className=i),t&&t.appendChild(n),n}function kh(i,e,t){let n=`translate3d(${i}px,0px,0)`;return t!==void 0&&(n+=` scale3d(${t},${t},1)`),n}function Rs(i,e,t){i.style.width=typeof e=="number"?`${e}px`:e,i.style.height=typeof t=="number"?`${t}px`:t}const Fe={IDLE:"idle",LOADING:"loading",LOADED:"loaded",ERROR:"error"};function Fh(i){return"button"in i&&i.button===1||i.ctrlKey||i.metaKey||i.altKey||i.shiftKey}function Li(i,e,t=document){let n=[];if(i instanceof Element)n=[i];else if(i instanceof NodeList||Array.isArray(i))n=Array.from(i);else{const s=typeof i=="string"?i:e;s&&(n=Array.from(t.querySelectorAll(s)))}return n}function zh(i){return typeof i=="function"&&i.prototype&&i.prototype.goTo}function Xr(){return!!(navigator.vendor&&navigator.vendor.match(/apple/i))}let Nh=class{constructor(e,t){this.type=e,this.defaultPrevented=!1,t&&Object.assign(this,t)}preventDefault(){this.defaultPrevented=!0}},Gh=class{constructor(){this._listeners={},this._filters={},this.pswp=void 0,this.options=void 0}addFilter(e,t,n=100){var s,r,o;this._filters[e]||(this._filters[e]=[]),(s=this._filters[e])===null||s===void 0||s.push({fn:t,priority:n}),(r=this._filters[e])===null||r===void 0||r.sort((a,l)=>a.priority-l.priority),(o=this.pswp)===null||o===void 0||o.addFilter(e,t,n)}removeFilter(e,t){this._filters[e]&&(this._filters[e]=this._filters[e].filter(n=>n.fn!==t)),this.pswp&&this.pswp.removeFilter(e,t)}applyFilters(e,...t){var n;return(n=this._filters[e])===null||n===void 0||n.forEach(s=>{t[0]=s.fn.apply(this,t)}),t[0]}on(e,t){var n,s;this._listeners[e]||(this._listeners[e]=[]),(n=this._listeners[e])===null||n===void 0||n.push(t),(s=this.pswp)===null||s===void 0||s.on(e,t)}off(e,t){var n;this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(s=>t!==s)),(n=this.pswp)===null||n===void 0||n.off(e,t)}dispatch(e,t){var n;if(this.pswp)return this.pswp.dispatch(e,t);const s=new Nh(e,t);return(n=this._listeners[e])===null||n===void 0||n.forEach(r=>{r.call(this,s)}),s}},Wh=class{constructor(e,t){if(this.element=wi("pswp__img pswp__img--placeholder",e?"img":"div",t),e){const n=this.element;n.decoding="async",n.alt="",n.src=e,n.setAttribute("role","presentation")}this.element.setAttribute("aria-hidden","true")}setDisplayedSize(e,t){this.element&&(this.element.tagName==="IMG"?(Rs(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=kh(0,0,e/250)):Rs(this.element,e,t))}destroy(){var e;(e=this.element)!==null&&e!==void 0&&e.parentNode&&this.element.remove(),this.element=null}},Xh=class{constructor(e,t,n){this.instance=t,this.data=e,this.index=n,this.element=void 0,this.placeholder=void 0,this.slide=void 0,this.displayedImageWidth=0,this.displayedImageHeight=0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.isDecoding=!1,this.state=Fe.IDLE,this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})}removePlaceholder(){this.placeholder&&!this.keepPlaceholder()&&setTimeout(()=>{this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0)},1e3)}load(e,t){if(this.slide&&this.usePlaceholder())if(this.placeholder){const n=this.placeholder.element;n&&!n.parentElement&&this.slide.container.prepend(n)}else{const n=this.instance.applyFilters("placeholderSrc",this.data.msrc&&this.slide.isFirstSlide?this.data.msrc:!1,this);this.placeholder=new Wh(n,this.slide.container)}this.element&&!t||this.instance.dispatch("contentLoad",{content:this,isLazy:e}).defaultPrevented||(this.isImageContent()?(this.element=wi("pswp__img","img"),this.displayedImageWidth&&this.loadImage(e)):(this.element=wi("pswp__content","div"),this.element.innerHTML=this.data.html||""),t&&this.slide&&this.slide.updateContentSize(!0))}loadImage(e){var t,n;if(!this.isImageContent()||!this.element||this.instance.dispatch("contentLoadImage",{content:this,isLazy:e}).defaultPrevented)return;const s=this.element;this.updateSrcsetSizes(),this.data.srcset&&(s.srcset=this.data.srcset),s.src=(t=this.data.src)!==null&&t!==void 0?t:"",s.alt=(n=this.data.alt)!==null&&n!==void 0?n:"",this.state=Fe.LOADING,s.complete?this.onLoaded():(s.onload=()=>{this.onLoaded()},s.onerror=()=>{this.onError()})}setSlide(e){this.slide=e,this.hasSlide=!0,this.instance=e.pswp}onLoaded(){this.state=Fe.LOADED,this.slide&&this.element&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.append(),this.slide.updateContentSize(!0)),(this.state===Fe.LOADED||this.state===Fe.ERROR)&&this.removePlaceholder())}onError(){this.state=Fe.ERROR,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}isLoading(){return this.instance.applyFilters("isContentLoading",this.state===Fe.LOADING,this)}isError(){return this.state===Fe.ERROR}isImageContent(){return this.type==="image"}setDisplayedSize(e,t){if(this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(e,t),!this.instance.dispatch("contentResize",{content:this,width:e,height:t}).defaultPrevented&&(Rs(this.element,e,t),this.isImageContent()&&!this.isError()))){const n=!this.displayedImageWidth&&e;this.displayedImageWidth=e,this.displayedImageHeight=t,n?this.loadImage(!1):this.updateSrcsetSizes(),this.slide&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:e,height:t,content:this})}}isZoomable(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==Fe.ERROR,this)}updateSrcsetSizes(){if(!this.isImageContent()||!this.element||!this.data.srcset)return;const e=this.element,t=this.instance.applyFilters("srcsetSizesWidth",this.displayedImageWidth,this);(!e.dataset.largestUsedSize||t>parseInt(e.dataset.largestUsedSize,10))&&(e.sizes=t+"px",e.dataset.largestUsedSize=String(t))}usePlaceholder(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}lazyLoad(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}keepPlaceholder(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}destroy(){this.hasSlide=!1,this.slide=void 0,!this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented&&(this.remove(),this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=void 0))}displayError(){if(this.slide){var e,t;let n=wi("pswp__error-msg","div");n.innerText=(e=(t=this.instance.options)===null||t===void 0?void 0:t.errorMsg)!==null&&e!==void 0?e:"",n=this.instance.applyFilters("contentErrorElement",n,this),this.element=wi("pswp__content pswp__error-msg-container","div"),this.element.appendChild(n),this.slide.container.innerText="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder()}}append(){if(this.isAttached||!this.element)return;if(this.isAttached=!0,this.state===Fe.ERROR){this.displayError();return}if(this.instance.dispatch("contentAppend",{content:this}).defaultPrevented)return;const e="decode"in this.element;this.isImageContent()?e&&this.slide&&(!this.slide.isActive||Xr())?(this.isDecoding=!0,this.element.decode().catch(()=>{}).finally(()=>{this.isDecoding=!1,this.appendImage()})):this.appendImage():this.slide&&!this.element.parentNode&&this.slide.container.appendChild(this.element)}activate(){this.instance.dispatch("contentActivate",{content:this}).defaultPrevented||!this.slide||(this.isImageContent()&&this.isDecoding&&!Xr()?this.appendImage():this.isError()&&this.load(!1,!0),this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","false"))}deactivate(){this.instance.dispatch("contentDeactivate",{content:this}),this.slide&&this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","true")}remove(){this.isAttached=!1,!this.instance.dispatch("contentRemove",{content:this}).defaultPrevented&&(this.element&&this.element.parentNode&&this.element.remove(),this.placeholder&&this.placeholder.element&&this.placeholder.element.remove())}appendImage(){this.isAttached&&(this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||(this.slide&&this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element),(this.state===Fe.LOADED||this.state===Fe.ERROR)&&this.removePlaceholder()))}};function Bh(i,e){if(i.getViewportSizeFn){const t=i.getViewportSizeFn(i,e);if(t)return t}return{x:document.documentElement.clientWidth,y:window.innerHeight}}function hn(i,e,t,n,s){let r=0;if(e.paddingFn)r=e.paddingFn(t,n,s)[i];else if(e.padding)r=e.padding[i];else{const o="padding"+i[0].toUpperCase()+i.slice(1);e[o]&&(r=e[o])}return Number(r)||0}function Yh(i,e,t,n){return{x:e.x-hn("left",i,e,t,n)-hn("right",i,e,t,n),y:e.y-hn("top",i,e,t,n)-hn("bottom",i,e,t,n)}}const Br=4e3;let $h=class{constructor(e,t,n,s){this.pswp=s,this.options=e,this.itemData=t,this.index=n,this.panAreaSize=null,this.elementSize=null,this.fit=1,this.fill=1,this.vFill=1,this.initial=1,this.secondary=1,this.max=1,this.min=1}update(e,t,n){const s={x:e,y:t};this.elementSize=s,this.panAreaSize=n;const r=n.x/s.x,o=n.y/s.y;this.fit=Math.min(1,r<o?r:o),this.fill=Math.min(1,r>o?r:o),this.vFill=Math.min(1,o),this.initial=this._getInitial(),this.secondary=this._getSecondary(),this.max=Math.max(this.initial,this.secondary,this._getMax()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}_parseZoomLevelOption(e){const t=e+"ZoomLevel",n=this.options[t];if(n)return typeof n=="function"?n(this):n==="fill"?this.fill:n==="fit"?this.fit:Number(n)}_getSecondary(){let e=this._parseZoomLevelOption("secondary");return e||(e=Math.min(1,this.fit*3),this.elementSize&&e*this.elementSize.x>Br&&(e=Br/this.elementSize.x),e)}_getInitial(){return this._parseZoomLevelOption("initial")||this.fit}_getMax(){return this._parseZoomLevelOption("max")||Math.max(1,this.fit*4)}};function Uo(i,e,t){const n=e.createContentFromData(i,t);let s;const{options:r}=e;if(r){s=new $h(r,i,-1);let o;e.pswp?o=e.pswp.viewportSize:o=Bh(r,e);const a=Yh(r,o,i,t);s.update(n.width,n.height,a)}return n.lazyLoad(),s&&n.setDisplayedSize(Math.ceil(n.width*s.initial),Math.ceil(n.height*s.initial)),n}function Hh(i,e){const t=e.getItemData(i);if(!e.dispatch("lazyLoadSlide",{index:i,itemData:t}).defaultPrevented)return Uo(t,e,i)}let Zh=class extends Gh{getNumItems(){var e;let t=0;const n=(e=this.options)===null||e===void 0?void 0:e.dataSource;n&&"length"in n?t=n.length:n&&"gallery"in n&&(n.items||(n.items=this._getGalleryDOMElements(n.gallery)),n.items&&(t=n.items.length));const s=this.dispatch("numItems",{dataSource:n,numItems:t});return this.applyFilters("numItems",s.numItems,n)}createContentFromData(e,t){return new Xh(e,this,t)}getItemData(e){var t;const n=(t=this.options)===null||t===void 0?void 0:t.dataSource;let s={};Array.isArray(n)?s=n[e]:n&&"gallery"in n&&(n.items||(n.items=this._getGalleryDOMElements(n.gallery)),s=n.items[e]);let r=s;r instanceof Element&&(r=this._domElementToItemData(r));const o=this.dispatch("itemData",{itemData:r||{},index:e});return this.applyFilters("itemData",o.itemData,e)}_getGalleryDOMElements(e){var t,n;return(t=this.options)!==null&&t!==void 0&&t.children||(n=this.options)!==null&&n!==void 0&&n.childSelector?Li(this.options.children,this.options.childSelector,e)||[]:[e]}_domElementToItemData(e){const t={element:e},n=e.tagName==="A"?e:e.querySelector("a");if(n){t.src=n.dataset.pswpSrc||n.href,n.dataset.pswpSrcset&&(t.srcset=n.dataset.pswpSrcset),t.width=n.dataset.pswpWidth?parseInt(n.dataset.pswpWidth,10):0,t.height=n.dataset.pswpHeight?parseInt(n.dataset.pswpHeight,10):0,t.w=t.width,t.h=t.height,n.dataset.pswpType&&(t.type=n.dataset.pswpType);const r=e.querySelector("img");if(r){var s;t.msrc=r.currentSrc||r.src,t.alt=(s=r.getAttribute("alt"))!==null&&s!==void 0?s:""}(n.dataset.pswpCropped||n.dataset.cropped)&&(t.thumbCropped=!0)}return this.applyFilters("domItemData",t,e,n)}lazyLoadData(e,t){return Uo(e,this,t)}};class Vh extends Zh{constructor(e){super(),this.options=e||{},this._uid=0,this.shouldOpen=!1,this._preloadedContent=void 0,this.onThumbnailsClick=this.onThumbnailsClick.bind(this)}init(){Li(this.options.gallery,this.options.gallerySelector).forEach(e=>{e.addEventListener("click",this.onThumbnailsClick,!1)})}onThumbnailsClick(e){if(Fh(e)||window.pswp)return;let t={x:e.clientX,y:e.clientY};!t.x&&!t.y&&(t=null);let n=this.getClickedIndex(e);n=this.applyFilters("clickedIndex",n,e,this);const s={gallery:e.currentTarget};n>=0&&(e.preventDefault(),this.loadAndOpen(n,s,t))}getClickedIndex(e){if(this.options.getClickedIndexFn)return this.options.getClickedIndexFn.call(this,e);const t=e.target,s=Li(this.options.children,this.options.childSelector,e.currentTarget).findIndex(r=>r===t||r.contains(t));return s!==-1?s:this.options.children||this.options.childSelector?-1:0}loadAndOpen(e,t,n){if(window.pswp||!this.options)return!1;if(!t&&this.options.gallery&&this.options.children){const s=Li(this.options.gallery);s[0]&&(t={gallery:s[0]})}return this.options.index=e,this.options.initialPointerPos=n,this.shouldOpen=!0,this.preload(e,t),!0}preload(e,t){const{options:n}=this;t&&(n.dataSource=t);const s=[],r=typeof n.pswpModule;if(zh(n.pswpModule))s.push(Promise.resolve(n.pswpModule));else{if(r==="string")throw new Error("pswpModule as string is no longer supported");if(r==="function")s.push(n.pswpModule());else throw new Error("pswpModule is not valid")}typeof n.openPromise=="function"&&s.push(n.openPromise()),n.preloadFirstSlide!==!1&&e>=0&&(this._preloadedContent=Hh(e,this));const o=++this._uid;Promise.all(s).then(a=>{if(this.shouldOpen){const l=a[0];this._openPhotoswipe(l,o)}})}_openPhotoswipe(e,t){if(t!==this._uid&&this.shouldOpen||(this.shouldOpen=!1,window.pswp))return;const n=typeof e=="object"?new e.default(this.options):new e(this.options);this.pswp=n,window.pswp=n,Object.keys(this._listeners).forEach(s=>{var r;(r=this._listeners[s])===null||r===void 0||r.forEach(o=>{n.on(s,o)})}),Object.keys(this._filters).forEach(s=>{var r;(r=this._filters[s])===null||r===void 0||r.forEach(o=>{n.addFilter(s,o.fn,o.priority)})}),this._preloadedContent&&(n.contentLoader.addToCache(this._preloadedContent),this._preloadedContent=void 0),n.on("destroy",()=>{this.pswp=void 0,delete window.pswp}),n.init()}destroy(){var e;(e=this.pswp)===null||e===void 0||e.destroy(),this.shouldOpen=!1,this._listeners={},Li(this.options.gallery,this.options.gallerySelector).forEach(t=>{t.removeEventListener("click",this.onThumbnailsClick,!1)})}}/*!
  * PhotoSwipe 5.4.4 - https://photoswipe.com
  * (c) 2024 Dmytro Semenov
  */function Pe(i,e,t){const n=document.createElement(e);return i&&(n.className=i),t&&t.appendChild(n),n}function he(i,e){return i.x=e.x,i.y=e.y,e.id!==void 0&&(i.id=e.id),i}function Ko(i){i.x=Math.round(i.x),i.y=Math.round(i.y)}function As(i,e){const t=Math.abs(i.x-e.x),n=Math.abs(i.y-e.y);return Math.sqrt(t*t+n*n)}function Oi(i,e){return i.x===e.x&&i.y===e.y}function Ui(i,e,t){return Math.min(Math.max(i,e),t)}function zi(i,e,t){let n=`translate3d(${i}px,${e||0}px,0)`;return t!==void 0&&(n+=` scale3d(${t},${t},1)`),n}function Pt(i,e,t,n){i.style.transform=zi(e,t,n)}const jh="cubic-bezier(.4,0,.22,1)";function Jo(i,e,t,n){i.style.transition=e?`${e} ${t}ms ${n||jh}`:"none"}function Ps(i,e,t){i.style.width=typeof e=="number"?`${e}px`:e,i.style.height=typeof t=="number"?`${t}px`:t}function qh(i){Jo(i)}function Uh(i){return"decode"in i?i.decode().catch(()=>{}):i.complete?Promise.resolve(i):new Promise((e,t)=>{i.onload=()=>e(i),i.onerror=t})}const ze={IDLE:"idle",LOADING:"loading",LOADED:"loaded",ERROR:"error"};function Kh(i){return"button"in i&&i.button===1||i.ctrlKey||i.metaKey||i.altKey||i.shiftKey}function Jh(i,e,t=document){let n=[];if(i instanceof Element)n=[i];else if(i instanceof NodeList||Array.isArray(i))n=Array.from(i);else{const s=typeof i=="string"?i:e;s&&(n=Array.from(t.querySelectorAll(s)))}return n}function Yr(){return!!(navigator.vendor&&navigator.vendor.match(/apple/i))}let Qo=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>{Qo=!0}}))}catch{}class Qh{constructor(){this._pool=[]}add(e,t,n,s){this._toggleListener(e,t,n,s)}remove(e,t,n,s){this._toggleListener(e,t,n,s,!0)}removeAll(){this._pool.forEach(e=>{this._toggleListener(e.target,e.type,e.listener,e.passive,!0,!0)}),this._pool=[]}_toggleListener(e,t,n,s,r,o){if(!e)return;const a=r?"removeEventListener":"addEventListener";t.split(" ").forEach(c=>{if(c){o||(r?this._pool=this._pool.filter(d=>d.type!==c||d.listener!==n||d.target!==e):this._pool.push({target:e,type:c,listener:n,passive:s}));const h=Qo?{passive:s||!1}:!1;e[a](c,n,h)}})}}function ea(i,e){if(i.getViewportSizeFn){const t=i.getViewportSizeFn(i,e);if(t)return t}return{x:document.documentElement.clientWidth,y:window.innerHeight}}function Mi(i,e,t,n,s){let r=0;if(e.paddingFn)r=e.paddingFn(t,n,s)[i];else if(e.padding)r=e.padding[i];else{const o="padding"+i[0].toUpperCase()+i.slice(1);e[o]&&(r=e[o])}return Number(r)||0}function ta(i,e,t,n){return{x:e.x-Mi("left",i,e,t,n)-Mi("right",i,e,t,n),y:e.y-Mi("top",i,e,t,n)-Mi("bottom",i,e,t,n)}}class ed{constructor(e){this.slide=e,this.currZoomLevel=1,this.center={x:0,y:0},this.max={x:0,y:0},this.min={x:0,y:0}}update(e){this.currZoomLevel=e,this.slide.width?(this._updateAxis("x"),this._updateAxis("y"),this.slide.pswp.dispatch("calcBounds",{slide:this.slide})):this.reset()}_updateAxis(e){const{pswp:t}=this.slide,n=this.slide[e==="x"?"width":"height"]*this.currZoomLevel,r=Mi(e==="x"?"left":"top",t.options,t.viewportSize,this.slide.data,this.slide.index),o=this.slide.panAreaSize[e];this.center[e]=Math.round((o-n)/2)+r,this.max[e]=n>o?Math.round(o-n)+r:this.center[e],this.min[e]=n>o?r:this.center[e]}reset(){this.center.x=0,this.center.y=0,this.max.x=0,this.max.y=0,this.min.x=0,this.min.y=0}correctPan(e,t){return Ui(t,this.max[e],this.min[e])}}const $r=4e3;class ia{constructor(e,t,n,s){this.pswp=s,this.options=e,this.itemData=t,this.index=n,this.panAreaSize=null,this.elementSize=null,this.fit=1,this.fill=1,this.vFill=1,this.initial=1,this.secondary=1,this.max=1,this.min=1}update(e,t,n){const s={x:e,y:t};this.elementSize=s,this.panAreaSize=n;const r=n.x/s.x,o=n.y/s.y;this.fit=Math.min(1,r<o?r:o),this.fill=Math.min(1,r>o?r:o),this.vFill=Math.min(1,o),this.initial=this._getInitial(),this.secondary=this._getSecondary(),this.max=Math.max(this.initial,this.secondary,this._getMax()),this.min=Math.min(this.fit,this.initial,this.secondary),this.pswp&&this.pswp.dispatch("zoomLevelsUpdate",{zoomLevels:this,slideData:this.itemData})}_parseZoomLevelOption(e){const t=e+"ZoomLevel",n=this.options[t];if(n)return typeof n=="function"?n(this):n==="fill"?this.fill:n==="fit"?this.fit:Number(n)}_getSecondary(){let e=this._parseZoomLevelOption("secondary");return e||(e=Math.min(1,this.fit*3),this.elementSize&&e*this.elementSize.x>$r&&(e=$r/this.elementSize.x),e)}_getInitial(){return this._parseZoomLevelOption("initial")||this.fit}_getMax(){return this._parseZoomLevelOption("max")||Math.max(1,this.fit*4)}}class td{constructor(e,t,n){this.data=e,this.index=t,this.pswp=n,this.isActive=t===n.currIndex,this.currentResolution=0,this.panAreaSize={x:0,y:0},this.pan={x:0,y:0},this.isFirstSlide=this.isActive&&!n.opener.isOpen,this.zoomLevels=new ia(n.options,e,t,n),this.pswp.dispatch("gettingData",{slide:this,data:this.data,index:t}),this.content=this.pswp.contentLoader.getContentBySlide(this),this.container=Pe("pswp__zoom-wrap","div"),this.holderElement=null,this.currZoomLevel=1,this.width=this.content.width,this.height=this.content.height,this.heavyAppended=!1,this.bounds=new ed(this),this.prevDisplayedWidth=-1,this.prevDisplayedHeight=-1,this.pswp.dispatch("slideInit",{slide:this})}setIsActive(e){e&&!this.isActive?this.activate():!e&&this.isActive&&this.deactivate()}append(e){this.holderElement=e,this.container.style.transformOrigin="0 0",this.data&&(this.calculateSize(),this.load(),this.updateContentSize(),this.appendHeavy(),this.holderElement.appendChild(this.container),this.zoomAndPanToInitial(),this.pswp.dispatch("firstZoomPan",{slide:this}),this.applyCurrentZoomPan(),this.pswp.dispatch("afterSetContent",{slide:this}),this.isActive&&this.activate())}load(){this.content.load(!1),this.pswp.dispatch("slideLoad",{slide:this})}appendHeavy(){const{pswp:e}=this;this.heavyAppended||!e.opener.isOpen||e.mainScroll.isShifted()||!this.isActive&&!1||this.pswp.dispatch("appendHeavy",{slide:this}).defaultPrevented||(this.heavyAppended=!0,this.content.append(),this.pswp.dispatch("appendHeavyContent",{slide:this}))}activate(){this.isActive=!0,this.appendHeavy(),this.content.activate(),this.pswp.dispatch("slideActivate",{slide:this})}deactivate(){this.isActive=!1,this.content.deactivate(),this.currZoomLevel!==this.zoomLevels.initial&&this.calculateSize(),this.currentResolution=0,this.zoomAndPanToInitial(),this.applyCurrentZoomPan(),this.updateContentSize(),this.pswp.dispatch("slideDeactivate",{slide:this})}destroy(){this.content.hasSlide=!1,this.content.remove(),this.container.remove(),this.pswp.dispatch("slideDestroy",{slide:this})}resize(){this.currZoomLevel===this.zoomLevels.initial||!this.isActive?(this.calculateSize(),this.currentResolution=0,this.zoomAndPanToInitial(),this.applyCurrentZoomPan(),this.updateContentSize()):(this.calculateSize(),this.bounds.update(this.currZoomLevel),this.panTo(this.pan.x,this.pan.y))}updateContentSize(e){const t=this.currentResolution||this.zoomLevels.initial;if(!t)return;const n=Math.round(this.width*t)||this.pswp.viewportSize.x,s=Math.round(this.height*t)||this.pswp.viewportSize.y;!this.sizeChanged(n,s)&&!e||this.content.setDisplayedSize(n,s)}sizeChanged(e,t){return e!==this.prevDisplayedWidth||t!==this.prevDisplayedHeight?(this.prevDisplayedWidth=e,this.prevDisplayedHeight=t,!0):!1}getPlaceholderElement(){var e;return(e=this.content.placeholder)===null||e===void 0?void 0:e.element}zoomTo(e,t,n,s){const{pswp:r}=this;if(!this.isZoomable()||r.mainScroll.isShifted())return;r.dispatch("beforeZoomTo",{destZoomLevel:e,centerPoint:t,transitionDuration:n}),r.animations.stopAllPan();const o=this.currZoomLevel;s||(e=Ui(e,this.zoomLevels.min,this.zoomLevels.max)),this.setZoomLevel(e),this.pan.x=this.calculateZoomToPanOffset("x",t,o),this.pan.y=this.calculateZoomToPanOffset("y",t,o),Ko(this.pan);const a=()=>{this._setResolution(e),this.applyCurrentZoomPan()};n?r.animations.startTransition({isPan:!0,name:"zoomTo",target:this.container,transform:this.getCurrentTransform(),onComplete:a,duration:n,easing:r.options.easing}):a()}toggleZoom(e){this.zoomTo(this.currZoomLevel===this.zoomLevels.initial?this.zoomLevels.secondary:this.zoomLevels.initial,e,this.pswp.options.zoomAnimationDuration)}setZoomLevel(e){this.currZoomLevel=e,this.bounds.update(this.currZoomLevel)}calculateZoomToPanOffset(e,t,n){if(this.bounds.max[e]-this.bounds.min[e]===0)return this.bounds.center[e];t||(t=this.pswp.getViewportCenterPoint()),n||(n=this.zoomLevels.initial);const r=this.currZoomLevel/n;return this.bounds.correctPan(e,(this.pan[e]-t[e])*r+t[e])}panTo(e,t){this.pan.x=this.bounds.correctPan("x",e),this.pan.y=this.bounds.correctPan("y",t),this.applyCurrentZoomPan()}isPannable(){return!!this.width&&this.currZoomLevel>this.zoomLevels.fit}isZoomable(){return!!this.width&&this.content.isZoomable()}applyCurrentZoomPan(){this._applyZoomTransform(this.pan.x,this.pan.y,this.currZoomLevel),this===this.pswp.currSlide&&this.pswp.dispatch("zoomPanUpdate",{slide:this})}zoomAndPanToInitial(){this.currZoomLevel=this.zoomLevels.initial,this.bounds.update(this.currZoomLevel),he(this.pan,this.bounds.center),this.pswp.dispatch("initialZoomPan",{slide:this})}_applyZoomTransform(e,t,n){n/=this.currentResolution||this.zoomLevels.initial,Pt(this.container,e,t,n)}calculateSize(){const{pswp:e}=this;he(this.panAreaSize,ta(e.options,e.viewportSize,this.data,this.index)),this.zoomLevels.update(this.width,this.height,this.panAreaSize),e.dispatch("calcSlideSize",{slide:this})}getCurrentTransform(){const e=this.currZoomLevel/(this.currentResolution||this.zoomLevels.initial);return zi(this.pan.x,this.pan.y,e)}_setResolution(e){e!==this.currentResolution&&(this.currentResolution=e,this.updateContentSize(),this.pswp.dispatch("resolutionChanged"))}}const id=.35,nd=.6,Hr=.4,Zr=.5;function sd(i,e){return i*e/(1-e)}class rd{constructor(e){this.gestures=e,this.pswp=e.pswp,this.startPan={x:0,y:0}}start(){this.pswp.currSlide&&he(this.startPan,this.pswp.currSlide.pan),this.pswp.animations.stopAll()}change(){const{p1:e,prevP1:t,dragAxis:n}=this.gestures,{currSlide:s}=this.pswp;if(n==="y"&&this.pswp.options.closeOnVerticalDrag&&s&&s.currZoomLevel<=s.zoomLevels.fit&&!this.gestures.isMultitouch){const r=s.pan.y+(e.y-t.y);if(!this.pswp.dispatch("verticalDrag",{panY:r}).defaultPrevented){this._setPanWithFriction("y",r,nd);const o=1-Math.abs(this._getVerticalDragRatio(s.pan.y));this.pswp.applyBgOpacity(o),s.applyCurrentZoomPan()}}else this._panOrMoveMainScroll("x")||(this._panOrMoveMainScroll("y"),s&&(Ko(s.pan),s.applyCurrentZoomPan()))}end(){const{velocity:e}=this.gestures,{mainScroll:t,currSlide:n}=this.pswp;let s=0;if(this.pswp.animations.stopAll(),t.isShifted()){const o=(t.x-t.getCurrSlideX())/this.pswp.viewportSize.x;e.x<-Zr&&o<0||e.x<.1&&o<-.5?(s=1,e.x=Math.min(e.x,0)):(e.x>Zr&&o>0||e.x>-.1&&o>.5)&&(s=-1,e.x=Math.max(e.x,0)),t.moveIndexBy(s,!0,e.x)}n&&n.currZoomLevel>n.zoomLevels.max||this.gestures.isMultitouch?this.gestures.zoomLevels.correctZoomPan(!0):(this._finishPanGestureForAxis("x"),this._finishPanGestureForAxis("y"))}_finishPanGestureForAxis(e){const{velocity:t}=this.gestures,{currSlide:n}=this.pswp;if(!n)return;const{pan:s,bounds:r}=n,o=s[e],a=this.pswp.bgOpacity<1&&e==="y",c=o+sd(t[e],.995);if(a){const m=this._getVerticalDragRatio(o),g=this._getVerticalDragRatio(c);if(m<0&&g<-Hr||m>0&&g>Hr){this.pswp.close();return}}const h=r.correctPan(e,c);if(o===h)return;const d=h===c?1:.82,u=this.pswp.bgOpacity,f=h-o;this.pswp.animations.startSpring({name:"panGesture"+e,isPan:!0,start:o,end:h,velocity:t[e],dampingRatio:d,onUpdate:m=>{if(a&&this.pswp.bgOpacity<1){const g=1-(h-m)/f;this.pswp.applyBgOpacity(Ui(u+(1-u)*g,0,1))}s[e]=Math.floor(m),n.applyCurrentZoomPan()}})}_panOrMoveMainScroll(e){const{p1:t,dragAxis:n,prevP1:s,isMultitouch:r}=this.gestures,{currSlide:o,mainScroll:a}=this.pswp,l=t[e]-s[e],c=a.x+l;if(!l||!o)return!1;if(e==="x"&&!o.isPannable()&&!r)return a.moveTo(c,!0),!0;const{bounds:h}=o,d=o.pan[e]+l;if(this.pswp.options.allowPanToNext&&n==="x"&&e==="x"&&!r){const u=a.getCurrSlideX(),f=a.x-u,m=l>0,g=!m;if(d>h.min[e]&&m){if(h.min[e]<=this.startPan[e])return a.moveTo(c,!0),!0;this._setPanWithFriction(e,d)}else if(d<h.max[e]&&g){if(this.startPan[e]<=h.max[e])return a.moveTo(c,!0),!0;this._setPanWithFriction(e,d)}else if(f!==0){if(f>0)return a.moveTo(Math.max(c,u),!0),!0;if(f<0)return a.moveTo(Math.min(c,u),!0),!0}else this._setPanWithFriction(e,d)}else e==="y"?!a.isShifted()&&h.min.y!==h.max.y&&this._setPanWithFriction(e,d):this._setPanWithFriction(e,d);return!1}_getVerticalDragRatio(e){var t,n;return(e-((t=(n=this.pswp.currSlide)===null||n===void 0?void 0:n.bounds.center.y)!==null&&t!==void 0?t:0))/(this.pswp.viewportSize.y/3)}_setPanWithFriction(e,t,n){const{currSlide:s}=this.pswp;if(!s)return;const{pan:r,bounds:o}=s;if(o.correctPan(e,t)!==t||n){const l=Math.round(t-r[e]);r[e]+=l*(n||id)}else r[e]=t}}const od=.05,ad=.15;function Vr(i,e,t){return i.x=(e.x+t.x)/2,i.y=(e.y+t.y)/2,i}class ld{constructor(e){this.gestures=e,this._startPan={x:0,y:0},this._startZoomPoint={x:0,y:0},this._zoomPoint={x:0,y:0},this._wasOverFitZoomLevel=!1,this._startZoomLevel=1}start(){const{currSlide:e}=this.gestures.pswp;e&&(this._startZoomLevel=e.currZoomLevel,he(this._startPan,e.pan)),this.gestures.pswp.animations.stopAllPan(),this._wasOverFitZoomLevel=!1}change(){const{p1:e,startP1:t,p2:n,startP2:s,pswp:r}=this.gestures,{currSlide:o}=r;if(!o)return;const a=o.zoomLevels.min,l=o.zoomLevels.max;if(!o.isZoomable()||r.mainScroll.isShifted())return;Vr(this._startZoomPoint,t,s),Vr(this._zoomPoint,e,n);let c=1/As(t,s)*As(e,n)*this._startZoomLevel;if(c>o.zoomLevels.initial+o.zoomLevels.initial/15&&(this._wasOverFitZoomLevel=!0),c<a)if(r.options.pinchToClose&&!this._wasOverFitZoomLevel&&this._startZoomLevel<=o.zoomLevels.initial){const h=1-(a-c)/(a/1.2);r.dispatch("pinchClose",{bgOpacity:h}).defaultPrevented||r.applyBgOpacity(h)}else c=a-(a-c)*ad;else c>l&&(c=l+(c-l)*od);o.pan.x=this._calculatePanForZoomLevel("x",c),o.pan.y=this._calculatePanForZoomLevel("y",c),o.setZoomLevel(c),o.applyCurrentZoomPan()}end(){const{pswp:e}=this.gestures,{currSlide:t}=e;(!t||t.currZoomLevel<t.zoomLevels.initial)&&!this._wasOverFitZoomLevel&&e.options.pinchToClose?e.close():this.correctZoomPan()}_calculatePanForZoomLevel(e,t){const n=t/this._startZoomLevel;return this._zoomPoint[e]-(this._startZoomPoint[e]-this._startPan[e])*n}correctZoomPan(e){const{pswp:t}=this.gestures,{currSlide:n}=t;if(!(n!=null&&n.isZoomable()))return;this._zoomPoint.x===0&&(e=!0);const s=n.currZoomLevel;let r,o=!0;s<n.zoomLevels.initial?r=n.zoomLevels.initial:s>n.zoomLevels.max?r=n.zoomLevels.max:(o=!1,r=s);const a=t.bgOpacity,l=t.bgOpacity<1,c=he({x:0,y:0},n.pan);let h=he({x:0,y:0},c);e&&(this._zoomPoint.x=0,this._zoomPoint.y=0,this._startZoomPoint.x=0,this._startZoomPoint.y=0,this._startZoomLevel=s,he(this._startPan,c)),o&&(h={x:this._calculatePanForZoomLevel("x",r),y:this._calculatePanForZoomLevel("y",r)}),n.setZoomLevel(r),h={x:n.bounds.correctPan("x",h.x),y:n.bounds.correctPan("y",h.y)},n.setZoomLevel(s);const d=!Oi(h,c);if(!d&&!o&&!l){n._setResolution(r),n.applyCurrentZoomPan();return}t.animations.stopAllPan(),t.animations.startSpring({isPan:!0,start:0,end:1e3,velocity:0,dampingRatio:1,naturalFrequency:40,onUpdate:u=>{if(u/=1e3,d||o){if(d&&(n.pan.x=c.x+(h.x-c.x)*u,n.pan.y=c.y+(h.y-c.y)*u),o){const f=s+(r-s)*u;n.setZoomLevel(f)}n.applyCurrentZoomPan()}l&&t.bgOpacity<1&&t.applyBgOpacity(Ui(a+(1-a)*u,0,1))},onComplete:()=>{n._setResolution(r),n.applyCurrentZoomPan()}})}}function jr(i){return!!i.target.closest(".pswp__container")}class cd{constructor(e){this.gestures=e}click(e,t){const n=t.target.classList,s=n.contains("pswp__img"),r=n.contains("pswp__item")||n.contains("pswp__zoom-wrap");s?this._doClickOrTapAction("imageClick",e,t):r&&this._doClickOrTapAction("bgClick",e,t)}tap(e,t){jr(t)&&this._doClickOrTapAction("tap",e,t)}doubleTap(e,t){jr(t)&&this._doClickOrTapAction("doubleTap",e,t)}_doClickOrTapAction(e,t,n){var s;const{pswp:r}=this.gestures,{currSlide:o}=r,a=e+"Action",l=r.options[a];if(!r.dispatch(a,{point:t,originalEvent:n}).defaultPrevented){if(typeof l=="function"){l.call(r,t,n);return}switch(l){case"close":case"next":r[l]();break;case"zoom":o==null||o.toggleZoom(t);break;case"zoom-or-close":o!=null&&o.isZoomable()&&o.zoomLevels.secondary!==o.zoomLevels.initial?o.toggleZoom(t):r.options.clickToCloseNonZoomable&&r.close();break;case"toggle-controls":(s=this.gestures.pswp.element)===null||s===void 0||s.classList.toggle("pswp--ui-visible");break}}}}const hd=10,dd=300,ud=25;class fd{constructor(e){this.pswp=e,this.dragAxis=null,this.p1={x:0,y:0},this.p2={x:0,y:0},this.prevP1={x:0,y:0},this.prevP2={x:0,y:0},this.startP1={x:0,y:0},this.startP2={x:0,y:0},this.velocity={x:0,y:0},this._lastStartP1={x:0,y:0},this._intervalP1={x:0,y:0},this._numActivePoints=0,this._ongoingPointers=[],this._touchEventEnabled="ontouchstart"in window,this._pointerEventEnabled=!!window.PointerEvent,this.supportsTouch=this._touchEventEnabled||this._pointerEventEnabled&&navigator.maxTouchPoints>1,this._numActivePoints=0,this._intervalTime=0,this._velocityCalculated=!1,this.isMultitouch=!1,this.isDragging=!1,this.isZooming=!1,this.raf=null,this._tapTimer=null,this.supportsTouch||(e.options.allowPanToNext=!1),this.drag=new rd(this),this.zoomLevels=new ld(this),this.tapHandler=new cd(this),e.on("bindEvents",()=>{e.events.add(e.scrollWrap,"click",this._onClick.bind(this)),this._pointerEventEnabled?this._bindEvents("pointer","down","up","cancel"):this._touchEventEnabled?(this._bindEvents("touch","start","end","cancel"),e.scrollWrap&&(e.scrollWrap.ontouchmove=()=>{},e.scrollWrap.ontouchend=()=>{})):this._bindEvents("mouse","down","up")})}_bindEvents(e,t,n,s){const{pswp:r}=this,{events:o}=r,a=s?e+s:"";o.add(r.scrollWrap,e+t,this.onPointerDown.bind(this)),o.add(window,e+"move",this.onPointerMove.bind(this)),o.add(window,e+n,this.onPointerUp.bind(this)),a&&o.add(r.scrollWrap,a,this.onPointerUp.bind(this))}onPointerDown(e){const t=e.type==="mousedown"||e.pointerType==="mouse";if(t&&e.button>0)return;const{pswp:n}=this;if(!n.opener.isOpen){e.preventDefault();return}n.dispatch("pointerDown",{originalEvent:e}).defaultPrevented||(t&&(n.mouseDetected(),this._preventPointerEventBehaviour(e,"down")),n.animations.stopAll(),this._updatePoints(e,"down"),this._numActivePoints===1&&(this.dragAxis=null,he(this.startP1,this.p1)),this._numActivePoints>1?(this._clearTapTimer(),this.isMultitouch=!0):this.isMultitouch=!1)}onPointerMove(e){this._preventPointerEventBehaviour(e,"move"),this._numActivePoints&&(this._updatePoints(e,"move"),!this.pswp.dispatch("pointerMove",{originalEvent:e}).defaultPrevented&&(this._numActivePoints===1&&!this.isDragging?(this.dragAxis||this._calculateDragDirection(),this.dragAxis&&!this.isDragging&&(this.isZooming&&(this.isZooming=!1,this.zoomLevels.end()),this.isDragging=!0,this._clearTapTimer(),this._updateStartPoints(),this._intervalTime=Date.now(),this._velocityCalculated=!1,he(this._intervalP1,this.p1),this.velocity.x=0,this.velocity.y=0,this.drag.start(),this._rafStopLoop(),this._rafRenderLoop())):this._numActivePoints>1&&!this.isZooming&&(this._finishDrag(),this.isZooming=!0,this._updateStartPoints(),this.zoomLevels.start(),this._rafStopLoop(),this._rafRenderLoop())))}_finishDrag(){this.isDragging&&(this.isDragging=!1,this._velocityCalculated||this._updateVelocity(!0),this.drag.end(),this.dragAxis=null)}onPointerUp(e){this._numActivePoints&&(this._updatePoints(e,"up"),!this.pswp.dispatch("pointerUp",{originalEvent:e}).defaultPrevented&&(this._numActivePoints===0&&(this._rafStopLoop(),this.isDragging?this._finishDrag():!this.isZooming&&!this.isMultitouch&&this._finishTap(e)),this._numActivePoints<2&&this.isZooming&&(this.isZooming=!1,this.zoomLevels.end(),this._numActivePoints===1&&(this.dragAxis=null,this._updateStartPoints()))))}_rafRenderLoop(){(this.isDragging||this.isZooming)&&(this._updateVelocity(),this.isDragging?Oi(this.p1,this.prevP1)||this.drag.change():(!Oi(this.p1,this.prevP1)||!Oi(this.p2,this.prevP2))&&this.zoomLevels.change(),this._updatePrevPoints(),this.raf=requestAnimationFrame(this._rafRenderLoop.bind(this)))}_updateVelocity(e){const t=Date.now(),n=t-this._intervalTime;n<50&&!e||(this.velocity.x=this._getVelocity("x",n),this.velocity.y=this._getVelocity("y",n),this._intervalTime=t,he(this._intervalP1,this.p1),this._velocityCalculated=!0)}_finishTap(e){const{mainScroll:t}=this.pswp;if(t.isShifted()){t.moveIndexBy(0,!0);return}if(e.type.indexOf("cancel")>0)return;if(e.type==="mouseup"||e.pointerType==="mouse"){this.tapHandler.click(this.startP1,e);return}const n=this.pswp.options.doubleTapAction?dd:0;this._tapTimer?(this._clearTapTimer(),As(this._lastStartP1,this.startP1)<ud&&this.tapHandler.doubleTap(this.startP1,e)):(he(this._lastStartP1,this.startP1),this._tapTimer=setTimeout(()=>{this.tapHandler.tap(this.startP1,e),this._clearTapTimer()},n))}_clearTapTimer(){this._tapTimer&&(clearTimeout(this._tapTimer),this._tapTimer=null)}_getVelocity(e,t){const n=this.p1[e]-this._intervalP1[e];return Math.abs(n)>1&&t>5?n/t:0}_rafStopLoop(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null)}_preventPointerEventBehaviour(e,t){this.pswp.applyFilters("preventPointerEvent",!0,e,t)&&e.preventDefault()}_updatePoints(e,t){if(this._pointerEventEnabled){const n=e,s=this._ongoingPointers.findIndex(r=>r.id===n.pointerId);t==="up"&&s>-1?this._ongoingPointers.splice(s,1):t==="down"&&s===-1?this._ongoingPointers.push(this._convertEventPosToPoint(n,{x:0,y:0})):s>-1&&this._convertEventPosToPoint(n,this._ongoingPointers[s]),this._numActivePoints=this._ongoingPointers.length,this._numActivePoints>0&&he(this.p1,this._ongoingPointers[0]),this._numActivePoints>1&&he(this.p2,this._ongoingPointers[1])}else{const n=e;this._numActivePoints=0,n.type.indexOf("touch")>-1?n.touches&&n.touches.length>0&&(this._convertEventPosToPoint(n.touches[0],this.p1),this._numActivePoints++,n.touches.length>1&&(this._convertEventPosToPoint(n.touches[1],this.p2),this._numActivePoints++)):(this._convertEventPosToPoint(e,this.p1),t==="up"?this._numActivePoints=0:this._numActivePoints++)}}_updatePrevPoints(){he(this.prevP1,this.p1),he(this.prevP2,this.p2)}_updateStartPoints(){he(this.startP1,this.p1),he(this.startP2,this.p2),this._updatePrevPoints()}_calculateDragDirection(){if(this.pswp.mainScroll.isShifted())this.dragAxis="x";else{const e=Math.abs(this.p1.x-this.startP1.x)-Math.abs(this.p1.y-this.startP1.y);if(e!==0){const t=e>0?"x":"y";Math.abs(this.p1[t]-this.startP1[t])>=hd&&(this.dragAxis=t)}}}_convertEventPosToPoint(e,t){return t.x=e.pageX-this.pswp.offset.x,t.y=e.pageY-this.pswp.offset.y,"pointerId"in e?t.id=e.pointerId:e.identifier!==void 0&&(t.id=e.identifier),t}_onClick(e){this.pswp.mainScroll.isShifted()&&(e.preventDefault(),e.stopPropagation())}}const md=.35;class gd{constructor(e){this.pswp=e,this.x=0,this.slideWidth=0,this._currPositionIndex=0,this._prevPositionIndex=0,this._containerShiftIndex=-1,this.itemHolders=[]}resize(e){const{pswp:t}=this,n=Math.round(t.viewportSize.x+t.viewportSize.x*t.options.spacing),s=n!==this.slideWidth;s&&(this.slideWidth=n,this.moveTo(this.getCurrSlideX())),this.itemHolders.forEach((r,o)=>{s&&Pt(r.el,(o+this._containerShiftIndex)*this.slideWidth),e&&r.slide&&r.slide.resize()})}resetPosition(){this._currPositionIndex=0,this._prevPositionIndex=0,this.slideWidth=0,this._containerShiftIndex=-1}appendHolders(){this.itemHolders=[];for(let e=0;e<3;e++){const t=Pe("pswp__item","div",this.pswp.container);t.setAttribute("role","group"),t.setAttribute("aria-roledescription","slide"),t.setAttribute("aria-hidden","true"),t.style.display=e===1?"block":"none",this.itemHolders.push({el:t})}}canBeSwiped(){return this.pswp.getNumItems()>1}moveIndexBy(e,t,n){const{pswp:s}=this;let r=s.potentialIndex+e;const o=s.getNumItems();if(s.canLoop()){r=s.getLoopedIndex(r);const l=(e+o)%o;l<=o/2?e=l:e=l-o}else r<0?r=0:r>=o&&(r=o-1),e=r-s.potentialIndex;s.potentialIndex=r,this._currPositionIndex-=e,s.animations.stopMainScroll();const a=this.getCurrSlideX();if(!t)this.moveTo(a),this.updateCurrItem();else{s.animations.startSpring({isMainScroll:!0,start:this.x,end:a,velocity:n||0,naturalFrequency:30,dampingRatio:1,onUpdate:c=>{this.moveTo(c)},onComplete:()=>{this.updateCurrItem(),s.appendHeavy()}});let l=s.potentialIndex-s.currIndex;if(s.canLoop()){const c=(l+o)%o;c<=o/2?l=c:l=c-o}Math.abs(l)>1&&this.updateCurrItem()}return!!e}getCurrSlideX(){return this.slideWidth*this._currPositionIndex}isShifted(){return this.x!==this.getCurrSlideX()}updateCurrItem(){var e;const{pswp:t}=this,n=this._prevPositionIndex-this._currPositionIndex;if(!n)return;this._prevPositionIndex=this._currPositionIndex,t.currIndex=t.potentialIndex;let s=Math.abs(n),r;s>=3&&(this._containerShiftIndex+=n+(n>0?-3:3),s=3,this.itemHolders.forEach(o=>{var a;(a=o.slide)===null||a===void 0||a.destroy(),o.slide=void 0}));for(let o=0;o<s;o++)n>0?(r=this.itemHolders.shift(),r&&(this.itemHolders[2]=r,this._containerShiftIndex++,Pt(r.el,(this._containerShiftIndex+2)*this.slideWidth),t.setContent(r,t.currIndex-s+o+2))):(r=this.itemHolders.pop(),r&&(this.itemHolders.unshift(r),this._containerShiftIndex--,Pt(r.el,this._containerShiftIndex*this.slideWidth),t.setContent(r,t.currIndex+s-o-2)));Math.abs(this._containerShiftIndex)>50&&!this.isShifted()&&(this.resetPosition(),this.resize()),t.animations.stopAllPan(),this.itemHolders.forEach((o,a)=>{o.slide&&o.slide.setIsActive(a===1)}),t.currSlide=(e=this.itemHolders[1])===null||e===void 0?void 0:e.slide,t.contentLoader.updateLazy(n),t.currSlide&&t.currSlide.applyCurrentZoomPan(),t.dispatch("change")}moveTo(e,t){if(!this.pswp.canLoop()&&t){let n=(this.slideWidth*this._currPositionIndex-e)/this.slideWidth;n+=this.pswp.currIndex;const s=Math.round(e-this.x);(n<0&&s>0||n>=this.pswp.getNumItems()-1&&s<0)&&(e=this.x+s*md)}this.x=e,this.pswp.container&&Pt(this.pswp.container,e),this.pswp.dispatch("moveMainScroll",{x:e,dragging:t??!1})}}const pd={Escape:27,z:90,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Tab:9},Lt=(i,e)=>e?i:pd[i];class _d{constructor(e){this.pswp=e,this._wasFocused=!1,e.on("bindEvents",()=>{e.options.trapFocus&&(e.options.initialPointerPos||this._focusRoot(),e.events.add(document,"focusin",this._onFocusIn.bind(this))),e.events.add(document,"keydown",this._onKeyDown.bind(this))});const t=document.activeElement;e.on("destroy",()=>{e.options.returnFocus&&t&&this._wasFocused&&t.focus()})}_focusRoot(){!this._wasFocused&&this.pswp.element&&(this.pswp.element.focus(),this._wasFocused=!0)}_onKeyDown(e){const{pswp:t}=this;if(t.dispatch("keydown",{originalEvent:e}).defaultPrevented||Kh(e))return;let n,s,r=!1;const o="key"in e;switch(o?e.key:e.keyCode){case Lt("Escape",o):t.options.escKey&&(n="close");break;case Lt("z",o):n="toggleZoom";break;case Lt("ArrowLeft",o):s="x";break;case Lt("ArrowUp",o):s="y";break;case Lt("ArrowRight",o):s="x",r=!0;break;case Lt("ArrowDown",o):r=!0,s="y";break;case Lt("Tab",o):this._focusRoot();break}if(s){e.preventDefault();const{currSlide:a}=t;t.options.arrowKeys&&s==="x"&&t.getNumItems()>1?n=r?"next":"prev":a&&a.currZoomLevel>a.zoomLevels.fit&&(a.pan[s]+=r?-80:80,a.panTo(a.pan.x,a.pan.y))}n&&(e.preventDefault(),t[n]())}_onFocusIn(e){const{template:t}=this.pswp;t&&document!==e.target&&t!==e.target&&!t.contains(e.target)&&t.focus()}}const yd="cubic-bezier(.4,0,.22,1)";class vd{constructor(e){var t;this.props=e;const{target:n,onComplete:s,transform:r,onFinish:o=()=>{},duration:a=333,easing:l=yd}=e;this.onFinish=o;const c=r?"transform":"opacity",h=(t=e[c])!==null&&t!==void 0?t:"";this._target=n,this._onComplete=s,this._finished=!1,this._onTransitionEnd=this._onTransitionEnd.bind(this),this._helperTimeout=setTimeout(()=>{Jo(n,c,a,l),this._helperTimeout=setTimeout(()=>{n.addEventListener("transitionend",this._onTransitionEnd,!1),n.addEventListener("transitioncancel",this._onTransitionEnd,!1),this._helperTimeout=setTimeout(()=>{this._finalizeAnimation()},a+500),n.style[c]=h},30)},0)}_onTransitionEnd(e){e.target===this._target&&this._finalizeAnimation()}_finalizeAnimation(){this._finished||(this._finished=!0,this.onFinish(),this._onComplete&&this._onComplete())}destroy(){this._helperTimeout&&clearTimeout(this._helperTimeout),qh(this._target),this._target.removeEventListener("transitionend",this._onTransitionEnd,!1),this._target.removeEventListener("transitioncancel",this._onTransitionEnd,!1),this._finished||this._finalizeAnimation()}}const xd=12,Ed=.75;class Sd{constructor(e,t,n){this.velocity=e*1e3,this._dampingRatio=t||Ed,this._naturalFrequency=n||xd,this._dampedFrequency=this._naturalFrequency,this._dampingRatio<1&&(this._dampedFrequency*=Math.sqrt(1-this._dampingRatio*this._dampingRatio))}easeFrame(e,t){let n=0,s;t/=1e3;const r=Math.E**(-this._dampingRatio*this._naturalFrequency*t);if(this._dampingRatio===1)s=this.velocity+this._naturalFrequency*e,n=(e+s*t)*r,this.velocity=n*-this._naturalFrequency+s*r;else if(this._dampingRatio<1){s=1/this._dampedFrequency*(this._dampingRatio*this._naturalFrequency*e+this.velocity);const o=Math.cos(this._dampedFrequency*t),a=Math.sin(this._dampedFrequency*t);n=r*(e*o+s*a),this.velocity=n*-this._naturalFrequency*this._dampingRatio+r*(-this._dampedFrequency*e*a+this._dampedFrequency*s*o)}return n}}class bd{constructor(e){this.props=e,this._raf=0;const{start:t,end:n,velocity:s,onUpdate:r,onComplete:o,onFinish:a=()=>{},dampingRatio:l,naturalFrequency:c}=e;this.onFinish=a;const h=new Sd(s,l,c);let d=Date.now(),u=t-n;const f=()=>{this._raf&&(u=h.easeFrame(u,Date.now()-d),Math.abs(u)<1&&Math.abs(h.velocity)<50?(r(n),o&&o(),this.onFinish()):(d=Date.now(),r(u+n),this._raf=requestAnimationFrame(f)))};this._raf=requestAnimationFrame(f)}destroy(){this._raf>=0&&cancelAnimationFrame(this._raf),this._raf=0}}class Td{constructor(){this.activeAnimations=[]}startSpring(e){this._start(e,!0)}startTransition(e){this._start(e)}_start(e,t){const n=t?new bd(e):new vd(e);return this.activeAnimations.push(n),n.onFinish=()=>this.stop(n),n}stop(e){e.destroy();const t=this.activeAnimations.indexOf(e);t>-1&&this.activeAnimations.splice(t,1)}stopAll(){this.activeAnimations.forEach(e=>{e.destroy()}),this.activeAnimations=[]}stopAllPan(){this.activeAnimations=this.activeAnimations.filter(e=>e.props.isPan?(e.destroy(),!1):!0)}stopMainScroll(){this.activeAnimations=this.activeAnimations.filter(e=>e.props.isMainScroll?(e.destroy(),!1):!0)}isPanRunning(){return this.activeAnimations.some(e=>e.props.isPan)}}class Cd{constructor(e){this.pswp=e,e.events.add(e.element,"wheel",this._onWheel.bind(this))}_onWheel(e){e.preventDefault();const{currSlide:t}=this.pswp;let{deltaX:n,deltaY:s}=e;if(t&&!this.pswp.dispatch("wheel",{originalEvent:e}).defaultPrevented)if(e.ctrlKey||this.pswp.options.wheelToZoom){if(t.isZoomable()){let r=-s;e.deltaMode===1?r*=.05:r*=e.deltaMode?1:.002,r=2**r;const o=t.currZoomLevel*r;t.zoomTo(o,{x:e.clientX,y:e.clientY})}}else t.isPannable()&&(e.deltaMode===1&&(n*=18,s*=18),t.panTo(t.pan.x-n,t.pan.y-s))}}function Id(i){if(typeof i=="string")return i;if(!i||!i.isCustomSVG)return"";const e=i;let t='<svg aria-hidden="true" class="pswp__icn" viewBox="0 0 %d %d" width="%d" height="%d">';return t=t.split("%d").join(e.size||32),e.outlineID&&(t+='<use class="pswp__icn-shadow" xlink:href="#'+e.outlineID+'"/>'),t+=e.inner,t+="</svg>",t}class wd{constructor(e,t){var n;const s=t.name||t.className;let r=t.html;if(e.options[s]===!1)return;typeof e.options[s+"SVG"]=="string"&&(r=e.options[s+"SVG"]),e.dispatch("uiElementCreate",{data:t});let o="";t.isButton?(o+="pswp__button ",o+=t.className||`pswp__button--${t.name}`):o+=t.className||`pswp__${t.name}`;let a=t.isButton?t.tagName||"button":t.tagName||"div";a=a.toLowerCase();const l=Pe(o,a);if(t.isButton){a==="button"&&(l.type="button");let{title:d}=t;const{ariaLabel:u}=t;typeof e.options[s+"Title"]=="string"&&(d=e.options[s+"Title"]),d&&(l.title=d);const f=u||d;f&&l.setAttribute("aria-label",f)}l.innerHTML=Id(r),t.onInit&&t.onInit(l,e),t.onClick&&(l.onclick=d=>{typeof t.onClick=="string"?e[t.onClick]():typeof t.onClick=="function"&&t.onClick(d,l,e)});const c=t.appendTo||"bar";let h=e.element;c==="bar"?(e.topBar||(e.topBar=Pe("pswp__top-bar pswp__hide-on-close","div",e.scrollWrap)),h=e.topBar):(l.classList.add("pswp__hide-on-close"),c==="wrapper"&&(h=e.scrollWrap)),(n=h)===null||n===void 0||n.appendChild(e.applyFilters("uiElement",l,t))}}function na(i,e,t){i.classList.add("pswp__button--arrow"),i.setAttribute("aria-controls","pswp__items"),e.on("change",()=>{e.options.loop||(t?i.disabled=!(e.currIndex<e.getNumItems()-1):i.disabled=!(e.currIndex>0))})}const Ld={name:"arrowPrev",className:"pswp__button--arrow--prev",title:"Previous",order:10,isButton:!0,appendTo:"wrapper",html:{isCustomSVG:!0,size:60,inner:'<path d="M29 43l-3 3-16-16 16-16 3 3-13 13 13 13z" id="pswp__icn-arrow"/>',outlineID:"pswp__icn-arrow"},onClick:"prev",onInit:na},Md={name:"arrowNext",className:"pswp__button--arrow--next",title:"Next",order:11,isButton:!0,appendTo:"wrapper",html:{isCustomSVG:!0,size:60,inner:'<use xlink:href="#pswp__icn-arrow"/>',outlineID:"pswp__icn-arrow"},onClick:"next",onInit:(i,e)=>{na(i,e,!0)}},Rd={name:"close",title:"Close",order:20,isButton:!0,html:{isCustomSVG:!0,inner:'<path d="M24 10l-2-2-6 6-6-6-2 2 6 6-6 6 2 2 6-6 6 6 2-2-6-6z" id="pswp__icn-close"/>',outlineID:"pswp__icn-close"},onClick:"close"},Ad={name:"zoom",title:"Zoom",order:10,isButton:!0,html:{isCustomSVG:!0,inner:'<path d="M17.426 19.926a6 6 0 1 1 1.5-1.5L23 22.5 21.5 24l-4.074-4.074z" id="pswp__icn-zoom"/><path fill="currentColor" class="pswp__zoom-icn-bar-h" d="M11 16v-2h6v2z"/><path fill="currentColor" class="pswp__zoom-icn-bar-v" d="M13 12h2v6h-2z"/>',outlineID:"pswp__icn-zoom"},onClick:"toggleZoom"},Pd={name:"preloader",appendTo:"bar",order:7,html:{isCustomSVG:!0,inner:'<path fill-rule="evenodd" clip-rule="evenodd" d="M21.2 16a5.2 5.2 0 1 1-5.2-5.2V8a8 8 0 1 0 8 8h-2.8Z" id="pswp__icn-loading"/>',outlineID:"pswp__icn-loading"},onInit:(i,e)=>{let t,n=null;const s=(a,l)=>{i.classList.toggle("pswp__preloader--"+a,l)},r=a=>{t!==a&&(t=a,s("active",a))},o=()=>{var a;if(!((a=e.currSlide)!==null&&a!==void 0&&a.content.isLoading())){r(!1),n&&(clearTimeout(n),n=null);return}n||(n=setTimeout(()=>{var l;r(!!(!((l=e.currSlide)===null||l===void 0)&&l.content.isLoading())),n=null},e.options.preloaderDelay))};e.on("change",o),e.on("loadComplete",a=>{e.currSlide===a.slide&&o()}),e.ui&&(e.ui.updatePreloaderVisibility=o)}},Od={name:"counter",order:5,onInit:(i,e)=>{e.on("change",()=>{i.innerText=e.currIndex+1+e.options.indexIndicatorSep+e.getNumItems()})}};function qr(i,e){i.classList.toggle("pswp--zoomed-in",e)}class Dd{constructor(e){this.pswp=e,this.isRegistered=!1,this.uiElementsData=[],this.items=[],this.updatePreloaderVisibility=()=>{},this._lastUpdatedZoomLevel=void 0}init(){const{pswp:e}=this;this.isRegistered=!1,this.uiElementsData=[Rd,Ld,Md,Ad,Pd,Od],e.dispatch("uiRegister"),this.uiElementsData.sort((t,n)=>(t.order||0)-(n.order||0)),this.items=[],this.isRegistered=!0,this.uiElementsData.forEach(t=>{this.registerElement(t)}),e.on("change",()=>{var t;(t=e.element)===null||t===void 0||t.classList.toggle("pswp--one-slide",e.getNumItems()===1)}),e.on("zoomPanUpdate",()=>this._onZoomPanUpdate())}registerElement(e){this.isRegistered?this.items.push(new wd(this.pswp,e)):this.uiElementsData.push(e)}_onZoomPanUpdate(){const{template:e,currSlide:t,options:n}=this.pswp;if(this.pswp.opener.isClosing||!e||!t)return;let{currZoomLevel:s}=t;if(this.pswp.opener.isOpen||(s=t.zoomLevels.initial),s===this._lastUpdatedZoomLevel)return;this._lastUpdatedZoomLevel=s;const r=t.zoomLevels.initial-t.zoomLevels.secondary;if(Math.abs(r)<.01||!t.isZoomable()){qr(e,!1),e.classList.remove("pswp--zoom-allowed");return}e.classList.add("pswp--zoom-allowed");const o=s===t.zoomLevels.initial?t.zoomLevels.secondary:t.zoomLevels.initial;qr(e,o<=s),(n.imageClickAction==="zoom"||n.imageClickAction==="zoom-or-close")&&e.classList.add("pswp--click-to-zoom")}}function kd(i){const e=i.getBoundingClientRect();return{x:e.left,y:e.top,w:e.width}}function Fd(i,e,t){const n=i.getBoundingClientRect(),s=n.width/e,r=n.height/t,o=s>r?s:r,a=(n.width-e*o)/2,l=(n.height-t*o)/2,c={x:n.left+a,y:n.top+l,w:e*o};return c.innerRect={w:n.width,h:n.height,x:a,y:l},c}function zd(i,e,t){const n=t.dispatch("thumbBounds",{index:i,itemData:e,instance:t});if(n.thumbBounds)return n.thumbBounds;const{element:s}=e;let r,o;if(s&&t.options.thumbSelector!==!1){const a=t.options.thumbSelector||"img";o=s.matches(a)?s:s.querySelector(a)}return o=t.applyFilters("thumbEl",o,e,i),o&&(e.thumbCropped?r=Fd(o,e.width||e.w||0,e.height||e.h||0):r=kd(o)),t.applyFilters("thumbBounds",r,e,i)}class Nd{constructor(e,t){this.type=e,this.defaultPrevented=!1,t&&Object.assign(this,t)}preventDefault(){this.defaultPrevented=!0}}class Gd{constructor(){this._listeners={},this._filters={},this.pswp=void 0,this.options=void 0}addFilter(e,t,n=100){var s,r,o;this._filters[e]||(this._filters[e]=[]),(s=this._filters[e])===null||s===void 0||s.push({fn:t,priority:n}),(r=this._filters[e])===null||r===void 0||r.sort((a,l)=>a.priority-l.priority),(o=this.pswp)===null||o===void 0||o.addFilter(e,t,n)}removeFilter(e,t){this._filters[e]&&(this._filters[e]=this._filters[e].filter(n=>n.fn!==t)),this.pswp&&this.pswp.removeFilter(e,t)}applyFilters(e,...t){var n;return(n=this._filters[e])===null||n===void 0||n.forEach(s=>{t[0]=s.fn.apply(this,t)}),t[0]}on(e,t){var n,s;this._listeners[e]||(this._listeners[e]=[]),(n=this._listeners[e])===null||n===void 0||n.push(t),(s=this.pswp)===null||s===void 0||s.on(e,t)}off(e,t){var n;this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(s=>t!==s)),(n=this.pswp)===null||n===void 0||n.off(e,t)}dispatch(e,t){var n;if(this.pswp)return this.pswp.dispatch(e,t);const s=new Nd(e,t);return(n=this._listeners[e])===null||n===void 0||n.forEach(r=>{r.call(this,s)}),s}}class Wd{constructor(e,t){if(this.element=Pe("pswp__img pswp__img--placeholder",e?"img":"div",t),e){const n=this.element;n.decoding="async",n.alt="",n.src=e,n.setAttribute("role","presentation")}this.element.setAttribute("aria-hidden","true")}setDisplayedSize(e,t){this.element&&(this.element.tagName==="IMG"?(Ps(this.element,250,"auto"),this.element.style.transformOrigin="0 0",this.element.style.transform=zi(0,0,e/250)):Ps(this.element,e,t))}destroy(){var e;(e=this.element)!==null&&e!==void 0&&e.parentNode&&this.element.remove(),this.element=null}}class Xd{constructor(e,t,n){this.instance=t,this.data=e,this.index=n,this.element=void 0,this.placeholder=void 0,this.slide=void 0,this.displayedImageWidth=0,this.displayedImageHeight=0,this.width=Number(this.data.w)||Number(this.data.width)||0,this.height=Number(this.data.h)||Number(this.data.height)||0,this.isAttached=!1,this.hasSlide=!1,this.isDecoding=!1,this.state=ze.IDLE,this.data.type?this.type=this.data.type:this.data.src?this.type="image":this.type="html",this.instance.dispatch("contentInit",{content:this})}removePlaceholder(){this.placeholder&&!this.keepPlaceholder()&&setTimeout(()=>{this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0)},1e3)}load(e,t){if(this.slide&&this.usePlaceholder())if(this.placeholder){const n=this.placeholder.element;n&&!n.parentElement&&this.slide.container.prepend(n)}else{const n=this.instance.applyFilters("placeholderSrc",this.data.msrc&&this.slide.isFirstSlide?this.data.msrc:!1,this);this.placeholder=new Wd(n,this.slide.container)}this.element&&!t||this.instance.dispatch("contentLoad",{content:this,isLazy:e}).defaultPrevented||(this.isImageContent()?(this.element=Pe("pswp__img","img"),this.displayedImageWidth&&this.loadImage(e)):(this.element=Pe("pswp__content","div"),this.element.innerHTML=this.data.html||""),t&&this.slide&&this.slide.updateContentSize(!0))}loadImage(e){var t,n;if(!this.isImageContent()||!this.element||this.instance.dispatch("contentLoadImage",{content:this,isLazy:e}).defaultPrevented)return;const s=this.element;this.updateSrcsetSizes(),this.data.srcset&&(s.srcset=this.data.srcset),s.src=(t=this.data.src)!==null&&t!==void 0?t:"",s.alt=(n=this.data.alt)!==null&&n!==void 0?n:"",this.state=ze.LOADING,s.complete?this.onLoaded():(s.onload=()=>{this.onLoaded()},s.onerror=()=>{this.onError()})}setSlide(e){this.slide=e,this.hasSlide=!0,this.instance=e.pswp}onLoaded(){this.state=ze.LOADED,this.slide&&this.element&&(this.instance.dispatch("loadComplete",{slide:this.slide,content:this}),this.slide.isActive&&this.slide.heavyAppended&&!this.element.parentNode&&(this.append(),this.slide.updateContentSize(!0)),(this.state===ze.LOADED||this.state===ze.ERROR)&&this.removePlaceholder())}onError(){this.state=ze.ERROR,this.slide&&(this.displayError(),this.instance.dispatch("loadComplete",{slide:this.slide,isError:!0,content:this}),this.instance.dispatch("loadError",{slide:this.slide,content:this}))}isLoading(){return this.instance.applyFilters("isContentLoading",this.state===ze.LOADING,this)}isError(){return this.state===ze.ERROR}isImageContent(){return this.type==="image"}setDisplayedSize(e,t){if(this.element&&(this.placeholder&&this.placeholder.setDisplayedSize(e,t),!this.instance.dispatch("contentResize",{content:this,width:e,height:t}).defaultPrevented&&(Ps(this.element,e,t),this.isImageContent()&&!this.isError()))){const n=!this.displayedImageWidth&&e;this.displayedImageWidth=e,this.displayedImageHeight=t,n?this.loadImage(!1):this.updateSrcsetSizes(),this.slide&&this.instance.dispatch("imageSizeChange",{slide:this.slide,width:e,height:t,content:this})}}isZoomable(){return this.instance.applyFilters("isContentZoomable",this.isImageContent()&&this.state!==ze.ERROR,this)}updateSrcsetSizes(){if(!this.isImageContent()||!this.element||!this.data.srcset)return;const e=this.element,t=this.instance.applyFilters("srcsetSizesWidth",this.displayedImageWidth,this);(!e.dataset.largestUsedSize||t>parseInt(e.dataset.largestUsedSize,10))&&(e.sizes=t+"px",e.dataset.largestUsedSize=String(t))}usePlaceholder(){return this.instance.applyFilters("useContentPlaceholder",this.isImageContent(),this)}lazyLoad(){this.instance.dispatch("contentLazyLoad",{content:this}).defaultPrevented||this.load(!0)}keepPlaceholder(){return this.instance.applyFilters("isKeepingPlaceholder",this.isLoading(),this)}destroy(){this.hasSlide=!1,this.slide=void 0,!this.instance.dispatch("contentDestroy",{content:this}).defaultPrevented&&(this.remove(),this.placeholder&&(this.placeholder.destroy(),this.placeholder=void 0),this.isImageContent()&&this.element&&(this.element.onload=null,this.element.onerror=null,this.element=void 0))}displayError(){if(this.slide){var e,t;let n=Pe("pswp__error-msg","div");n.innerText=(e=(t=this.instance.options)===null||t===void 0?void 0:t.errorMsg)!==null&&e!==void 0?e:"",n=this.instance.applyFilters("contentErrorElement",n,this),this.element=Pe("pswp__content pswp__error-msg-container","div"),this.element.appendChild(n),this.slide.container.innerText="",this.slide.container.appendChild(this.element),this.slide.updateContentSize(!0),this.removePlaceholder()}}append(){if(this.isAttached||!this.element)return;if(this.isAttached=!0,this.state===ze.ERROR){this.displayError();return}if(this.instance.dispatch("contentAppend",{content:this}).defaultPrevented)return;const e="decode"in this.element;this.isImageContent()?e&&this.slide&&(!this.slide.isActive||Yr())?(this.isDecoding=!0,this.element.decode().catch(()=>{}).finally(()=>{this.isDecoding=!1,this.appendImage()})):this.appendImage():this.slide&&!this.element.parentNode&&this.slide.container.appendChild(this.element)}activate(){this.instance.dispatch("contentActivate",{content:this}).defaultPrevented||!this.slide||(this.isImageContent()&&this.isDecoding&&!Yr()?this.appendImage():this.isError()&&this.load(!1,!0),this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","false"))}deactivate(){this.instance.dispatch("contentDeactivate",{content:this}),this.slide&&this.slide.holderElement&&this.slide.holderElement.setAttribute("aria-hidden","true")}remove(){this.isAttached=!1,!this.instance.dispatch("contentRemove",{content:this}).defaultPrevented&&(this.element&&this.element.parentNode&&this.element.remove(),this.placeholder&&this.placeholder.element&&this.placeholder.element.remove())}appendImage(){this.isAttached&&(this.instance.dispatch("contentAppendImage",{content:this}).defaultPrevented||(this.slide&&this.element&&!this.element.parentNode&&this.slide.container.appendChild(this.element),(this.state===ze.LOADED||this.state===ze.ERROR)&&this.removePlaceholder()))}}const Bd=5;function sa(i,e,t){const n=e.createContentFromData(i,t);let s;const{options:r}=e;if(r){s=new ia(r,i,-1);let o;e.pswp?o=e.pswp.viewportSize:o=ea(r,e);const a=ta(r,o,i,t);s.update(n.width,n.height,a)}return n.lazyLoad(),s&&n.setDisplayedSize(Math.ceil(n.width*s.initial),Math.ceil(n.height*s.initial)),n}function Yd(i,e){const t=e.getItemData(i);if(!e.dispatch("lazyLoadSlide",{index:i,itemData:t}).defaultPrevented)return sa(t,e,i)}class $d{constructor(e){this.pswp=e,this.limit=Math.max(e.options.preload[0]+e.options.preload[1]+1,Bd),this._cachedItems=[]}updateLazy(e){const{pswp:t}=this;if(t.dispatch("lazyLoad").defaultPrevented)return;const{preload:n}=t.options,s=e===void 0?!0:e>=0;let r;for(r=0;r<=n[1];r++)this.loadSlideByIndex(t.currIndex+(s?r:-r));for(r=1;r<=n[0];r++)this.loadSlideByIndex(t.currIndex+(s?-r:r))}loadSlideByIndex(e){const t=this.pswp.getLoopedIndex(e);let n=this.getContentByIndex(t);n||(n=Yd(t,this.pswp),n&&this.addToCache(n))}getContentBySlide(e){let t=this.getContentByIndex(e.index);return t||(t=this.pswp.createContentFromData(e.data,e.index),this.addToCache(t)),t.setSlide(e),t}addToCache(e){if(this.removeByIndex(e.index),this._cachedItems.push(e),this._cachedItems.length>this.limit){const t=this._cachedItems.findIndex(n=>!n.isAttached&&!n.hasSlide);t!==-1&&this._cachedItems.splice(t,1)[0].destroy()}}removeByIndex(e){const t=this._cachedItems.findIndex(n=>n.index===e);t!==-1&&this._cachedItems.splice(t,1)}getContentByIndex(e){return this._cachedItems.find(t=>t.index===e)}destroy(){this._cachedItems.forEach(e=>e.destroy()),this._cachedItems=[]}}class Hd extends Gd{getNumItems(){var e;let t=0;const n=(e=this.options)===null||e===void 0?void 0:e.dataSource;n&&"length"in n?t=n.length:n&&"gallery"in n&&(n.items||(n.items=this._getGalleryDOMElements(n.gallery)),n.items&&(t=n.items.length));const s=this.dispatch("numItems",{dataSource:n,numItems:t});return this.applyFilters("numItems",s.numItems,n)}createContentFromData(e,t){return new Xd(e,this,t)}getItemData(e){var t;const n=(t=this.options)===null||t===void 0?void 0:t.dataSource;let s={};Array.isArray(n)?s=n[e]:n&&"gallery"in n&&(n.items||(n.items=this._getGalleryDOMElements(n.gallery)),s=n.items[e]);let r=s;r instanceof Element&&(r=this._domElementToItemData(r));const o=this.dispatch("itemData",{itemData:r||{},index:e});return this.applyFilters("itemData",o.itemData,e)}_getGalleryDOMElements(e){var t,n;return(t=this.options)!==null&&t!==void 0&&t.children||(n=this.options)!==null&&n!==void 0&&n.childSelector?Jh(this.options.children,this.options.childSelector,e)||[]:[e]}_domElementToItemData(e){const t={element:e},n=e.tagName==="A"?e:e.querySelector("a");if(n){t.src=n.dataset.pswpSrc||n.href,n.dataset.pswpSrcset&&(t.srcset=n.dataset.pswpSrcset),t.width=n.dataset.pswpWidth?parseInt(n.dataset.pswpWidth,10):0,t.height=n.dataset.pswpHeight?parseInt(n.dataset.pswpHeight,10):0,t.w=t.width,t.h=t.height,n.dataset.pswpType&&(t.type=n.dataset.pswpType);const r=e.querySelector("img");if(r){var s;t.msrc=r.currentSrc||r.src,t.alt=(s=r.getAttribute("alt"))!==null&&s!==void 0?s:""}(n.dataset.pswpCropped||n.dataset.cropped)&&(t.thumbCropped=!0)}return this.applyFilters("domItemData",t,e,n)}lazyLoadData(e,t){return sa(e,this,t)}}const Si=.003;class Zd{constructor(e){this.pswp=e,this.isClosed=!0,this.isOpen=!1,this.isClosing=!1,this.isOpening=!1,this._duration=void 0,this._useAnimation=!1,this._croppedZoom=!1,this._animateRootOpacity=!1,this._animateBgOpacity=!1,this._placeholder=void 0,this._opacityElement=void 0,this._cropContainer1=void 0,this._cropContainer2=void 0,this._thumbBounds=void 0,this._prepareOpen=this._prepareOpen.bind(this),e.on("firstZoomPan",this._prepareOpen)}open(){this._prepareOpen(),this._start()}close(){if(this.isClosed||this.isClosing||this.isOpening)return;const e=this.pswp.currSlide;this.isOpen=!1,this.isOpening=!1,this.isClosing=!0,this._duration=this.pswp.options.hideAnimationDuration,e&&e.currZoomLevel*e.width>=this.pswp.options.maxWidthToAnimate&&(this._duration=0),this._applyStartProps(),setTimeout(()=>{this._start()},this._croppedZoom?30:0)}_prepareOpen(){if(this.pswp.off("firstZoomPan",this._prepareOpen),!this.isOpening){const e=this.pswp.currSlide;this.isOpening=!0,this.isClosing=!1,this._duration=this.pswp.options.showAnimationDuration,e&&e.zoomLevels.initial*e.width>=this.pswp.options.maxWidthToAnimate&&(this._duration=0),this._applyStartProps()}}_applyStartProps(){const{pswp:e}=this,t=this.pswp.currSlide,{options:n}=e;if(n.showHideAnimationType==="fade"?(n.showHideOpacity=!0,this._thumbBounds=void 0):n.showHideAnimationType==="none"?(n.showHideOpacity=!1,this._duration=0,this._thumbBounds=void 0):this.isOpening&&e._initialThumbBounds?this._thumbBounds=e._initialThumbBounds:this._thumbBounds=this.pswp.getThumbBounds(),this._placeholder=t==null?void 0:t.getPlaceholderElement(),e.animations.stopAll(),this._useAnimation=!!(this._duration&&this._duration>50),this._animateZoom=!!this._thumbBounds&&(t==null?void 0:t.content.usePlaceholder())&&(!this.isClosing||!e.mainScroll.isShifted()),!this._animateZoom)this._animateRootOpacity=!0,this.isOpening&&t&&(t.zoomAndPanToInitial(),t.applyCurrentZoomPan());else{var s;this._animateRootOpacity=(s=n.showHideOpacity)!==null&&s!==void 0?s:!1}if(this._animateBgOpacity=!this._animateRootOpacity&&this.pswp.options.bgOpacity>Si,this._opacityElement=this._animateRootOpacity?e.element:e.bg,!this._useAnimation){this._duration=0,this._animateZoom=!1,this._animateBgOpacity=!1,this._animateRootOpacity=!0,this.isOpening&&(e.element&&(e.element.style.opacity=String(Si)),e.applyBgOpacity(1));return}if(this._animateZoom&&this._thumbBounds&&this._thumbBounds.innerRect){var r;this._croppedZoom=!0,this._cropContainer1=this.pswp.container,this._cropContainer2=(r=this.pswp.currSlide)===null||r===void 0?void 0:r.holderElement,e.container&&(e.container.style.overflow="hidden",e.container.style.width=e.viewportSize.x+"px")}else this._croppedZoom=!1;this.isOpening?(this._animateRootOpacity?(e.element&&(e.element.style.opacity=String(Si)),e.applyBgOpacity(1)):(this._animateBgOpacity&&e.bg&&(e.bg.style.opacity=String(Si)),e.element&&(e.element.style.opacity="1")),this._animateZoom&&(this._setClosedStateZoomPan(),this._placeholder&&(this._placeholder.style.willChange="transform",this._placeholder.style.opacity=String(Si)))):this.isClosing&&(e.mainScroll.itemHolders[0]&&(e.mainScroll.itemHolders[0].el.style.display="none"),e.mainScroll.itemHolders[2]&&(e.mainScroll.itemHolders[2].el.style.display="none"),this._croppedZoom&&e.mainScroll.x!==0&&(e.mainScroll.resetPosition(),e.mainScroll.resize()))}_start(){this.isOpening&&this._useAnimation&&this._placeholder&&this._placeholder.tagName==="IMG"?new Promise(e=>{let t=!1,n=!0;Uh(this._placeholder).finally(()=>{t=!0,n||e(!0)}),setTimeout(()=>{n=!1,t&&e(!0)},50),setTimeout(e,250)}).finally(()=>this._initiate()):this._initiate()}_initiate(){var e,t;(e=this.pswp.element)===null||e===void 0||e.style.setProperty("--pswp-transition-duration",this._duration+"ms"),this.pswp.dispatch(this.isOpening?"openingAnimationStart":"closingAnimationStart"),this.pswp.dispatch("initialZoom"+(this.isOpening?"In":"Out")),(t=this.pswp.element)===null||t===void 0||t.classList.toggle("pswp--ui-visible",this.isOpening),this.isOpening?(this._placeholder&&(this._placeholder.style.opacity="1"),this._animateToOpenState()):this.isClosing&&this._animateToClosedState(),this._useAnimation||this._onAnimationComplete()}_onAnimationComplete(){const{pswp:e}=this;if(this.isOpen=this.isOpening,this.isClosed=this.isClosing,this.isOpening=!1,this.isClosing=!1,e.dispatch(this.isOpen?"openingAnimationEnd":"closingAnimationEnd"),e.dispatch("initialZoom"+(this.isOpen?"InEnd":"OutEnd")),this.isClosed)e.destroy();else if(this.isOpen){var t;this._animateZoom&&e.container&&(e.container.style.overflow="visible",e.container.style.width="100%"),(t=e.currSlide)===null||t===void 0||t.applyCurrentZoomPan()}}_animateToOpenState(){const{pswp:e}=this;this._animateZoom&&(this._croppedZoom&&this._cropContainer1&&this._cropContainer2&&(this._animateTo(this._cropContainer1,"transform","translate3d(0,0,0)"),this._animateTo(this._cropContainer2,"transform","none")),e.currSlide&&(e.currSlide.zoomAndPanToInitial(),this._animateTo(e.currSlide.container,"transform",e.currSlide.getCurrentTransform()))),this._animateBgOpacity&&e.bg&&this._animateTo(e.bg,"opacity",String(e.options.bgOpacity)),this._animateRootOpacity&&e.element&&this._animateTo(e.element,"opacity","1")}_animateToClosedState(){const{pswp:e}=this;this._animateZoom&&this._setClosedStateZoomPan(!0),this._animateBgOpacity&&e.bgOpacity>.01&&e.bg&&this._animateTo(e.bg,"opacity","0"),this._animateRootOpacity&&e.element&&this._animateTo(e.element,"opacity","0")}_setClosedStateZoomPan(e){if(!this._thumbBounds)return;const{pswp:t}=this,{innerRect:n}=this._thumbBounds,{currSlide:s,viewportSize:r}=t;if(this._croppedZoom&&n&&this._cropContainer1&&this._cropContainer2){const o=-r.x+(this._thumbBounds.x-n.x)+n.w,a=-r.y+(this._thumbBounds.y-n.y)+n.h,l=r.x-n.w,c=r.y-n.h;e?(this._animateTo(this._cropContainer1,"transform",zi(o,a)),this._animateTo(this._cropContainer2,"transform",zi(l,c))):(Pt(this._cropContainer1,o,a),Pt(this._cropContainer2,l,c))}s&&(he(s.pan,n||this._thumbBounds),s.currZoomLevel=this._thumbBounds.w/s.width,e?this._animateTo(s.container,"transform",s.getCurrentTransform()):s.applyCurrentZoomPan())}_animateTo(e,t,n){if(!this._duration){e.style[t]=n;return}const{animations:s}=this.pswp,r={duration:this._duration,easing:this.pswp.options.easing,onComplete:()=>{s.activeAnimations.length||this._onAnimationComplete()},target:e};r[t]=n,s.startTransition(r)}}const Vd={allowPanToNext:!0,spacing:.1,loop:!0,pinchToClose:!0,closeOnVerticalDrag:!0,hideAnimationDuration:333,showAnimationDuration:333,zoomAnimationDuration:333,escKey:!0,arrowKeys:!0,trapFocus:!0,returnFocus:!0,maxWidthToAnimate:4e3,clickToCloseNonZoomable:!0,imageClickAction:"zoom-or-close",bgClickAction:"close",tapAction:"toggle-controls",doubleTapAction:"zoom",indexIndicatorSep:" / ",preloaderDelay:2e3,bgOpacity:.8,index:0,errorMsg:"The image cannot be loaded",preload:[1,2],easing:"cubic-bezier(.4,0,.22,1)"};class jd extends Hd{constructor(e){super(),this.options=this._prepareOptions(e||{}),this.offset={x:0,y:0},this._prevViewportSize={x:0,y:0},this.viewportSize={x:0,y:0},this.bgOpacity=1,this.currIndex=0,this.potentialIndex=0,this.isOpen=!1,this.isDestroying=!1,this.hasMouse=!1,this._initialItemData={},this._initialThumbBounds=void 0,this.topBar=void 0,this.element=void 0,this.template=void 0,this.container=void 0,this.scrollWrap=void 0,this.currSlide=void 0,this.events=new Qh,this.animations=new Td,this.mainScroll=new gd(this),this.gestures=new fd(this),this.opener=new Zd(this),this.keyboard=new _d(this),this.contentLoader=new $d(this)}init(){if(this.isOpen||this.isDestroying)return!1;this.isOpen=!0,this.dispatch("init"),this.dispatch("beforeOpen"),this._createMainStructure();let e="pswp--open";return this.gestures.supportsTouch&&(e+=" pswp--touch"),this.options.mainClass&&(e+=" "+this.options.mainClass),this.element&&(this.element.className+=" "+e),this.currIndex=this.options.index||0,this.potentialIndex=this.currIndex,this.dispatch("firstUpdate"),this.scrollWheel=new Cd(this),(Number.isNaN(this.currIndex)||this.currIndex<0||this.currIndex>=this.getNumItems())&&(this.currIndex=0),this.gestures.supportsTouch||this.mouseDetected(),this.updateSize(),this.offset.y=window.pageYOffset,this._initialItemData=this.getItemData(this.currIndex),this.dispatch("gettingData",{index:this.currIndex,data:this._initialItemData,slide:void 0}),this._initialThumbBounds=this.getThumbBounds(),this.dispatch("initialLayout"),this.on("openingAnimationEnd",()=>{const{itemHolders:t}=this.mainScroll;t[0]&&(t[0].el.style.display="block",this.setContent(t[0],this.currIndex-1)),t[2]&&(t[2].el.style.display="block",this.setContent(t[2],this.currIndex+1)),this.appendHeavy(),this.contentLoader.updateLazy(),this.events.add(window,"resize",this._handlePageResize.bind(this)),this.events.add(window,"scroll",this._updatePageScrollOffset.bind(this)),this.dispatch("bindEvents")}),this.mainScroll.itemHolders[1]&&this.setContent(this.mainScroll.itemHolders[1],this.currIndex),this.dispatch("change"),this.opener.open(),this.dispatch("afterInit"),!0}getLoopedIndex(e){const t=this.getNumItems();return this.options.loop&&(e>t-1&&(e-=t),e<0&&(e+=t)),Ui(e,0,t-1)}appendHeavy(){this.mainScroll.itemHolders.forEach(e=>{var t;(t=e.slide)===null||t===void 0||t.appendHeavy()})}goTo(e){this.mainScroll.moveIndexBy(this.getLoopedIndex(e)-this.potentialIndex)}next(){this.goTo(this.potentialIndex+1)}prev(){this.goTo(this.potentialIndex-1)}zoomTo(...e){var t;(t=this.currSlide)===null||t===void 0||t.zoomTo(...e)}toggleZoom(){var e;(e=this.currSlide)===null||e===void 0||e.toggleZoom()}close(){!this.opener.isOpen||this.isDestroying||(this.isDestroying=!0,this.dispatch("close"),this.events.removeAll(),this.opener.close())}destroy(){var e;if(!this.isDestroying){this.options.showHideAnimationType="none",this.close();return}this.dispatch("destroy"),this._listeners={},this.scrollWrap&&(this.scrollWrap.ontouchmove=null,this.scrollWrap.ontouchend=null),(e=this.element)===null||e===void 0||e.remove(),this.mainScroll.itemHolders.forEach(t=>{var n;(n=t.slide)===null||n===void 0||n.destroy()}),this.contentLoader.destroy(),this.events.removeAll()}refreshSlideContent(e){this.contentLoader.removeByIndex(e),this.mainScroll.itemHolders.forEach((t,n)=>{var s,r;let o=((s=(r=this.currSlide)===null||r===void 0?void 0:r.index)!==null&&s!==void 0?s:0)-1+n;if(this.canLoop()&&(o=this.getLoopedIndex(o)),o===e&&(this.setContent(t,e,!0),n===1)){var a;this.currSlide=t.slide,(a=t.slide)===null||a===void 0||a.setIsActive(!0)}}),this.dispatch("change")}setContent(e,t,n){if(this.canLoop()&&(t=this.getLoopedIndex(t)),e.slide){if(e.slide.index===t&&!n)return;e.slide.destroy(),e.slide=void 0}if(!this.canLoop()&&(t<0||t>=this.getNumItems()))return;const s=this.getItemData(t);e.slide=new td(s,t,this),t===this.currIndex&&(this.currSlide=e.slide),e.slide.append(e.el)}getViewportCenterPoint(){return{x:this.viewportSize.x/2,y:this.viewportSize.y/2}}updateSize(e){if(this.isDestroying)return;const t=ea(this.options,this);!e&&Oi(t,this._prevViewportSize)||(he(this._prevViewportSize,t),this.dispatch("beforeResize"),he(this.viewportSize,this._prevViewportSize),this._updatePageScrollOffset(),this.dispatch("viewportSize"),this.mainScroll.resize(this.opener.isOpen),!this.hasMouse&&window.matchMedia("(any-hover: hover)").matches&&this.mouseDetected(),this.dispatch("resize"))}applyBgOpacity(e){this.bgOpacity=Math.max(e,0),this.bg&&(this.bg.style.opacity=String(this.bgOpacity*this.options.bgOpacity))}mouseDetected(){if(!this.hasMouse){var e;this.hasMouse=!0,(e=this.element)===null||e===void 0||e.classList.add("pswp--has_mouse")}}_handlePageResize(){this.updateSize(),/iPhone|iPad|iPod/i.test(window.navigator.userAgent)&&setTimeout(()=>{this.updateSize()},500)}_updatePageScrollOffset(){this.setScrollOffset(0,window.pageYOffset)}setScrollOffset(e,t){this.offset.x=e,this.offset.y=t,this.dispatch("updateScrollOffset")}_createMainStructure(){this.element=Pe("pswp","div"),this.element.setAttribute("tabindex","-1"),this.element.setAttribute("role","dialog"),this.template=this.element,this.bg=Pe("pswp__bg","div",this.element),this.scrollWrap=Pe("pswp__scroll-wrap","section",this.element),this.container=Pe("pswp__container","div",this.scrollWrap),this.scrollWrap.setAttribute("aria-roledescription","carousel"),this.container.setAttribute("aria-live","off"),this.container.setAttribute("id","pswp__items"),this.mainScroll.appendHolders(),this.ui=new Dd(this),this.ui.init(),(this.options.appendToEl||document.body).appendChild(this.element)}getThumbBounds(){return zd(this.currIndex,this.currSlide?this.currSlide.data:this._initialItemData,this)}canLoop(){return this.options.loop&&this.getNumItems()>2}_prepareOptions(e){return window.matchMedia("(prefers-reduced-motion), (update: slow)").matches&&(e.showHideAnimationType="none",e.zoomAnimationDuration=0),{...Vd,...e}}}const qd=()=>{apos.util.widgetPlayers["image-gallery"]={selector:"[data-image-gallery]",player:function(i){const e=i.dataset.slides||1,t=new Re(i,{slidesPerView:e,spaceBetween:30,navigation:{nextEl:".button-arrow--next",prevEl:".button-arrow--prev"}}),n={mainClass:"imageGallery--pswp",gallery:"#imageGallery",pswpModule:jd,bgOpacity:1,showHideOpacity:!0,children:"a",loop:!0,showHideAnimationType:"fade",imageClickAction:"next",tapAction:"next",zoom:!1,close:!0,counter:!0,arrowKeys:!0},s=new Vh(n);s.init(),s.on("change",()=>{const{pswp:r}=s;t.slideTo(r.currIndex,0,!1)}),s.on("afterInit",()=>{t.params.autoplay.enabled&&t.autoplay.stop()}),s.on("closingAnimationStart",()=>{const{pswp:r}=s;t.slideTo(r.currIndex,0,!1),t.params.autoplay.enabled&&t.autoplay.start()})}}};class dt{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const di={PROPERTYCHANGE:"propertychange"};class qs{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function ui(i,e){return i>e?1:i<e?-1:0}function Us(i,e,t){if(i[0]<=e)return 0;const n=i.length;if(e<=i[n-1])return n-1;if(typeof t=="function"){for(let s=1;s<n;++s){const r=i[s];if(r===e)return s;if(r<e)return t(e,i[s-1],r)>0?s-1:s}return n-1}if(t>0){for(let s=1;s<n;++s)if(i[s]<e)return s-1;return n-1}if(t<0){for(let s=1;s<n;++s)if(i[s]<=e)return s;return n-1}for(let s=1;s<n;++s){if(i[s]==e)return s;if(i[s]<e)return i[s-1]-e<e-i[s]?s-1:s}return n-1}function Ud(i,e,t){for(;e<t;){const n=i[e];i[e]=i[t],i[t]=n,++e,--t}}function ra(i,e){const t=Array.isArray(e)?e:[e],n=t.length;for(let s=0;s<n;s++)i[i.length]=t[s]}function It(i,e){const t=i.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(i[n]!==e[n])return!1;return!0}function Kd(i,e,t){const n=e||ui;return i.every(function(s,r){if(r===0)return!0;const o=n(i[r-1],s);return!(o>0||o===0)})}function Ni(){return!0}function Gn(){return!1}function fi(){}function Jd(i){let e=!1,t,n,s;return function(){const r=Array.prototype.slice.call(arguments);return(!e||this!==s||!It(r,n))&&(e=!0,s=this,n=r,t=i.apply(this,arguments)),t}}function Ki(i){for(const e in i)delete i[e]}function Gi(i){let e;for(e in i)return!1;return!e}class Wn extends qs{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const n=this.listeners_||(this.listeners_={}),s=n[e]||(n[e]=[]);s.includes(t)||s.push(t)}dispatchEvent(e){const t=typeof e=="string",n=t?e:e.type,s=this.listeners_&&this.listeners_[n];if(!s)return;const r=t?new dt(e):e;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,a[n]=0),++o[n];let l;for(let c=0,h=s.length;c<h;++c)if("handleEvent"in s[c]?l=s[c].handleEvent(r):l=s[c].call(this,r),l===!1||r.propagationStopped){l=!1;break}if(--o[n]===0){let c=a[n];for(delete a[n];c--;)this.removeEventListener(n,fi);delete o[n]}return l}disposeInternal(){this.listeners_&&Ki(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){const n=this.listeners_&&this.listeners_[e];if(n){const s=n.indexOf(t);s!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[s]=fi,++this.pendingRemovals_[e]):(n.splice(s,1),n.length===0&&delete this.listeners_[e]))}}}const H={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function U(i,e,t,n,s){if(n&&n!==i&&(t=t.bind(n)),s){const o=t;t=function(){i.removeEventListener(e,t),o.apply(this,arguments)}}const r={target:i,type:e,listener:t};return i.addEventListener(e,t),r}function In(i,e,t,n){return U(i,e,t,n,!0)}function se(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),Ki(i))}class Ji extends Wn{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(H.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const n=e.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=U(this,e[r],t);return s}return U(this,e,t)}onceInternal(e,t){let n;if(Array.isArray(e)){const s=e.length;n=new Array(s);for(let r=0;r<s;++r)n[r]=In(this,e[r],t)}else n=In(this,e,t);return t.ol_key=n,n}unInternal(e,t){const n=t.ol_key;if(n)Qd(n);else if(Array.isArray(e))for(let s=0,r=e.length;s<r;++s)this.removeEventListener(e[s],t);else this.removeEventListener(e,t)}}Ji.prototype.on;Ji.prototype.once;Ji.prototype.un;function Qd(i){if(Array.isArray(i))for(let e=0,t=i.length;e<t;++e)se(i[e]);else se(i)}function q(){throw new Error("Unimplemented abstract method.")}let eu=0;function J(i){return i.ol_uid||(i.ol_uid=String(++eu))}class Ur extends dt{constructor(e,t,n){super(e),this.key=t,this.oldValue=n}}class tt extends Ji{constructor(e){super(),this.on,this.once,this.un,J(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(e,t){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new Ur(n,e,t)),n=di.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new Ur(n,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,n){const s=this.values_||(this.values_={});if(n)s[e]=t;else{const r=s[e];s[e]=t,r!==t&&this.notify(e,r)}}setProperties(e,t){for(const n in e)this.set(n,e[n],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],Gi(this.values_)&&(this.values_=null),t||this.notify(e,n)}}}const tu={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class oa extends Error{constructor(e){const t=tu[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}const Te={ADD:"add",REMOVE:"remove"},Kr={LENGTH:"length"};class dn extends dt{constructor(e,t,n){super(e),this.element=t,this.index=n}}class Ue extends tt{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let n=0,s=this.array_.length;n<s;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let n=0,s=t.length;n<s;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Kr.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new dn(Te.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let n=0,s=t.length;n<s;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new dn(Te.REMOVE,t,e)),t}setAt(e,t){const n=this.getLength();if(e>=n){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const s=this.array_[e];this.array_[e]=t,this.dispatchEvent(new dn(Te.REMOVE,s,e)),this.dispatchEvent(new dn(Te.ADD,t,e))}updateLength_(){this.set(Kr.LENGTH,this.array_.length)}assertUnique_(e,t){for(let n=0,s=this.array_.length;n<s;++n)if(this.array_[n]===e&&n!==t)throw new oa(58)}}const bt=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",iu=bt.includes("firefox"),nu=bt.includes("safari")&&!bt.includes("chrom");nu&&(bt.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(bt));const su=bt.includes("webkit")&&!bt.includes("edge"),aa=bt.includes("macintosh"),la=typeof devicePixelRatio<"u"?devicePixelRatio:1,Ks=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,ru=typeof Image<"u"&&Image.prototype.decode,ca=function(){let i=!1;try{const e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return i}();function V(i,e){if(!i)throw new oa(e)}new Array(6);function Je(){return[1,0,0,1,0,0]}function ou(i,e,t,n,s,r,o){return i[0]=e,i[1]=t,i[2]=n,i[3]=s,i[4]=r,i[5]=o,i}function au(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i}function ge(i,e){const t=e[0],n=e[1];return e[0]=i[0]*t+i[2]*n+i[4],e[1]=i[1]*t+i[3]*n+i[5],e}function lu(i,e,t){return ou(i,e,0,0,t,0,0)}function Tt(i,e,t,n,s,r,o,a){const l=Math.sin(r),c=Math.cos(r);return i[0]=n*c,i[1]=s*l,i[2]=-n*l,i[3]=s*c,i[4]=o*n*c-a*n*l+e,i[5]=o*s*l+a*s*c+t,i}function Js(i,e){const t=cu(e);V(t!==0,32);const n=e[0],s=e[1],r=e[2],o=e[3],a=e[4],l=e[5];return i[0]=o/t,i[1]=-s/t,i[2]=-r/t,i[3]=n/t,i[4]=(r*l-o*a)/t,i[5]=-(n*l-s*a)/t,i}function cu(i){return i[0]*i[3]-i[1]*i[2]}let Jr;function ha(i){const e="matrix("+i.join(", ")+")";if(Ks)return e;const t=Jr||(Jr=document.createElement("div"));return t.style.transform=e,t.style.transform}const me={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Qr(i){const e=He();for(let t=0,n=i.length;t<n;++t)Di(e,i[t]);return e}function Qs(i,e,t){return t?(t[0]=i[0]-e,t[1]=i[1]-e,t[2]=i[2]+e,t[3]=i[3]+e,t):[i[0]-e,i[1]-e,i[2]+e,i[3]+e]}function da(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i.slice()}function ua(i,e,t){let n,s;return e<i[0]?n=i[0]-e:i[2]<e?n=e-i[2]:n=0,t<i[1]?s=i[1]-t:i[3]<t?s=t-i[3]:s=0,n*n+s*s}function Xn(i,e){return fa(i,e[0],e[1])}function ni(i,e){return i[0]<=e[0]&&e[2]<=i[2]&&i[1]<=e[1]&&e[3]<=i[3]}function fa(i,e,t){return i[0]<=e&&e<=i[2]&&i[1]<=t&&t<=i[3]}function Os(i,e){const t=i[0],n=i[1],s=i[2],r=i[3],o=e[0],a=e[1];let l=me.UNKNOWN;return o<t?l=l|me.LEFT:o>s&&(l=l|me.RIGHT),a<n?l=l|me.BELOW:a>r&&(l=l|me.ABOVE),l===me.UNKNOWN&&(l=me.INTERSECTING),l}function He(){return[1/0,1/0,-1/0,-1/0]}function Ct(i,e,t,n,s){return s?(s[0]=i,s[1]=e,s[2]=t,s[3]=n,s):[i,e,t,n]}function Bn(i){return Ct(1/0,1/0,-1/0,-1/0,i)}function hu(i,e){const t=i[0],n=i[1];return Ct(t,n,t,n,e)}function du(i,e,t,n,s){const r=Bn(s);return ma(r,i,e,t,n)}function Wi(i,e){return i[0]==e[0]&&i[2]==e[2]&&i[1]==e[1]&&i[3]==e[3]}function uu(i,e){return e[0]<i[0]&&(i[0]=e[0]),e[2]>i[2]&&(i[2]=e[2]),e[1]<i[1]&&(i[1]=e[1]),e[3]>i[3]&&(i[3]=e[3]),i}function Di(i,e){e[0]<i[0]&&(i[0]=e[0]),e[0]>i[2]&&(i[2]=e[0]),e[1]<i[1]&&(i[1]=e[1]),e[1]>i[3]&&(i[3]=e[1])}function ma(i,e,t,n,s){for(;t<n;t+=s)fu(i,e[t],e[t+1]);return i}function fu(i,e,t){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}function ga(i,e){let t;return t=e(Yn(i)),t||(t=e($n(i)),t)||(t=e(Hn(i)),t)||(t=e(Bt(i)),t)?t:!1}function Ds(i){let e=0;return Zn(i)||(e=ie(i)*et(i)),e}function Yn(i){return[i[0],i[1]]}function $n(i){return[i[2],i[1]]}function mi(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function mu(i,e){let t;return e==="bottom-left"?t=Yn(i):e==="bottom-right"?t=$n(i):e==="top-left"?t=Bt(i):e==="top-right"?t=Hn(i):V(!1,13),t}function ks(i,e,t,n,s){const[r,o,a,l,c,h,d,u]=Fs(i,e,t,n);return Ct(Math.min(r,a,c,d),Math.min(o,l,h,u),Math.max(r,a,c,d),Math.max(o,l,h,u),s)}function Fs(i,e,t,n){const s=e*n[0]/2,r=e*n[1]/2,o=Math.cos(t),a=Math.sin(t),l=s*o,c=s*a,h=r*o,d=r*a,u=i[0],f=i[1];return[u-l+d,f-c-h,u-l-d,f-c+h,u+l-d,f+c+h,u+l+d,f+c-h,u-l+d,f-c-h]}function et(i){return i[3]-i[1]}function ki(i,e,t){const n=t||He();return Ie(i,e)?(i[0]>e[0]?n[0]=i[0]:n[0]=e[0],i[1]>e[1]?n[1]=i[1]:n[1]=e[1],i[2]<e[2]?n[2]=i[2]:n[2]=e[2],i[3]<e[3]?n[3]=i[3]:n[3]=e[3]):Bn(n),n}function Bt(i){return[i[0],i[3]]}function Hn(i){return[i[2],i[3]]}function ie(i){return i[2]-i[0]}function Ie(i,e){return i[0]<=e[2]&&i[2]>=e[0]&&i[1]<=e[3]&&i[3]>=e[1]}function Zn(i){return i[2]<i[0]||i[3]<i[1]}function gu(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i}function pu(i,e,t){let n=!1;const s=Os(i,e),r=Os(i,t);if(s===me.INTERSECTING||r===me.INTERSECTING)n=!0;else{const o=i[0],a=i[1],l=i[2],c=i[3],h=e[0],d=e[1],u=t[0],f=t[1],m=(f-d)/(u-h);let g,y;r&me.ABOVE&&!(s&me.ABOVE)&&(g=u-(f-c)/m,n=g>=o&&g<=l),!n&&r&me.RIGHT&&!(s&me.RIGHT)&&(y=f-(u-l)*m,n=y>=a&&y<=c),!n&&r&me.BELOW&&!(s&me.BELOW)&&(g=u-(f-a)/m,n=g>=o&&g<=l),!n&&r&me.LEFT&&!(s&me.LEFT)&&(y=f-(u-o)*m,n=y>=a&&y<=c)}return n}function pa(i,e){const t=e.getExtent(),n=mi(i);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){const s=ie(t),o=Math.floor((n[0]-t[0])/s)*s;i[0]-=o,i[2]-=o}return i}function _u(i,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[t[0],i[1],t[2],i[3]]];pa(i,e);const n=ie(t);if(ie(i)>n)return[[t[0],i[1],t[2],i[3]]];if(i[0]<t[0])return[[i[0]+n,i[1],t[2],i[3]],[t[0],i[1],i[2],i[3]]];if(i[2]>t[2])return[[i[0],i[1],t[2],i[3]],[t[0],i[1],i[2]-n,i[3]]]}return[i]}function de(i,e,t){return Math.min(Math.max(i,e),t)}function yu(i,e,t,n,s,r){const o=s-t,a=r-n;if(o!==0||a!==0){const l=((i-t)*o+(e-n)*a)/(o*o+a*a);l>1?(t=s,n=r):l>0&&(t+=o*l,n+=a*l)}return oi(i,e,t,n)}function oi(i,e,t,n){const s=t-i,r=n-e;return s*s+r*r}function vu(i){const e=i.length;for(let n=0;n<e;n++){let s=n,r=Math.abs(i[n][n]);for(let a=n+1;a<e;a++){const l=Math.abs(i[a][n]);l>r&&(r=l,s=a)}if(r===0)return null;const o=i[s];i[s]=i[n],i[n]=o;for(let a=n+1;a<e;a++){const l=-i[a][n]/i[n][n];for(let c=n;c<e+1;c++)n==c?i[a][c]=0:i[a][c]+=l*i[n][c]}}const t=new Array(e);for(let n=e-1;n>=0;n--){t[n]=i[n][e]/i[n][n];for(let s=n-1;s>=0;s--)i[s][e]-=i[s][n]*t[n]}return t}function Tn(i){return i*Math.PI/180}function ai(i,e){const t=i%e;return t*e<0?t+e:t}function Ye(i,e,t){return i+t*(e-i)}function er(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}function un(i,e){return Math.floor(er(i,e))}function fn(i,e){return Math.ceil(er(i,e))}const xu=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Eu=/^([a-z]*)$|^hsla?\(.*\)$/i;function _a(i){return typeof i=="string"?i:ya(i)}function Su(i){const e=document.createElement("div");if(e.style.color=i,e.style.color!==""){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}const bu=function(){const e={};let t=0;return function(n){let s;if(e.hasOwnProperty(n))s=e[n];else{if(t>=1024){let r=0;for(const o in e)(r++&3)===0&&(delete e[o],--t)}s=Tu(n),e[n]=s,++t}return s}}();function wn(i){return Array.isArray(i)?i:bu(i)}function Tu(i){let e,t,n,s,r;if(Eu.exec(i)&&(i=Su(i)),xu.exec(i)){const o=i.length-1;let a;o<=4?a=1:a=2;const l=o===4||o===8;e=parseInt(i.substr(1+0*a,a),16),t=parseInt(i.substr(1+1*a,a),16),n=parseInt(i.substr(1+2*a,a),16),l?s=parseInt(i.substr(1+3*a,a),16):s=255,a==1&&(e=(e<<4)+e,t=(t<<4)+t,n=(n<<4)+n,l&&(s=(s<<4)+s)),r=[e,t,n,s/255]}else i.startsWith("rgba(")?(r=i.slice(5,-1).split(",").map(Number),eo(r)):i.startsWith("rgb(")?(r=i.slice(4,-1).split(",").map(Number),r.push(1),eo(r)):V(!1,14);return r}function eo(i){return i[0]=de(i[0]+.5|0,0,255),i[1]=de(i[1]+.5|0,0,255),i[2]=de(i[2]+.5|0,0,255),i[3]=de(i[3],0,1),i}function ya(i){let e=i[0];e!=(e|0)&&(e=e+.5|0);let t=i[1];t!=(t|0)&&(t=t+.5|0);let n=i[2];n!=(n|0)&&(n=n+.5|0);const s=i[3]===void 0?1:Math.round(i[3]*100)/100;return"rgba("+e+","+t+","+n+","+s+")"}class Cu{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const n=this.cache_[t];(e++&3)===0&&!n.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,n){const s=to(e,t,n);return s in this.cache_?this.cache_[s]:null}set(e,t,n,s){const r=to(e,t,n);this.cache_[r]=s,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function to(i,e,t){const n=t?_a(t):"null";return e+":"+i+":"+n}const Ln=new Cu,Q={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class va extends tt{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Q.OPACITY]=e.opacity!==void 0?e.opacity:1,V(typeof t[Q.OPACITY]=="number",64),t[Q.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Q.Z_INDEX]=e.zIndex,t[Q.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Q.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Q.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Q.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return t.opacity=de(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=n===void 0&&!t.managed?1/0:n,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return q()}getLayerStatesArray(e){return q()}getExtent(){return this.get(Q.EXTENT)}getMaxResolution(){return this.get(Q.MAX_RESOLUTION)}getMinResolution(){return this.get(Q.MIN_RESOLUTION)}getMinZoom(){return this.get(Q.MIN_ZOOM)}getMaxZoom(){return this.get(Q.MAX_ZOOM)}getOpacity(){return this.get(Q.OPACITY)}getSourceState(){return q()}getVisible(){return this.get(Q.VISIBLE)}getZIndex(){return this.get(Q.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Q.EXTENT,e)}setMaxResolution(e){this.set(Q.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Q.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Q.MAX_ZOOM,e)}setMinZoom(e){this.set(Q.MIN_ZOOM,e)}setOpacity(e){V(typeof e=="number",64),this.set(Q.OPACITY,e)}setVisible(e){this.set(Q.VISIBLE,e)}setZIndex(e){this.set(Q.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Qe={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},_e={ANIMATING:0,INTERACTING:1},Xe={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Iu=42,tr=256,ir={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class xa{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||ir[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Qi=6378137,si=Math.PI*Qi,wu=[-si,-si,si,si],Lu=[-180,-85,180,85],mn=Qi*Math.log(Math.tan(Math.PI/2));class Vt extends xa{constructor(e){super({code:e,units:"m",extent:wu,global:!0,worldExtent:Lu,getPointResolution:function(t,n){return t/Math.cosh(n[1]/Qi)}})}}const io=[new Vt("EPSG:3857"),new Vt("EPSG:102100"),new Vt("EPSG:102113"),new Vt("EPSG:900913"),new Vt("http://www.opengis.net/def/crs/EPSG/0/3857"),new Vt("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Mu(i,e,t){const n=i.length;t=t>1?t:2,e===void 0&&(t>2?e=i.slice():e=new Array(n));for(let s=0;s<n;s+=t){e[s]=si*i[s]/180;let r=Qi*Math.log(Math.tan(Math.PI*(+i[s+1]+90)/360));r>mn?r=mn:r<-mn&&(r=-mn),e[s+1]=r}return e}function Ru(i,e,t){const n=i.length;t=t>1?t:2,e===void 0&&(t>2?e=i.slice():e=new Array(n));for(let s=0;s<n;s+=t)e[s]=180*i[s]/si,e[s+1]=360*Math.atan(Math.exp(i[s+1]/Qi))/Math.PI-90;return e}const Au=6378137,no=[-180,-90,180,90],Pu=Math.PI*Au/180;class Mt extends xa{constructor(e,t){super({code:e,units:"degrees",extent:no,axisOrientation:t,global:!0,metersPerUnit:Pu,worldExtent:no})}}const so=[new Mt("CRS:84"),new Mt("EPSG:4326","neu"),new Mt("urn:ogc:def:crs:OGC:1.3:CRS84"),new Mt("urn:ogc:def:crs:OGC:2:84"),new Mt("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Mt("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Mt("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let zs={};function Ou(i){return zs[i]||zs[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Du(i,e){zs[i]=e}let li={};function Mn(i,e,t){const n=i.getCode(),s=e.getCode();n in li||(li[n]={}),li[n][s]=t}function ku(i,e){let t;return i in li&&e in li[i]&&(t=li[i][e]),t}function Fu(i,e){return i[0]+=+e[0],i[1]+=+e[1],i}function Rn(i,e){let t=!0;for(let n=i.length-1;n>=0;--n)if(i[n]!=e[n]){t=!1;break}return t}function nr(i,e){const t=Math.cos(e),n=Math.sin(e),s=i[0]*t-i[1]*n,r=i[1]*t+i[0]*n;return i[0]=s,i[1]=r,i}function zu(i,e){return i[0]*=e,i[1]*=e,i}function Ea(i,e){if(e.canWrapX()){const t=ie(e.getExtent()),n=Nu(i,e,t);n&&(i[0]-=n*t)}return i}function Nu(i,e,t){const n=e.getExtent();let s=0;return e.canWrapX()&&(i[0]<n[0]||i[0]>n[2])&&(t=t||ie(n),s=Math.floor((i[0]-n[0])/t)),s}const Gu=63710088e-1;function ro(i,e,t){t=t||Gu;const n=Tn(i[1]),s=Tn(e[1]),r=(s-n)/2,o=Tn(e[0]-i[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(s);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function Sa(...i){console.warn(...i)}let Ns=!0;function ba(i){Ns=!1}function sr(i,e){if(e!==void 0){for(let t=0,n=i.length;t<n;++t)e[t]=i[t];e=e}else e=i.slice();return e}function Ta(i,e){if(e!==void 0&&i!==e){for(let t=0,n=i.length;t<n;++t)e[t]=i[t];i=e}return i}function Wu(i){Du(i.getCode(),i),Mn(i,i,sr)}function Xu(i){i.forEach(Wu)}function Ze(i){return typeof i=="string"?Ou(i):i||null}function oo(i,e,t,n){i=Ze(i);let s;const r=i.getPointResolutionFunc();if(r)s=r(e,t);else{const o=i.getUnits();if(o=="degrees"&&!n||n=="degrees")s=e;else{const a=or(i,Ze("EPSG:4326"));if(a===Ta&&o!=="degrees")s=e*i.getMetersPerUnit();else{let c=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];c=a(c,c,2);const h=ro(c.slice(0,2),c.slice(2,4)),d=ro(c.slice(4,6),c.slice(6,8));s=(h+d)/2}const l=i.getMetersPerUnit();l!==void 0&&(s/=l)}}return s}function ao(i){Xu(i),i.forEach(function(e){i.forEach(function(t){e!==t&&Mn(e,t,sr)})})}function Bu(i,e,t,n){i.forEach(function(s){e.forEach(function(r){Mn(s,r,t),Mn(r,s,n)})})}function rr(i,e){return i?typeof i=="string"?Ze(i):i:Ze(e)}function lo(i,e){return ba(),Ca(i,"EPSG:4326","EPSG:3857")}function Jt(i,e){if(i===e)return!0;const t=i.getUnits()===e.getUnits();return(i.getCode()===e.getCode()||or(i,e)===sr)&&t}function or(i,e){const t=i.getCode(),n=e.getCode();let s=ku(t,n);return s||(s=Ta),s}function An(i,e){const t=Ze(i),n=Ze(e);return or(t,n)}function Ca(i,e,t){return An(e,t)(i,void 0,i.length)}function Gs(i,e){return i}function at(i,e){return Ns&&!Rn(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(Ns=!1,Sa("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function Ia(i,e){return i}function Ot(i,e){return i}function Yu(){ao(io),ao(so),Bu(so,io,Mu,Ru)}Yu();function co(i,e,t){return function(n,s,r,o,a){if(!n)return;if(!s&&!e)return n;const l=e?0:r[0]*s,c=e?0:r[1]*s,h=a?a[0]:0,d=a?a[1]:0;let u=i[0]+l/2+h,f=i[2]-l/2+h,m=i[1]+c/2+d,g=i[3]-c/2+d;u>f&&(u=(f+u)/2,f=u),m>g&&(m=(g+m)/2,g=m);let y=de(n[0],u,f),p=de(n[1],m,g);if(o&&t&&s){const _=30*s;y+=-_*Math.log(1+Math.max(0,u-n[0])/_)+_*Math.log(1+Math.max(0,n[0]-f)/_),p+=-_*Math.log(1+Math.max(0,m-n[1])/_)+_*Math.log(1+Math.max(0,n[1]-g)/_)}return[y,p]}}function $u(i){return i}function ar(i,e,t,n){const s=ie(e)/t[0],r=et(e)/t[1];return n?Math.min(i,Math.max(s,r)):Math.min(i,Math.min(s,r))}function lr(i,e,t){let n=Math.min(i,e);const s=50;return n*=Math.log(1+s*Math.max(0,i/e-1))/s+1,t&&(n=Math.max(n,t),n/=Math.log(1+s*Math.max(0,t/i-1))/s+1),de(n,t/2,e*2)}function Hu(i,e,t,n){return e=e!==void 0?e:!0,function(s,r,o,a){if(s!==void 0){const l=i[0],c=i[i.length-1],h=t?ar(l,t,o,n):l;if(a)return e?lr(s,h,c):de(s,c,h);const d=Math.min(h,s),u=Math.floor(Us(i,d,r));return i[u]>h&&u<i.length-1?i[u+1]:i[u]}}}function Zu(i,e,t,n,s,r){return n=n!==void 0?n:!0,t=t!==void 0?t:0,function(o,a,l,c){if(o!==void 0){const h=s?ar(e,s,l,r):e;if(c)return n?lr(o,h,t):de(o,t,h);const d=1e-9,u=Math.ceil(Math.log(e/h)/Math.log(i)-d),f=-a*(.5-d)+.5,m=Math.min(h,o),g=Math.floor(Math.log(e/m)/Math.log(i)+f),y=Math.max(u,g),p=e/Math.pow(i,y);return de(p,t,h)}}}function ho(i,e,t,n,s){return t=t!==void 0?t:!0,function(r,o,a,l){if(r!==void 0){const c=n?ar(i,n,a,s):i;return!t||!l?de(r,e,c):lr(r,c,e)}}}function cr(i){if(i!==void 0)return 0}function uo(i){if(i!==void 0)return i}function Vu(i){const e=2*Math.PI/i;return function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function ju(i){return i=i||Tn(5),function(e,t){if(t)return e;if(e!==void 0)return Math.abs(e)<=i?0:e}}function wa(i){return Math.pow(i,3)}function _i(i){return 1-wa(1-i)}function qu(i){return 3*i*i-2*i*i*i}function Uu(i){return i}function Nt(i,e,t,n,s,r){r=r||[];let o=0;for(let a=e;a<t;a+=n){const l=i[a],c=i[a+1];r[o++]=s[0]*l+s[2]*c+s[4],r[o++]=s[1]*l+s[3]*c+s[5]}return r&&r.length!=o&&(r.length=o),r}function La(i,e,t,n,s,r,o){o=o||[];const a=Math.cos(s),l=Math.sin(s),c=r[0],h=r[1];let d=0;for(let u=e;u<t;u+=n){const f=i[u]-c,m=i[u+1]-h;o[d++]=c+f*a-m*l,o[d++]=h+f*l+m*a;for(let g=u+2;g<u+n;++g)o[d++]=i[g]}return o&&o.length!=d&&(o.length=d),o}function Ku(i,e,t,n,s,r,o,a){a=a||[];const l=o[0],c=o[1];let h=0;for(let d=e;d<t;d+=n){const u=i[d]-l,f=i[d+1]-c;a[h++]=l+s*u,a[h++]=c+r*f;for(let m=d+2;m<d+n;++m)a[h++]=i[m]}return a&&a.length!=h&&(a.length=h),a}function Ju(i,e,t,n,s,r,o){o=o||[];let a=0;for(let l=e;l<t;l+=n){o[a++]=i[l]+s,o[a++]=i[l+1]+r;for(let c=l+2;c<l+n;++c)o[a++]=i[c]}return o&&o.length!=a&&(o.length=a),o}const fo=Je();class Qu extends tt{constructor(){super(),this.extent_=He(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Jd(function(e,t,n){if(!n)return this.getSimplifiedGeometry(t);const s=this.clone();return s.applyTransform(n),s.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return q()}closestPointXY(e,t,n,s){return q()}containsXY(e,t){const n=this.getClosestPoint([e,t]);return n[0]===e&&n[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return q()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Bn(t),this.extentRevision_=this.getRevision()}return gu(this.extent_,e)}rotate(e,t){q()}scale(e,t,n){q()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return q()}getType(){return q()}applyTransform(e){q()}intersectsExtent(e){return q()}translate(e,t){q()}transform(e,t){const n=Ze(e),s=n.getUnits()=="tile-pixels"?function(r,o,a){const l=n.getExtent(),c=n.getWorldExtent(),h=et(c)/et(l);return Tt(fo,c[0],c[3],h,-h,0,0,0),Nt(r,0,r.length,a,fo,o),An(n,t)(r,o,a)}:An(n,t);return this.applyTransform(s),this}}class hr extends Qu{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(e){return du(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return q()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=mo(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){q()}setLayout(e,t,n){let s;if(e)s=mo(e);else{for(let r=0;r<n;++r){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}s=t.length,e=ef(s)}this.layout=e,this.stride=s}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const n=this.getFlatCoordinates();if(n){const s=this.getStride();La(n,0,n.length,s,e,t,n),this.changed()}}scale(e,t,n){t===void 0&&(t=e),n||(n=mi(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();Ku(s,0,s.length,r,e,t,n,s),this.changed()}}translate(e,t){const n=this.getFlatCoordinates();if(n){const s=this.getStride();Ju(n,0,n.length,s,e,t,n),this.changed()}}}function ef(i){let e;return i==2?e="XY":i==3?e="XYZ":i==4&&(e="XYZM"),e}function mo(i){let e;return i=="XY"?e=2:i=="XYZ"||i=="XYM"?e=3:i=="XYZM"&&(e=4),e}function tf(i,e,t){const n=i.getFlatCoordinates();if(!n)return null;const s=i.getStride();return Nt(n,0,n.length,s,e,t)}function go(i,e,t,n,s,r,o){const a=i[e],l=i[e+1],c=i[t]-a,h=i[t+1]-l;let d;if(c===0&&h===0)d=e;else{const u=((s-a)*c+(r-l)*h)/(c*c+h*h);if(u>1)d=t;else if(u>0){for(let f=0;f<n;++f)o[f]=Ye(i[e+f],i[t+f],u);o.length=n;return}else d=e}for(let u=0;u<n;++u)o[u]=i[d+u];o.length=n}function Ma(i,e,t,n,s){let r=i[e],o=i[e+1];for(e+=n;e<t;e+=n){const a=i[e],l=i[e+1],c=oi(r,o,a,l);c>s&&(s=c),r=a,o=l}return s}function nf(i,e,t,n,s){for(let r=0,o=t.length;r<o;++r){const a=t[r];s=Ma(i,e,a,n,s),e=a}return s}function Ra(i,e,t,n,s,r,o,a,l,c,h){if(e==t)return c;let d,u;if(s===0){if(u=oi(o,a,i[e],i[e+1]),u<c){for(d=0;d<n;++d)l[d]=i[e+d];return l.length=n,u}return c}h=h||[NaN,NaN];let f=e+n;for(;f<t;)if(go(i,f-n,f,n,o,a,h),u=oi(o,a,h[0],h[1]),u<c){for(c=u,d=0;d<n;++d)l[d]=h[d];l.length=n,f+=n}else f+=n*Math.max((Math.sqrt(u)-Math.sqrt(c))/s|0,1);if(go(i,t-n,e,n,o,a,h),u=oi(o,a,h[0],h[1]),u<c){for(c=u,d=0;d<n;++d)l[d]=h[d];l.length=n}return c}function sf(i,e,t,n,s,r,o,a,l,c,h){h=h||[NaN,NaN];for(let d=0,u=t.length;d<u;++d){const f=t[d];c=Ra(i,e,f,n,s,r,o,a,l,c,h),e=f}return c}function rf(i,e,t,n){for(let s=0,r=t.length;s<r;++s)i[e++]=t[s];return e}function Aa(i,e,t,n){for(let s=0,r=t.length;s<r;++s){const o=t[s];for(let a=0;a<n;++a)i[e++]=o[a]}return e}function of(i,e,t,n,s){s=s||[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=Aa(i,e,t[o],n);s[r++]=l,e=l}return s.length=r,s}function af(i,e,t,n,s,r,o){const a=(t-e)/n;if(a<3){for(;e<t;e+=n)r[o++]=i[e],r[o++]=i[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,t-n];let h=0;for(;c.length>0;){const d=c.pop(),u=c.pop();let f=0;const m=i[u],g=i[u+1],y=i[d],p=i[d+1];for(let _=u+n;_<d;_+=n){const v=i[_],x=i[_+1],b=yu(v,x,m,g,y,p);b>f&&(h=_,f=b)}f>s&&(l[(h-e)/n]=1,u+n<h&&c.push(u,h),h+n<d&&c.push(h,d))}for(let d=0;d<a;++d)l[d]&&(r[o++]=i[e+d*n],r[o++]=i[e+d*n+1]);return o}function At(i,e){return e*Math.round(i/e)}function lf(i,e,t,n,s,r,o){if(e==t)return o;let a=At(i[e],s),l=At(i[e+1],s);e+=n,r[o++]=a,r[o++]=l;let c,h;do if(c=At(i[e],s),h=At(i[e+1],s),e+=n,e==t)return r[o++]=c,r[o++]=h,o;while(c==a&&h==l);for(;e<t;){const d=At(i[e],s),u=At(i[e+1],s);if(e+=n,d==c&&u==h)continue;const f=c-a,m=h-l,g=d-a,y=u-l;if(f*y==m*g&&(f<0&&g<f||f==g||f>0&&g>f)&&(m<0&&y<m||m==y||m>0&&y>m)){c=d,h=u;continue}r[o++]=c,r[o++]=h,a=c,l=h,c=d,h=u}return r[o++]=c,r[o++]=h,o}function cf(i,e,t,n,s,r,o,a){for(let l=0,c=t.length;l<c;++l){const h=t[l];o=lf(i,e,h,n,s,r,o),a.push(o),e=h}return o}function ri(i,e,t,n,s){s=s!==void 0?s:[];let r=0;for(let o=e;o<t;o+=n)s[r++]=i.slice(o,o+n);return s.length=r,s}function Pn(i,e,t,n,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];s[r++]=ri(i,e,l,n,s[r]),e=l}return s.length=r,s}function po(i,e,t,n,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];s[r++]=l.length===1&&l[0]===e?[]:Pn(i,e,l,n,s[r]),e=l[l.length-1]}return s.length=r,s}function Pa(i,e,t,n){let s=0,r=i[t-n],o=i[t-n+1];for(;e<t;e+=n){const a=i[e],l=i[e+1];s+=o*a-r*l,r=a,o=l}return s/2}function hf(i,e,t,n){let s=0;for(let r=0,o=t.length;r<o;++r){const a=t[r];s+=Pa(i,e,a,n),e=a}return s}class Xi extends hr{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Xi(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,n,s){return s<ua(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ma(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ra(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,s))}getArea(){return Pa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return ri(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=af(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Xi(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Aa(this.flatCoordinates,0,e,this.stride),this.changed()}}class Vn extends hr{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Vn(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){const r=this.flatCoordinates,o=oi(e,t,r[0],r[1]);if(o<s){const a=this.stride;for(let l=0;l<a;++l)n[l]=r[l];return n.length=a,o}return s}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return hu(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return fa(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=rf(this.flatCoordinates,0,e,this.stride),this.changed()}}function df(i,e,t,n,s){return!ga(s,function(o){return!Dt(i,e,t,n,o[0],o[1])})}function Dt(i,e,t,n,s,r){let o=0,a=i[t-n],l=i[t-n+1];for(;e<t;e+=n){const c=i[e],h=i[e+1];l<=r?h>r&&(c-a)*(r-l)-(s-a)*(h-l)>0&&o++:h<=r&&(c-a)*(r-l)-(s-a)*(h-l)<0&&o--,a=c,l=h}return o!==0}function Oa(i,e,t,n,s,r){if(t.length===0||!Dt(i,e,t[0],n,s,r))return!1;for(let o=1,a=t.length;o<a;++o)if(Dt(i,t[o-1],t[o],n,s,r))return!1;return!0}function uf(i,e,t,n,s,r,o){let a,l,c,h,d,u,f;const m=s[r+1],g=[];for(let _=0,v=t.length;_<v;++_){const x=t[_];for(h=i[x-n],u=i[x-n+1],a=e;a<x;a+=n)d=i[a],f=i[a+1],(m<=u&&f<=m||u<=m&&m<=f)&&(c=(m-u)/(f-u)*(d-h)+h,g.push(c)),h=d,u=f}let y=NaN,p=-1/0;for(g.sort(ui),h=g[0],a=1,l=g.length;a<l;++a){d=g[a];const _=Math.abs(d-h);_>p&&(c=(h+d)/2,Oa(i,e,t,n,c,m)&&(y=c,p=_)),h=d}return isNaN(y)&&(y=s[r]),[y,m,p]}function ff(i,e,t,n,s){let r;for(e+=n;e<t;e+=n)if(r=s(i.slice(e-n,e),i.slice(e,e+n)),r)return r;return!1}function Da(i,e,t,n,s){const r=ma(He(),i,e,t,n);return Ie(s,r)?ni(s,r)||r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3]?!0:ff(i,e,t,n,function(o,a){return pu(s,o,a)}):!1}function ka(i,e,t,n,s){return!!(Da(i,e,t,n,s)||Dt(i,e,t,n,s[0],s[1])||Dt(i,e,t,n,s[0],s[3])||Dt(i,e,t,n,s[2],s[1])||Dt(i,e,t,n,s[2],s[3]))}function mf(i,e,t,n,s){if(!ka(i,e,t[0],n,s))return!1;if(t.length===1)return!0;for(let r=1,o=t.length;r<o;++r)if(df(i,t[r-1],t[r],n,s)&&!Da(i,t[r-1],t[r],n,s))return!1;return!0}function gf(i,e,t,n){for(;e<t-n;){for(let s=0;s<n;++s){const r=i[e+s];i[e+s]=i[t-n+s],i[t-n+s]=r}e+=n,t-=n}}function Fa(i,e,t,n){let s=0,r=i[t-n],o=i[t-n+1];for(;e<t;e+=n){const a=i[e],l=i[e+1];s+=(a-r)*(l+o),r=a,o=l}return s===0?void 0:s>0}function pf(i,e,t,n,s){s=s!==void 0?s:!1;for(let r=0,o=t.length;r<o;++r){const a=t[r],l=Fa(i,e,a,n);if(r===0){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;e=a}return!0}function _o(i,e,t,n,s){s=s!==void 0?s:!1;for(let r=0,o=t.length;r<o;++r){const a=t[r],l=Fa(i,e,a,n);(r===0?s&&l||!s&&!l:s&&!l||!s&&l)&&gf(i,e,a,n),e=a}return e}class Bi extends hr{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?ra(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Bi(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<ua(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(nf(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),sf(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,s))}containsXY(e,t){return Oa(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return hf(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),_o(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Pn(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=mi(this.getExtent());this.flatInteriorPoint_=uf(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Vn(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Xi(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,n=this.ends_,s=[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new Xi(t.slice(r,l),e);s.push(c),r=l}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;pf(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=_o(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=cf(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n),new Bi(t,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return mf(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=of(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function yo(i){if(Zn(i))throw new Error("Cannot create polygon from empty extent");const e=i[0],t=i[1],n=i[2],s=i[3],r=[e,t,e,s,n,s,n,t,e,t];return new Bi(r,"XY",[r.length])}const us=0;class je extends tt{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=rr(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&ba(),e.center&&(e.center=at(e.center,this.projection_)),e.extent&&(e.extent=Ot(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in Xe)delete t[a];this.setProperties(t,!0);const n=yf(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const s=_f(e),r=n.constraint,o=vf(e);this.constraints_={center:s,resolution:r,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const s=e||[0,0,0,0];t=t||[0,0,0,0];const r=this.getResolution(),o=r/2*(s[3]-t[3]+t[1]-s[1]),a=r/2*(s[0]-t[0]+t[2]-s[2]);this.setCenterInternal([n[0]+o,n[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let n=0;n<t.length;++n){let s=arguments[n];s.center&&(s=Object.assign({},s),s.center=at(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=at(s.anchor,this.getProjection())),t[n]=s}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,n;t>1&&typeof arguments[t-1]=="function"&&(n=arguments[t-1],--t);let s=0;for(;s<t&&!this.isDef();++s){const h=arguments[s];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(s===t){n&&gn(n,!0);return}let r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;s<t;++s){const h=arguments[s],d={start:r,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||qu,callback:n};if(h.center&&(d.sourceCenter=o,d.targetCenter=h.center.slice(),o=d.targetCenter),h.zoom!==void 0?(d.sourceResolution=a,d.targetResolution=this.getResolutionForZoom(h.zoom),a=d.targetResolution):h.resolution&&(d.sourceResolution=a,d.targetResolution=h.resolution,a=d.targetResolution),h.rotation!==void 0){d.sourceRotation=l;const u=ai(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=l+u,l=d.targetRotation}xf(d)?d.complete=!0:r+=d.duration,c.push(d)}this.animations_.push(c),this.setHint(_e.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[_e.ANIMATING]>0}getInteracting(){return this.hints_[_e.INTERACTING]>0}cancelAnimations(){this.setHint(_e.ANIMATING,-this.hints_[_e.ANIMATING]);let e;for(let t=0,n=this.animations_.length;t<n;++t){const s=this.animations_[t];if(s[0].callback&&gn(s[0].callback,!1),!e)for(let r=0,o=s.length;r<o;++r){const a=s[r];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let n=this.animations_.length-1;n>=0;--n){const s=this.animations_[n];let r=!0;for(let o=0,a=s.length;o<a;++o){const l=s[o];if(l.complete)continue;const c=e-l.start;let h=l.duration>0?c/l.duration:1;h>=1?(l.complete=!0,h=1):r=!1;const d=l.easing(h);if(l.sourceCenter){const u=l.sourceCenter[0],f=l.sourceCenter[1],m=l.targetCenter[0],g=l.targetCenter[1];this.nextCenter_=l.targetCenter;const y=u+d*(m-u),p=f+d*(g-f);this.targetCenter_=[y,p]}if(l.sourceResolution&&l.targetResolution){const u=d===1?l.targetResolution:l.sourceResolution+d*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),m=this.constraints_.resolution(u,0,f,!0);this.targetCenter_=this.calculateCenterZoom(m,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=u,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const u=d===1?ai(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+d*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(u,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=u}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(r){this.animations_[n]=null,this.setHint(_e.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=s[0].callback;o&&gn(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n;const s=this.getCenterInternal();return s!==void 0&&(n=[s[0]-t[0],s[1]-t[1]],nr(n,e-this.getRotation()),Fu(n,t)),n}calculateCenterZoom(e,t){let n;const s=this.getCenterInternal(),r=this.getResolution();if(s!==void 0&&r!==void 0){const o=t[0]-e*(t[0]-s[0])/r,a=t[1]-e*(t[1]-s[1])/r;n=[o,a]}return n}getViewportSize_(e){const t=this.viewportSize_;if(e){const n=t[0],s=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(s*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(s*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Gs(e,this.getProjection())}getCenterInternal(){return this.get(Xe.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return Ia(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();V(t,1);const n=this.getResolution();V(n!==void 0,2);const s=this.getRotation();return V(s!==void 0,3),ks(t,n,s,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Xe.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Ot(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const n=ie(e)/t[0],s=et(e)/t[1];return Math.max(n,s)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(t/n)/Math.log(e);return function(r){return t/Math.pow(e,r*s)}}getRotation(){return this.get(Xe.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,r=Math.log(n/s)/t;return function(o){return Math.log(n/o)/t/r}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),n=this.getRotation();let s=this.getCenterInternal();const r=this.padding_;if(r){const o=this.getViewportSizeMinusPadding_();s=fs(s,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],t,n)}return{center:s.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,n,s;if(this.resolutions_){const r=Us(this.resolutions_,e,1);t=r,n=this.resolutions_[r],r==this.resolutions_.length-1?s=2:s=n/this.resolutions_[r+1]}else n=this.maxResolution_,s=this.zoomFactor_;return t+Math.log(n/e)/Math.log(s)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=de(Math.floor(e),0,this.resolutions_.length-2),n=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(n,de(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let n;if(V(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function",24),Array.isArray(e)){V(!Zn(e),25);const s=Ot(e,this.getProjection());n=yo(s)}else if(e.getType()==="Circle"){const s=Ot(e.getExtent(),this.getProjection());n=yo(s),n.rotate(this.getRotation(),mi(s))}else n=e;this.fitInternal(n,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),n=Math.cos(t),s=Math.sin(-t),r=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,c=-1/0,h=-1/0;for(let d=0,u=r.length;d<u;d+=o){const f=r[d]*n-r[d+1]*s,m=r[d]*s+r[d+1]*n;a=Math.min(a,f),l=Math.min(l,m),c=Math.max(c,f),h=Math.max(h,m)}return[a,l,c,h]}fitInternal(e,t){t=t||{};let n=t.size;n||(n=this.getViewportSizeMinusPadding_());const s=t.padding!==void 0?t.padding:[0,0,0,0],r=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[n[0]-s[1]-s[3],n[1]-s[0]-s[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,r?0:1);const c=this.getRotation(),h=Math.sin(c),d=Math.cos(c),u=mi(a);u[0]+=(s[1]-s[3])/2*l,u[1]+=(s[0]-s[2])/2*l;const f=u[0]*d-u[1]*h,m=u[1]*d+u[0]*h,g=this.getConstrainedCenter([f,m],l),y=t.callback?t.callback:fi;t.duration!==void 0?this.animateInternal({resolution:l,center:g,duration:t.duration,easing:t.easing},y):(this.targetResolution_=l,this.targetCenter_=g,this.applyTargetState_(!1,!0),gn(y,!0))}centerOn(e,t,n){this.centerOnInternal(at(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(fs(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,s){let r;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-n),l=fs(e,s,[a[0]/2+o[3],a[1]/2+o[0]],t,n);r=[e[0]-l[0],e[1]-l[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=Gs(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&at(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const n=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*e,0,s,n);t&&(this.targetCenter_=this.calculateCenterZoom(r,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=at(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const n=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(s,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&at(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const n=this.getAnimating()||this.getInteracting()||t,s=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,0,r,n),a=this.constraints_.center(this.targetCenter_,o,r,n,this.calculateCenterShift(this.targetCenter_,o,s,r));this.get(Xe.ROTATION)!==s&&this.set(Xe.ROTATION,s),this.get(Xe.RESOLUTION)!==o&&(this.set(Xe.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Xe.CENTER)||!Rn(this.get(Xe.CENTER),a))&&this.set(Xe.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=e!==void 0?e:200;const s=t||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,s,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,r,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,this.applyTargetState_();return}n=n||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==r||!this.getCenterInternal()||!Rn(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:e,easing:_i,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(_e.INTERACTING,1)}endInteraction(e,t,n){n=n&&at(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){this.getInteracting()&&(this.setHint(_e.INTERACTING,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t=t||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}}function gn(i,e){setTimeout(function(){i(e)},0)}function _f(i){if(i.extent!==void 0){const t=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return co(i.extent,i.constrainOnlyCenter,t)}const e=rr(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,co(t,!1,!1)}return $u}function yf(i){let e,t,n,o=i.minZoom!==void 0?i.minZoom:us,a=i.maxZoom!==void 0?i.maxZoom:28;const l=i.zoomFactor!==void 0?i.zoomFactor:2,c=i.multiWorld!==void 0?i.multiWorld:!1,h=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,d=i.showFullExtent!==void 0?i.showFullExtent:!1,u=rr(i.projection,"EPSG:3857"),f=u.getExtent();let m=i.constrainOnlyCenter,g=i.extent;if(!c&&!g&&u.isGlobal()&&(m=!1,g=f),i.resolutions!==void 0){const y=i.resolutions;t=y[o],n=y[a]!==void 0?y[a]:y[y.length-1],i.constrainResolution?e=Hu(y,h,!m&&g,d):e=ho(t,n,h,!m&&g,d)}else{const p=(f?Math.max(ie(f),et(f)):360*ir.degrees/u.getMetersPerUnit())/tr/Math.pow(2,us),_=p/Math.pow(2,28-us);t=i.maxResolution,t!==void 0?o=0:t=p/Math.pow(l,o),n=i.minResolution,n===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?n=t/Math.pow(l,a):n=p/Math.pow(l,a):n=_),a=o+Math.floor(Math.log(t/n)/Math.log(l)),n=t/Math.pow(l,a-o),i.constrainResolution?e=Zu(l,t,n,h,!m&&g,d):e=ho(t,n,h,!m&&g,d)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:o,zoomFactor:l}}function vf(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const t=i.constrainRotation;return t===void 0||t===!0?ju():t===!1?uo:typeof t=="number"?Vu(t):uo}return cr}function xf(i){return!(i.sourceCenter&&i.targetCenter&&!Rn(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function fs(i,e,t,n,s){const r=Math.cos(-s);let o=Math.sin(-s),a=i[0]*r-i[1]*o,l=i[1]*r+i[0]*o;a+=(e[0]/2-t[0])*n,l+=(t[1]-e[1]/2)*n,o=-o;const c=a*r-l*o,h=l*r+a*o;return[c,h]}class jn extends va{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Q.SOURCE,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Q.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(se(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=U(e,H.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const n=this.getMapInternal();!e&&n&&(e=n.getView()),e instanceof je?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&n&&(t.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let s;t.layerStatesArray?s=t.layerStatesArray.find(o=>o.layer===this):s=this.getLayerState();const r=this.getExtent();return dr(s,t.viewState)&&(!r||Ie(r,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t;const n=this.getSource();if(n&&(t=n.getAttributions()),!t)return[];const s=e instanceof je?e.getViewStateAndExtent():e;let r=t(s);return Array.isArray(r)||(r=[r]),r}render(e,t){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,t)):null}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set(Q.MAP,e)}getMapInternal(){return this.get(Q.MAP)}setMap(e){this.mapPrecomposeKey_&&(se(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(se(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=U(e,Qe.PRECOMPOSE,function(t){const s=t.frameState.layerStatesArray,r=this.getLayerState(!1);V(!s.some(function(o){return o.layer===r.layer}),67),s.push(r)},this),this.mapRenderKey_=U(this,H.CHANGE,e.render,e),this.changed())}setSource(e){this.set(Q.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function dr(i,e){if(!i.visible)return!1;const t=e.resolution;if(t<i.minResolution||t>=i.maxResolution)return!1;const n=e.zoom;return n>i.minZoom&&n<=i.maxZoom}class Ef extends qs{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){q()}calculateMatrices2D(e){const t=e.viewState,n=e.coordinateToPixelTransform,s=e.pixelToCoordinateTransform;Tt(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),Js(s,n)}forEachFeatureAtCoordinate(e,t,n,s,r,o,a,l){let c;const h=t.viewState;function d(x,b,I,P){return r.call(o,b,x?I:null,P)}const u=h.projection,f=Ea(e.slice(),u),m=[[0,0]];if(u.canWrapX()&&s){const x=u.getExtent(),b=ie(x);m.push([-b,0],[b,0])}const g=t.layerStatesArray,y=g.length,p=[],_=[];for(let x=0;x<m.length;x++)for(let b=y-1;b>=0;--b){const I=g[b],P=I.layer;if(P.hasRenderer()&&dr(I,h)&&a.call(l,P)){const L=P.getRenderer(),O=P.getSource();if(L&&O){const k=O.getWrapX()?f:e,T=d.bind(null,I.managed);_[0]=k[0]+m[x][0],_[1]=k[1]+m[x][1],c=L.forEachFeatureAtCoordinate(_,t,n,T,p)}if(c)return c}}if(p.length===0)return;const v=1/p.length;return p.forEach((x,b)=>x.distanceSq+=b*v),p.sort((x,b)=>x.distanceSq-b.distanceSq),p.some(x=>c=x.callback(x.feature,x.layer,x.geometry)),c}hasFeatureAtCoordinate(e,t,n,s,r,o){return this.forEachFeatureAtCoordinate(e,t,n,s,Ni,this,r,o)!==void 0}getMap(){return this.map_}renderFrame(e){q()}flushDeclutterItems(e){}scheduleExpireIconCache(e){Ln.canExpireCache()&&e.postRenderFunctions.push(Sf)}}function Sf(i,e){Ln.expire()}class za extends dt{constructor(e,t,n,s){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=s}}const pn="ol-hidden",qn="ol-unselectable",ur="ol-control",vo="ol-collapsed",bf=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),xo=["style","variant","weight","size","lineHeight","family"],Na=function(i){const e=i.match(bf);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,s=xo.length;n<s;++n){const r=e[n+1];r!==void 0&&(t[xo[n]]=r)}return t.families=t.family.split(/,\s?/),t};function Ee(i,e,t,n){let s;return t&&t.length?s=t.shift():Ks?s=new OffscreenCanvas(i||300,e||300):s=document.createElement("canvas"),i&&(s.width=i),e&&(s.height=e),s.getContext("2d",n)}function Un(i){const e=i.canvas;e.width=1,e.height=1,i.clearRect(0,0,1,1)}function Eo(i,e){const t=e.parentNode;t&&t.replaceChild(i,e)}function Ws(i){return i&&i.parentNode?i.parentNode.removeChild(i):null}function Tf(i){for(;i.lastChild;)i.removeChild(i.lastChild)}function Cf(i,e){const t=i.childNodes;for(let n=0;;++n){const s=t[n],r=e[n];if(!s&&!r)break;if(s!==r){if(!s){i.appendChild(r);continue}if(!r){i.removeChild(s),--n;continue}i.insertBefore(r,s)}}}const Ga="10px sans-serif",Ce="#000",On="round",ct=[],ht=0,gi="round",Yi=10,$i="#000",Hi="center",Dn="middle",kt=[0,0,0,0],Zi=1,lt=new tt;let Qt=null,Xs;const Bs={},If=function(){const e="32px ",t=["monospace","serif"],n=t.length,s="wmytzilWMYTZIL@#/&?$%10";let r,o;function a(c,h,d){let u=!0;for(let f=0;f<n;++f){const m=t[f];if(o=kn(c+" "+h+" "+e+m,s),d!=m){const g=kn(c+" "+h+" "+e+d+","+m,s);u=u&&g!=o}}return!!u}function l(){let c=!0;const h=lt.getKeys();for(let d=0,u=h.length;d<u;++d){const f=h[d];lt.get(f)<100&&(a.apply(this,f.split(`
`))?(Ki(Bs),Qt=null,Xs=void 0,lt.set(f,100)):(lt.set(f,lt.get(f)+1,!0),c=!1))}c&&(clearInterval(r),r=void 0)}return function(c){const h=Na(c);if(!h)return;const d=h.families;for(let u=0,f=d.length;u<f;++u){const m=d[u],g=h.style+`
`+h.weight+`
`+m;lt.get(g)===void 0&&(lt.set(g,100,!0),a(h.style,h.weight,m)||(lt.set(g,0,!0),r===void 0&&(r=setInterval(l,32))))}}}(),wf=function(){let i;return function(e){let t=Bs[e];if(t==null){if(Ks){const n=Na(e),s=Wa(e,"Žg");t=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=e,document.body.appendChild(i),t=i.offsetHeight,document.body.removeChild(i);Bs[e]=t}return t}}();function Wa(i,e){return Qt||(Qt=Ee(1,1)),i!=Xs&&(Qt.font=i,Xs=Qt.font),Qt.measureText(e)}function kn(i,e){return Wa(i,e).width}function So(i,e,t){if(e in t)return t[e];const n=e.split(`
`).reduce((s,r)=>Math.max(s,kn(i,r)),0);return t[e]=n,n}function Lf(i,e){const t=[],n=[],s=[];let r=0,o=0,a=0,l=0;for(let c=0,h=e.length;c<=h;c+=2){const d=e[c];if(d===`
`||c===h){r=Math.max(r,o),s.push(o),o=0,a+=l;continue}const u=e[c+1]||i.font,f=kn(u,d);t.push(f),o+=f;const m=wf(u);n.push(m),l=Math.max(l,m)}return{width:r,height:a,widths:t,heights:n,lineWidths:s}}function Mf(i,e,t,n,s,r,o,a,l,c,h){i.save(),t!==1&&(i.globalAlpha*=t),e&&i.setTransform.apply(i,e),n.contextInstructions?(i.translate(l,c),i.scale(h[0],h[1]),Rf(n,i)):h[0]<0||h[1]<0?(i.translate(l,c),i.scale(h[0],h[1]),i.drawImage(n,s,r,o,a,0,0,o,a)):i.drawImage(n,s,r,o,a,l,c,o*h[0],a*h[1]),i.restore()}function Rf(i,e){const t=i.contextInstructions;for(let n=0,s=t.length;n<s;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}class Af extends Ef{constructor(e){super(e),this.fontChangeListenerKey_=U(lt,di.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=qn+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(e,t){const n=this.getMap();if(n.hasListener(e)){const s=new za(e,void 0,t);n.dispatchEvent(s)}}disposeInternal(){se(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Qe.PRECOMPOSE,e);const t=e.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),n=e.viewState;this.children_.length=0;const s=this.declutterLayers_;s.length=0;let r=null;for(let o=0,a=t.length;o<a;++o){const l=t[o];e.layerIndex=o;const c=l.layer,h=c.getSourceState();if(!dr(l,n)||h!="ready"&&h!="undefined"){c.unrender();continue}const d=c.render(e,r);d&&(d!==r&&(this.children_.push(d),r=d),"getDeclutter"in c&&s.push(c))}this.flushDeclutterItems(e),Cf(this.element_,this.children_),this.dispatchRenderEvent(Qe.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}flushDeclutterItems(e){const t=this.declutterLayers_;for(let n=t.length-1;n>=0;--n)t[n].renderDeclutter(e);t.length=0}}class vt extends dt{constructor(e,t){super(e),this.layer=t}}const ms={LAYERS:"layers"};class yi extends va{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let n=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(ms.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new Ue(n.slice(),{unique:!0}):V(typeof n.getArray=="function",43):n=new Ue(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(se),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(U(e,Te.ADD,this.handleLayersAdd_,this),U(e,Te.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(se);Ki(this.listenerKeys_);const t=e.getArray();for(let n=0,s=t.length;n<s;n++){const r=t[n];this.registerLayerListeners_(r),this.dispatchEvent(new vt("addlayer",r))}this.changed()}registerLayerListeners_(e){const t=[U(e,di.PROPERTYCHANGE,this.handleLayerChange_,this),U(e,H.CHANGE,this.handleLayerChange_,this)];e instanceof yi&&t.push(U(e,"addlayer",this.handleLayerGroupAdd_,this),U(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[J(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new vt("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new vt("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new vt("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,n=J(t);this.listenerKeys_[n].forEach(se),delete this.listenerKeys_[n],this.dispatchEvent(new vt("removelayer",t)),this.changed()}getLayers(){return this.get(ms.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const n=t.getArray();for(let s=0,r=n.length;s<r;++s)this.dispatchEvent(new vt("removelayer",n[s]))}this.set(ms.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],n=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const s=this.getLayerState();let r=s.zIndex;!e&&s.zIndex===void 0&&(r=0);for(let o=n,a=t.length;o<a;o++){const l=t[o];l.opacity*=s.opacity,l.visible=l.visible&&s.visible,l.maxResolution=Math.min(l.maxResolution,s.maxResolution),l.minResolution=Math.max(l.minResolution,s.minResolution),l.minZoom=Math.max(l.minZoom,s.minZoom),l.maxZoom=Math.min(l.maxZoom,s.maxZoom),s.extent!==void 0&&(l.extent!==void 0?l.extent=ki(l.extent,s.extent):l.extent=s.extent),l.zIndex===void 0&&(l.zIndex=r)}return t}getSourceState(){return"ready"}}class ei extends dt{constructor(e,t,n){super(e),this.map=t,this.frameState=n!==void 0?n:null}}class _t extends ei{constructor(e,t,n,s,r,o){super(e,t,r),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const re={SINGLECLICK:"singleclick",CLICK:H.CLICK,DBLCLICK:H.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Ys={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class Pf extends Wn{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=U(n,Ys.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=U(n,Ys.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(H.TOUCHMOVE,this.boundHandleTouchMove_,ca?{passive:!1}:!1)}emulateClick_(e){let t=new _t(re.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new _t(re.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new _t(re.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const t=e,n=t.pointerId;if(t.type==re.POINTERUP||t.type==re.POINTERCANCEL){delete this.trackedTouches_[n];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==t.target){delete this.trackedTouches_[s];break}}else(t.type==re.POINTERDOWN||t.type==re.POINTERMOVE)&&(this.trackedTouches_[n]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new _t(re.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(se),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new _t(re.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(U(n,re.POINTERMOVE,this.handlePointerMove_,this),U(n,re.POINTERUP,this.handlePointerUp_,this),U(this.element_,re.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(U(this.element_.getRootNode(),re.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new _t(re.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new _t(re.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(se(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(H.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(se(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(se),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const yt={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},pe={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Fn=1/0;class Of{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Ki(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const s=this.keyFunction_(n);return delete this.queuedElements_[s],n}enqueue(e){V(!(this.keyFunction_(e)in this.queuedElements_),31);const t=this.priorityFunction_(e);return t!=Fn?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,n=this.priorities_,s=t.length,r=t[e],o=n[e],a=e;for(;e<s>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),h=c<s&&n[c]<n[l]?c:l;t[e]=t[h],n[e]=n[h],e=h}t[e]=r,n[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const n=this.elements_,s=this.priorities_,r=n[t],o=s[t];for(;t>e;){const a=this.getParentIndex_(t);if(s[a]>o)n[t]=n[a],s[t]=s[a],t=a;else break}n[t]=r,s[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,n=this.priorities_;let s=0;const r=t.length;let o,a,l;for(a=0;a<r;++a)o=t[a],l=e(o),l==Fn?delete this.queuedElements_[this.keyFunction_(o)]:(n[s]=l,t[s++]=o);t.length=s,n.length=s,this.heapify_()}}const X={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Df extends Of{constructor(e,t){super(function(n){return e.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(H.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,n=t.getState();if(n===X.LOADED||n===X.ERROR||n===X.EMPTY){n!==X.ERROR&&t.removeEventListener(H.CHANGE,this.boundHandleTileChange_);const s=t.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let n=0,s,r,o;for(;this.tilesLoading_<e&&n<t&&this.getCount()>0;)r=this.dequeue()[0],o=r.getKey(),s=r.getState(),s===X.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++n,r.load())}}function kf(i,e,t,n,s){if(!i||!(t in i.wantedTiles)||!i.wantedTiles[t][e.getKey()])return Fn;const r=i.viewState.center,o=n[0]-r[0],a=n[1]-r[1];return 65536*Math.log(s)+Math.sqrt(o*o+a*a)/s}class fr extends tt{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){Ws(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&Ws(this.element);for(let t=0,n=this.listenerKeys.length;t<n;++t)se(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==fi&&this.listenerKeys.push(U(e,yt.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class Ff extends fr{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const t=e.className!==void 0?e.className:"ol-attribution",n=e.tipLabel!==void 0?e.tipLabel:"Attributions",s=e.expandClassName!==void 0?e.expandClassName:t+"-expand",r=e.collapseLabel!==void 0?e.collapseLabel:"›",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=s):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(H.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+qn+" "+ur+(this.collapsed_&&this.collapsible_?" "+vo:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=c,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=Array.from(new Set(this.getMap().getAllLayers().flatMap(s=>s.getAttributions(e)))),n=!this.getMap().getAllLayers().some(s=>s.getSource()&&s.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(n),t}updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=this.collectSourceAttributions_(e),n=t.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!It(t,this.renderedAttributions_)){Tf(this.ulElement_);for(let s=0,r=t.length;s<r;++s){const o=document.createElement("li");o.innerHTML=t[s],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(vo),this.collapsed_?Eo(this.collapseLabel_,this.label_):Eo(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class zf extends fr{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",n=e.label!==void 0?e.label:"⇧",s=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(s));const r=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(H.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+qn+" "+ur,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(pn)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const n=t.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:_i}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const n=t.viewState.rotation;if(n!=this.rotation_){const s="rotate("+n+"rad)";if(this.autoHide_){const r=this.element.classList.contains(pn);!r&&n===0?this.element.classList.add(pn):r&&n!==0&&this.element.classList.remove(pn)}this.label_.style.transform=s}this.rotation_=n}}class Nf extends fr{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",n=e.delta!==void 0?e.delta:1,s=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",r=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=l,h.appendChild(typeof o=="string"?document.createTextNode(o):o),h.addEventListener(H.CLICK,this.handleClick_.bind(this,n),!1);const d=document.createElement("button");d.className=r,d.setAttribute("type","button"),d.title=c,d.appendChild(typeof a=="string"?document.createTextNode(a):a),d.addEventListener(H.CLICK,this.handleClick_.bind(this,-n),!1);const u=t+" "+qn+" "+ur,f=this.element;f.className=u,f.appendChild(h),f.appendChild(d),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const n=this.getMap().getView();if(!n)return;const s=n.getZoom();if(s!==void 0){const r=n.getConstrainedZoom(s+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:r,duration:this.duration_,easing:_i})):n.setZoom(r)}}}function Gf(i){i=i||{};const e=new Ue;return(i.zoom!==void 0?i.zoom:!0)&&e.push(new Nf(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&e.push(new zf(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&e.push(new Ff(i.attributionOptions)),e}const bo={ACTIVE:"active"};class en extends tt{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(bo.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(bo.ACTIVE,e)}setMap(e){this.map_=e}}function Wf(i,e,t){const n=i.getCenterInternal();if(n){const s=[n[0]+e[0],n[1]+e[1]];i.animateInternal({duration:t!==void 0?t:250,easing:Uu,center:i.getConstrainedCenter(s)})}}function mr(i,e,t,n){const s=i.getZoom();if(s===void 0)return;const r=i.getConstrainedZoom(s+e),o=i.getResolutionForZoom(r);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:o,anchor:t,duration:n!==void 0?n:250,easing:_i})}class Xf extends en{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==re.DBLCLICK){const n=e.originalEvent,s=e.map,r=e.coordinate,o=n.shiftKey?-this.delta_:this.delta_,a=s.getView();mr(a,o,r,this.duration_),n.preventDefault(),t=!0}return!t}}class tn extends en{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==re.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==re.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==re.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,t=this.stopDown(n)}else e.type==re.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function gr(i){const e=i.length;let t=0,n=0;for(let s=0;s<e;s++)t+=i[s].clientX,n+=i[s].clientY;return{clientX:t/e,clientY:n/e}}function $s(i){const e=arguments;return function(t){let n=!0;for(let s=0,r=e.length;s<r&&(n=n&&e[s](t),!!n);++s);return n}}const Bf=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Yf=function(i){const e=i.map.getTargetElement(),t=i.map.getOwnerDocument().activeElement;return e.contains(t)},Xa=function(i){return i.map.getTargetElement().hasAttribute("tabindex")?Yf(i):!0},$f=Ni,Ba=function(i){const e=i.originalEvent;return e.button==0&&!(su&&aa&&e.ctrlKey)},Ya=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Hf=function(i){const e=i.originalEvent;return aa?e.metaKey:e.ctrlKey},Zf=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},$a=function(i){const e=i.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},gs=function(i){const e=i.originalEvent;return V(e!==void 0,56),e.pointerType=="mouse"},Vf=function(i){const e=i.originalEvent;return V(e!==void 0,56),e.isPrimary&&e.button===0};class jf extends tn{constructor(e){super({stopDown:Gn}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:$s(Ya,Vf);this.condition_=e.onFocusOnly?$s(Xa,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const n=this.targetPointers,s=t.getEventPixel(gr(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],a=e.map.getView();zu(r,a.getResolution()),nr(r,a.getRotation()),a.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,n=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([a[0]-s*Math.cos(r),a[1]-s*Math.sin(r)]);n.animateInternal({center:n.getConstrainedCenter(l),duration:500,easing:_i})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const n=e.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class qf extends tn{constructor(e){e=e||{},super({stopDown:Gn}),this.condition_=e.condition?e.condition:Bf,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!gs(e))return;const t=e.map,n=t.getView();if(n.getConstraints().rotation===cr)return;const s=t.getSize(),r=e.pixel,o=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return gs(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return gs(e)&&Ba(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class Uf extends qs{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,n="px",s=this.element_.style;s.left=Math.min(e[0],t[0])+n,s.top=Math.min(e[1],t[1])+n,s.width=Math.abs(t[0]-e[0])+n,s.height=Math.abs(t[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,s=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new Bi([s])}getGeometry(){return this.geometry_}}const _n={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class ps extends dt{constructor(e,t,n){super(e),this.coordinate=t,this.mapBrowserEvent=n}}class Kf extends tn{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new Uf(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:Ba,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,n){const s=n[0]-t[0],r=n[1]-t[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new ps(_n.BOXDRAG,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new ps(t?_n.BOXEND:_n.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new ps(_n.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}}class Jf extends Kf{constructor(e){e=e||{};const t=e.condition?e.condition:Zf;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const n=this.getMap().getView();let s=this.getGeometry();if(this.out_){const r=n.rotatedExtentForGeometry(s),o=n.getResolutionForExtentInternal(r),a=n.getResolution()/o;s=s.clone(),s.scale(a*a)}n.fitInternal(s,{duration:this.duration_,easing:_i})}}const Rt={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Qf extends en{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return Ya(t)&&$a(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==H.KEYDOWN){const n=e.originalEvent,s=n.key;if(this.condition_(e)&&(s==Rt.DOWN||s==Rt.LEFT||s==Rt.RIGHT||s==Rt.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;s==Rt.DOWN?c=-a:s==Rt.LEFT?l=-a:s==Rt.RIGHT?l=a:c=a;const h=[l,c];nr(h,o.getRotation()),Wf(o,h,this.duration_),n.preventDefault(),t=!0}}return!t}}class em extends en{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!Hf(t)&&$a(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==H.KEYDOWN||e.type==H.KEYPRESS){const n=e.originalEvent,s=n.key;if(this.condition_(e)&&(s==="+"||s==="-")){const r=e.map,o=s==="+"?this.delta_:-this.delta_,a=r.getView();mr(a,o,void 0,this.duration_),n.preventDefault(),t=!0}}return!t}}class tm{constructor(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let n=t-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const s=this.points_[t+2]-this.points_[n+2];if(s<1e3/60)return!1;const r=this.points_[t]-this.points_[n],o=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class im extends en{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:$f;this.condition_=e.onFocusOnly?$s(Xa,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==H.WHEEL)return!0;const n=e.map,s=e.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let r;if(e.type==H.WHEEL&&(r=s.deltaY,iu&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=la),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),r===0)return!1;this.lastDelta_=r;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const a=n.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=r;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let n=-de(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),mr(t,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class nm extends tn{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Gn),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const n=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-n.clientY,s.clientX-n.clientX);if(this.lastAngle_!==void 0){const l=r-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=r;const o=e.map,a=o.getView();a.getConstraints().rotation!==cr&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(gr(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class sm extends tn{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Gn),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const n=this.targetPointers[0],s=this.targetPointers[1],r=n.clientX-s.clientX,o=n.clientY-s.clientY,a=Math.sqrt(r*r+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,c=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(gr(this.targetPointers))),l.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const n=e.map.getView(),s=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function rm(i){i=i||{};const e=new Ue,t=new tm(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&e.push(new qf),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&e.push(new Xf({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&e.push(new jf({onFocusOnly:i.onFocusOnly,kinetic:t})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&e.push(new nm),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&e.push(new sm({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(e.push(new Qf),e.push(new em({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&e.push(new im({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&e.push(new Jf({duration:i.zoomDuration})),e}function To(i){return i[0]>0&&i[1]>0}function om(i,e,t){return t===void 0&&(t=[0,0]),t[0]=i[0]*e+.5|0,t[1]=i[1]*e+.5|0,t}function Ge(i,e){return Array.isArray(i)?i:(e===void 0?e=[i,i]:(e[0]=i,e[1]=i),e)}function Ha(i){if(i instanceof jn){i.setMapInternal(null);return}i instanceof yi&&i.getLayers().forEach(Ha)}function Za(i,e){if(i instanceof jn){i.setMapInternal(e);return}if(i instanceof yi){const t=i.getLayers().getArray();for(let n=0,s=t.length;n<s;++n)Za(t[n],e)}}class am extends tt{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=lm(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:la,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Je(),this.pixelToCoordinateTransform_=Je(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||Gf(),this.interactions=t.interactions||rm({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Df(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(pe.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(pe.VIEW,this.handleViewChanged_),this.addChangeListener(pe.SIZE,this.handleSizeChanged_),this.addChangeListener(pe.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const n=this;e.view&&!(e.view instanceof je)&&e.view.then(function(s){n.setView(new je(s))}),this.controls.addEventListener(Te.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(Te.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(Te.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(Te.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(Te.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(Te.REMOVE,s=>{const r=s.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Za(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,n){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const r=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.layerFilter!==void 0?n.layerFilter:Ni,a=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,r,a,t,null,o,null)}getFeaturesAtPixel(e,t){const n=[];return this.forEachFeatureAtPixel(e,function(s){n.push(s)},t),n}getAllLayers(){const e=[];function t(n){n.forEach(function(s){s instanceof yi?t(s.getLayers()):e.push(s)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const s=t.layerFilter!==void 0?t.layerFilter:Ni,r=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,o,s,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const n=this.viewport_.getBoundingClientRect(),s=this.getSize(),r=n.width/s[0],o=n.height/s[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-n.left)/r,(a.clientY-n.top)/o]}getTarget(){return this.get(pe.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Gs(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?ge(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(pe.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Ue){t.setLayers(e);return}const n=t.getLayers();n.clear(),n.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const s=e[t];if(!s.visible)continue;const r=s.layer.getRenderer();if(r&&!r.ready)return!0;const o=s.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=at(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?ge(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(pe.SIZE)}getView(){return this.get(pe.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,n,s){return kf(this.frameState_,e,t,n,s)}handleBrowserEvent(e,t){t=t||e.type;const n=new _t(t,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,n=t.type;if(n===Ys.POINTERDOWN||n===H.WHEEL||n===H.KEYDOWN){const s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(r===s?s.documentElement:r).contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){const o=s[r];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let s=this.maxTilesLoading_,r=s;if(e){const o=e.viewHints;if(o[_e.ANIMATING]||o[_e.INTERACTING]){const a=Date.now()-e.time>8;s=a?0:8,r=a?0:2}}t.getTilesLoading()<s&&(t.reprioritize(),t.loadMoreTiles(s,r))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(Qe.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Qe.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new ei(yt.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new ei(yt.LOADSTART,this,e))));const n=this.postRenderFunctions_;for(let s=0,r=n.length;s<r;++s)n[s](this,e);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,s=this.targetChangeHandlerKeys_.length;n<s;++n)se(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(H.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(H.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Ws(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Af(this)),this.mapBrowserEventHandler_=new Pf(this,this.moveTolerance_);for(const r in re)this.mapBrowserEventHandler_.addEventListener(re[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(H.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(H.WHEEL,this.boundHandleBrowserEvent_,ca?{passive:!1}:!1);const n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[U(n,H.KEYDOWN,this.handleBrowserEvent,this),U(n,H.KEYPRESS,this.handleBrowserEvent,this)];const s=t.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(se(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(se(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=U(e,di.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=U(e,H.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(se),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new vt("addlayer",e)),this.layerGroupPropertyListenerKeys_=[U(e,di.PROPERTYCHANGE,this.render,this),U(e,H.CHANGE,this.render,this),U(e,"addlayer",this.handleLayerAdd_,this),U(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const s=e[t].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const e=this.frameState_;e&&this.renderer_.flushDeclutterItems(e)}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Ha(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),n=this.getView(),s=this.frameState_;let r=null;if(t!==void 0&&To(t)&&n&&n.isDef()){const o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=n.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:ks(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:J(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;r.nextExtent=ks(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!Zn(this.previousExtent_)&&!Wi(r.extent,this.previousExtent_))&&(this.dispatchEvent(new ei(yt.MOVESTART,this,s)),this.previousExtent_=Bn(this.previousExtent_)),this.previousExtent_&&!r.viewHints[_e.ANIMATING]&&!r.viewHints[_e.INTERACTING]&&!Wi(r.extent,this.previousExtent_)&&(this.dispatchEvent(new ei(yt.MOVEEND,this,r)),da(r.extent,this.previousExtent_))),this.dispatchEvent(new ei(yt.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(yt.LOADSTART)||this.hasListener(yt.LOADEND)||this.hasListener(Qe.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new vt("removelayer",t)),this.set(pe.LAYERGROUP,e)}setSize(e){this.set(pe.SIZE,e)}setTarget(e){this.set(pe.TARGET,e)}setView(e){if(!e||e instanceof je){this.set(pe.VIEW,e);return}this.set(pe.VIEW,new je);const t=this;e.then(function(n){t.setView(new je(n))})}updateSize(){const e=this.getTargetElement();let t;if(e){const s=getComputedStyle(e),r=e.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=e.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(r)&&!isNaN(o)&&(t=[r,o],!To(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&Sa("No map visible because the map container's width or height are 0."))}const n=this.getSize();t&&(!n||!It(t,n))&&(this.setSize(t),this.updateViewportSize_())}updateViewportSize_(){const e=this.getView();if(e){let t;const n=getComputedStyle(this.viewport_);n.width&&n.height&&(t=[parseInt(n.width,10),parseInt(n.height,10)]),e.setViewportSize(t)}}}function lm(i){let e=null;i.keyboardEventTarget!==void 0&&(e=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const t={},n=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new yi({layers:i.layers});t[pe.LAYERGROUP]=n,t[pe.TARGET]=i.target,t[pe.VIEW]=i.view instanceof je?i.view:new je;let s;i.controls!==void 0&&(Array.isArray(i.controls)?s=new Ue(i.controls.slice()):(V(typeof i.controls.getArray=="function",47),s=i.controls));let r;i.interactions!==void 0&&(Array.isArray(i.interactions)?r=new Ue(i.interactions.slice()):(V(typeof i.interactions.getArray=="function",48),r=i.interactions));let o;return i.overlays!==void 0?Array.isArray(i.overlays)?o=new Ue(i.overlays.slice()):(V(typeof i.overlays.getArray=="function",49),o=i.overlays):o=new Ue,{controls:s,interactions:r,keyboardEventTarget:e,overlays:o,values:t}}const yn={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class cm extends jn{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(yn.PRELOAD)}setPreload(e){this.set(yn.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(yn.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(yn.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}const oe={IDLE:0,LOADING:1,LOADED:2,ERROR:3};class hm extends Ji{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return q()}getData(e){return null}prepareFrame(e){return q()}renderFrame(e,t){return q()}loadedTileCallback(e,t,n){e[t]||(e[t]={}),e[t][n.tileCoord.toString()]=n}createLoadedTileFinder(e,t,n){return(s,r)=>{const o=this.loadedTileCallback.bind(this,n,s);return e.forEachLoadedTile(t,s,r,o)}}forEachFeatureAtCoordinate(e,t,n,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===oe.LOADED||t.getState()===oe.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=oe.LOADED&&t!=oe.ERROR&&e.addEventListener(H.CHANGE,this.boundHandleImageChange_),t==oe.IDLE&&(e.load(),t=e.getState()),t==oe.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const Co=[];let ti=null;function dm(){ti=Ee(1,1,void 0,{willReadFrequently:!0})}class Va extends hm{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Je(),this.pixelTransform=Je(),this.inversePixelTransform=Je(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,n){ti||dm(),ti.clearRect(0,0,1,1);let s;try{ti.drawImage(e,t,n,1,1,0,0,1,1),s=ti.getImageData(0,0,1,1).data}catch{return ti=null,null}return s}getBackground(e){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,t,n){const s=this.getLayer().getClassName();let r,o;if(e&&e.className===s&&(!n||e&&e.style.backgroundColor&&It(wn(e.style.backgroundColor),wn(n)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){r=document.createElement("div"),r.className=s;let a=r.style;a.position="absolute",a.width="100%",a.height="100%",o=Ee();const l=o.canvas;r.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=o}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){const s=Bt(n),r=Hn(n),o=$n(n),a=Yn(n);ge(t.coordinateToPixelTransform,s),ge(t.coordinateToPixelTransform,r),ge(t.coordinateToPixelTransform,o),ge(t.coordinateToPixelTransform,a);const l=this.inversePixelTransform;ge(l,s),ge(l,r),ge(l,o),ge(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,t,n){const s=this.getLayer();if(s.hasListener(e)){const r=new za(e,this.inversePixelTransform,n,t);s.dispatchEvent(r)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_(Qe.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(Qe.POSTRENDER,e,t)}getRenderTransform(e,t,n,s,r,o,a){const l=r/2,c=o/2,h=s/t,d=-h,u=-e[0]+a,f=-e[1];return Tt(this.tempTransform,l,c,h,d,-n,u,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class ja extends Wn{constructor(e,t,n){super(),n=n||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(H.CHANGE)}release(){this.state===X.ERROR&&this.setState(X.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let e=this.interimTile;do{if(e.getState()==X.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){if(!this.interimTile)return;let e=this.interimTile,t=this;do{if(e.getState()==X.LOADED){e.interimTile=null;break}else e.getState()==X.LOADING?t=e:e.getState()==X.IDLE?t.interimTile=e.interimTile:t=e;e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==X.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){q()}getAlpha(e,t){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(!n)n=t,this.transitionStarts_[e]=n;else if(n===-1)return 1;const s=t-n+1e3/60;return s>=this.transition_?1:wa(s/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}function qa(i,e,t){const n=i;let s=!0,r=!1,o=!1;const a=[In(n,H.LOAD,function(){o=!0,r||e()})];return n.src&&ru?(r=!0,n.decode().then(function(){s&&e()}).catch(function(l){s&&(o?e():t())})):a.push(In(n,H.ERROR,t)),function(){s=!1,a.forEach(se)}}class Ua extends ja{constructor(e,t,n,s,r,o){super(e,t,o),this.crossOrigin_=s,this.src_=n,this.key=n,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(e){this.image_=e,this.state=X.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=X.ERROR,this.unlistenImage_(),this.image_=um(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=X.LOADED:this.state=X.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==X.ERROR&&(this.state=X.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==X.IDLE&&(this.state=X.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=qa(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function um(){const i=Ee(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}const fm=.5,mm=10,Io=.25;class gm{constructor(e,t,n,s,r,o){this.sourceProj_=e,this.targetProj_=t;let a={};const l=An(this.targetProj_,this.sourceProj_);this.transformInv_=function(_){const v=_[0]+"/"+_[1];return a[v]||(a[v]=l(_)),a[v]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&ie(s)>=ie(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ie(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ie(this.targetProj_.getExtent()):null;const c=Bt(n),h=Hn(n),d=$n(n),u=Yn(n),f=this.transformInv_(c),m=this.transformInv_(h),g=this.transformInv_(d),y=this.transformInv_(u),p=mm+(o?Math.max(0,Math.ceil(Math.log2(Ds(n)/(o*o*256*256)))):0);if(this.addQuad_(c,h,d,u,f,m,g,y,p),this.wrapsXInSource_){let _=1/0;this.triangles_.forEach(function(v,x,b){_=Math.min(_,v.source[0][0],v.source[1][0],v.source[2][0])}),this.triangles_.forEach(v=>{if(Math.max(v.source[0][0],v.source[1][0],v.source[2][0])-_>this.sourceWorldWidth_/2){const x=[[v.source[0][0],v.source[0][1]],[v.source[1][0],v.source[1][1]],[v.source[2][0],v.source[2][1]]];x[0][0]-_>this.sourceWorldWidth_/2&&(x[0][0]-=this.sourceWorldWidth_),x[1][0]-_>this.sourceWorldWidth_/2&&(x[1][0]-=this.sourceWorldWidth_),x[2][0]-_>this.sourceWorldWidth_/2&&(x[2][0]-=this.sourceWorldWidth_);const b=Math.min(x[0][0],x[1][0],x[2][0]);Math.max(x[0][0],x[1][0],x[2][0])-b<this.sourceWorldWidth_/2&&(v.source=x)}})}a={}}addTriangle_(e,t,n,s,r,o){this.triangles_.push({source:[s,r,o],target:[e,t,n]})}addQuad_(e,t,n,s,r,o,a,l,c){const h=Qr([r,o,a,l]),d=this.sourceWorldWidth_?ie(h)/this.sourceWorldWidth_:null,u=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&d>.5&&d<1;let m=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const y=Qr([e,t,n,s]);m=ie(y)/this.targetWorldWidth_>Io||m}!f&&this.sourceProj_.isGlobal()&&d&&(m=d>Io||m)}if(!m&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!Ie(h,this.maxSourceExtent_))return;let g=0;if(!m&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)m=!0;else if(g=(!isFinite(r[0])||!isFinite(r[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),g!=1&&g!=2&&g!=4&&g!=8)return}if(c>0){if(!m){const y=[(e[0]+n[0])/2,(e[1]+n[1])/2],p=this.transformInv_(y);let _;f?_=(ai(r[0],u)+ai(a[0],u))/2-ai(p[0],u):_=(r[0]+a[0])/2-p[0];const v=(r[1]+a[1])/2-p[1];m=_*_+v*v>this.errorThresholdSquared_}if(m){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const y=[(t[0]+n[0])/2,(t[1]+n[1])/2],p=this.transformInv_(y),_=[(s[0]+e[0])/2,(s[1]+e[1])/2],v=this.transformInv_(_);this.addQuad_(e,t,y,_,r,o,p,v,c-1),this.addQuad_(_,y,n,s,v,p,a,l,c-1)}else{const y=[(e[0]+t[0])/2,(e[1]+t[1])/2],p=this.transformInv_(y),_=[(n[0]+s[0])/2,(n[1]+s[1])/2],v=this.transformInv_(_);this.addQuad_(e,y,_,s,r,p,v,l,c-1),this.addQuad_(y,t,n,_,p,o,a,v,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(g&11)==0&&this.addTriangle_(e,n,s,r,a,l),(g&14)==0&&this.addTriangle_(e,n,t,r,a,o),g&&((g&13)==0&&this.addTriangle_(t,s,e,o,l,r),(g&7)==0&&this.addTriangle_(t,s,n,o,l,a))}calculateSourceExtent(){const e=He();return this.triangles_.forEach(function(t,n,s){const r=t.source;Di(e,r[0]),Di(e,r[1]),Di(e,r[2])}),e}getTriangles(){return this.triangles_}}let _s;const ci=[];function wo(i,e,t,n,s){i.beginPath(),i.moveTo(0,0),i.lineTo(e,t),i.lineTo(n,s),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(e,n)+1,Math.max(t,s)),i.restore()}function ys(i,e){return Math.abs(i[e*4]-210)>2||Math.abs(i[e*4+3]-.75*255)>2}function pm(){if(_s===void 0){const i=Ee(6,6,ci);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",wo(i,4,5,4,0),wo(i,4,5,0,5);const e=i.getImageData(0,0,3,3).data;_s=ys(e,0)||ys(e,4)||ys(e,8),Un(i),ci.push(i.canvas)}return _s}function Lo(i,e,t,n){const s=Ca(t,e,i);let r=oo(e,n,t);const o=e.getMetersPerUnit();o!==void 0&&(r*=o);const a=i.getMetersPerUnit();a!==void 0&&(r/=a);const l=i.getExtent();if(!l||Xn(l,s)){const c=oo(i,r,s)/r;isFinite(c)&&c>0&&(r/=c)}return r}function _m(i,e,t,n){const s=mi(t);let r=Lo(i,e,s,n);return(!isFinite(r)||r<=0)&&ga(t,function(o){return r=Lo(i,e,o,n),isFinite(r)&&r>0}),r}function ym(i,e,t,n,s,r,o,a,l,c,h,d){const u=Ee(Math.round(t*i),Math.round(t*e),ci);if(d||(u.imageSmoothingEnabled=!1),l.length===0)return u.canvas;u.scale(t,t);function f(x){return Math.round(x*t)/t}u.globalCompositeOperation="lighter";const m=He();l.forEach(function(x,b,I){uu(m,x.extent)});const g=ie(m),y=et(m),p=Ee(Math.round(t*g/n),Math.round(t*y/n),ci);d||(p.imageSmoothingEnabled=!1);const _=t/n;l.forEach(function(x,b,I){const P=x.extent[0]-m[0],L=-(x.extent[3]-m[3]),O=ie(x.extent),k=et(x.extent);x.image.width>0&&x.image.height>0&&p.drawImage(x.image,c,c,x.image.width-2*c,x.image.height-2*c,P*_,L*_,O*_,k*_)});const v=Bt(o);return a.getTriangles().forEach(function(x,b,I){const P=x.source,L=x.target;let O=P[0][0],k=P[0][1],T=P[1][0],S=P[1][1],E=P[2][0],C=P[2][1];const R=f((L[0][0]-v[0])/r),w=f(-(L[0][1]-v[1])/r),M=f((L[1][0]-v[0])/r),A=f(-(L[1][1]-v[1])/r),F=f((L[2][0]-v[0])/r),z=f(-(L[2][1]-v[1])/r),Z=O,D=k;O=0,k=0,T-=Z,S-=D,E-=Z,C-=D;const N=[[T,S,0,0,M-R],[E,C,0,0,F-R],[0,0,T,S,A-w],[0,0,E,C,z-w]],G=vu(N);if(G){if(u.save(),u.beginPath(),pm()||!d){u.moveTo(M,A);const B=4,ee=R-M,K=w-A;for(let $=0;$<B;$++)u.lineTo(M+f(($+1)*ee/B),A+f($*K/(B-1))),$!=B-1&&u.lineTo(M+f(($+1)*ee/B),A+f(($+1)*K/(B-1)));u.lineTo(F,z)}else u.moveTo(M,A),u.lineTo(R,w),u.lineTo(F,z);u.clip(),u.transform(G[0],G[2],G[1],G[3],R,w),u.translate(m[0]-Z,m[3]-D),u.scale(n/t,-n/t),u.drawImage(p.canvas,0,0),u.restore()}}),Un(p),ci.push(p.canvas),h&&(u.save(),u.globalCompositeOperation="source-over",u.strokeStyle="black",u.lineWidth=1,a.getTriangles().forEach(function(x,b,I){const P=x.target,L=(P[0][0]-v[0])/r,O=-(P[0][1]-v[1])/r,k=(P[1][0]-v[0])/r,T=-(P[1][1]-v[1])/r,S=(P[2][0]-v[0])/r,E=-(P[2][1]-v[1])/r;u.beginPath(),u.moveTo(k,T),u.lineTo(L,O),u.lineTo(S,E),u.closePath(),u.stroke()}),u.restore()),u.canvas}class Hs extends ja{constructor(e,t,n,s,r,o,a,l,c,h,d,u){super(r,X.IDLE,{interpolate:!!u}),this.renderEdges_=d!==void 0?d:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=s,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const f=s.getTileCoordExtent(this.wrappedTileCoord_),m=this.targetTileGrid_.getExtent();let g=this.sourceTileGrid_.getExtent();const y=m?ki(f,m):f;if(Ds(y)===0){this.state=X.EMPTY;return}const p=e.getExtent();p&&(g?g=ki(g,p):g=p);const _=s.getResolution(this.wrappedTileCoord_[0]),v=_m(e,n,y,_);if(!isFinite(v)||v<=0){this.state=X.EMPTY;return}const x=h!==void 0?h:fm;if(this.triangulation_=new gm(e,n,y,g,v*x,_),this.triangulation_.getTriangles().length===0){this.state=X.EMPTY;return}this.sourceZ_=t.getZForResolution(v);let b=this.triangulation_.calculateSourceExtent();if(g&&(e.canWrapX()?(b[1]=de(b[1],g[1],g[3]),b[3]=de(b[3],g[1],g[3])):b=ki(b,g)),!Ds(b))this.state=X.EMPTY;else{const I=t.getTileRangeForExtentAndZ(b,this.sourceZ_);for(let P=I.minX;P<=I.maxX;P++)for(let L=I.minY;L<=I.maxY;L++){const O=c(this.sourceZ_,P,L,a);O&&this.sourceTiles_.push(O)}this.sourceTiles_.length===0&&(this.state=X.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{t&&t.getState()==X.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}),this.sourceTiles_.length=0,e.length===0)this.state=X.ERROR;else{const t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),s=typeof n=="number"?n:n[0],r=typeof n=="number"?n:n[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=ym(s,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=X.LOADED}this.changed()}load(){if(this.state==X.IDLE){this.state=X.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(t=>{const n=t.getState();if(n==X.IDLE||n==X.LOADING){e++;const s=U(t,H.CHANGE,function(r){const o=t.getState();(o==X.LOADED||o==X.ERROR||o==X.EMPTY)&&(se(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,n,s){t.getState()==X.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(se),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Un(this.canvas_.getContext("2d")),ci.push(this.canvas_),this.canvas_=null),super.release()}}class pr{constructor(e,t,n,s){this.minX=e,this.maxX=t,this.minY=n,this.maxY=s}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function jt(i,e,t,n,s){return s!==void 0?(s.minX=i,s.maxX=e,s.minY=t,s.maxY=n,s):new pr(i,e,t,n)}class vm extends Va{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=He(),this.tmpTileRange_=new pr(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),n=e.getState(),s=t.getUseInterimTilesOnError();return n==X.LOADED||n==X.EMPTY||n==X.ERROR&&!s}getTile(e,t,n,s){const r=s.pixelRatio,o=s.viewState.projection,a=this.getLayer();let c=a.getSource().getTile(e,t,n,r,o);return c.getState()==X.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),s=ge(t.pixelToCoordinateTransform,e.slice()),r=n.getExtent();if(r&&!Xn(r,s))return null;const o=t.pixelRatio,a=t.viewState.projection,l=t.viewState,c=n.getRenderSource(),h=c.getTileGridForProjection(l.projection),d=c.getTilePixelRatio(t.pixelRatio);for(let u=h.getZForResolution(l.resolution);u>=h.getMinZoom();--u){const f=h.getTileCoordForCoordAndZ(s,u),m=c.getTile(u,f[1],f[2],o,a);if(!(m instanceof Ua||m instanceof Hs)||m instanceof Hs&&m.getState()===X.EMPTY)return null;if(m.getState()!==X.LOADED)continue;const g=h.getOrigin(u),y=Ge(h.getTileSize(u)),p=h.getResolution(u),_=Math.floor(d*((s[0]-g[0])/p-f[1]*y[0])),v=Math.floor(d*((g[1]-s[1])/p-f[2]*y[1])),x=Math.round(d*c.getGutterForProjection(l.projection));return this.getImageData(m.getImage(),_+x,v+x)}return null}loadedTileCallback(e,t,n){return this.isDrawableTile(n)?super.loadedTileCallback(e,t,n):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex],s=e.viewState,r=s.projection,o=s.resolution,a=s.center,l=s.rotation,c=e.pixelRatio,h=this.getLayer(),d=h.getSource(),u=d.getRevision(),f=d.getTileGridForProjection(r),m=f.getZForResolution(o,d.zDirection),g=f.getResolution(m);let y=e.extent;const p=e.viewState.resolution,_=d.getTilePixelRatio(c),v=Math.round(ie(y)/p*c),x=Math.round(et(y)/p*c),b=n.extent&&Ot(n.extent);b&&(y=ki(y,Ot(n.extent)));const I=g*v/2/_,P=g*x/2/_,L=[a[0]-I,a[1]-P,a[0]+I,a[1]+P],O=f.getTileRangeForExtentAndZ(y,m),k={};k[m]={};const T=this.createLoadedTileFinder(d,r,k),S=this.tmpExtent,E=this.tmpTileRange_;this.newTiles_=!1;const C=l?Fs(s.center,p,l,e.size):void 0;for(let N=O.minX;N<=O.maxX;++N)for(let G=O.minY;G<=O.maxY;++G){if(l&&!f.tileCoordIntersectsViewport([m,N,G],C))continue;const B=this.getTile(m,N,G,e);if(this.isDrawableTile(B)){const $=J(this);if(B.getState()==X.LOADED){k[m][B.tileCoord.toString()]=B;let te=B.inTransition($);te&&n.opacity!==1&&(B.endTransition($),te=!1),!this.newTiles_&&(te||!this.renderedTiles.includes(B))&&(this.newTiles_=!0)}if(B.getAlpha($,e.time)===1)continue}const ee=f.getTileCoordChildTileRange(B.tileCoord,E,S);let K=!1;ee&&(K=T(m+1,ee)),K||f.forEachTileCoordParentTileRange(B.tileCoord,T,E,S)}const R=g/o*c/_;Tt(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/c,1/c,l,-v/2,-x/2);const w=ha(this.pixelTransform);this.useContainer(t,w,this.getBackground(e));const M=this.context,A=M.canvas;Js(this.inversePixelTransform,this.pixelTransform),Tt(this.tempTransform,v/2,x/2,R,R,0,-v/2,-x/2),A.width!=v||A.height!=x?(A.width=v,A.height=x):this.containerReused||M.clearRect(0,0,v,x),b&&this.clipUnrotated(M,e,b),d.getInterpolate()||(M.imageSmoothingEnabled=!1),this.preRender(M,e),this.renderedTiles.length=0;let F=Object.keys(k).map(Number);F.sort(ui);let z,Z,D;n.opacity===1&&(!this.containerReused||d.getOpaque(e.viewState.projection))?F=F.reverse():(z=[],Z=[]);for(let N=F.length-1;N>=0;--N){const G=F[N],B=d.getTilePixelSize(G,c,r),K=f.getResolution(G)/g,$=B[0]*K*R,te=B[1]*K*R,ue=f.getTileCoordForCoordAndZ(Bt(L),G),fe=f.getTileCoordExtent(ue),le=ge(this.tempTransform,[_*(fe[0]-L[0])/g,_*(L[3]-fe[3])/g]),j=_*d.getGutterForProjection(r),Y=k[G];for(const ne in Y){const ce=Y[ne],we=ce.tileCoord,Ve=ue[1]-we[1],on=Math.round(le[0]-(Ve-1)*$),Yt=ue[2]-we[2],is=Math.round(le[1]-(Yt-1)*te),Se=Math.round(le[0]-Ve*$),Oe=Math.round(le[1]-Yt*te),We=on-Se,it=is-Oe,$t=m===G,wt=$t&&ce.getAlpha(J(this),e.time)!==1;let ut=!1;if(!wt)if(z){D=[Se,Oe,Se+We,Oe,Se+We,Oe+it,Se,Oe+it];for(let Ht=0,an=z.length;Ht<an;++Ht)if(m!==G&&G<Z[Ht]){const xe=z[Ht];Ie([Se,Oe,Se+We,Oe+it],[xe[0],xe[3],xe[4],xe[7]])&&(ut||(M.save(),ut=!0),M.beginPath(),M.moveTo(D[0],D[1]),M.lineTo(D[2],D[3]),M.lineTo(D[4],D[5]),M.lineTo(D[6],D[7]),M.moveTo(xe[6],xe[7]),M.lineTo(xe[4],xe[5]),M.lineTo(xe[2],xe[3]),M.lineTo(xe[0],xe[1]),M.clip())}z.push(D),Z.push(G)}else M.clearRect(Se,Oe,We,it);this.drawTileImage(ce,e,Se,Oe,We,it,j,$t),z&&!wt?(ut&&M.restore(),this.renderedTiles.unshift(ce)):this.renderedTiles.push(ce),this.updateUsedTiles(e.usedTiles,d,ce)}}return this.renderedRevision=u,this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!Wi(this.renderedExtent_,L),this.renderedExtent_=L,this.renderedPixelRatio=c,this.renderedProjection=r,this.manageTilePyramid(e,d,f,c,r,y,m,h.getPreload()),this.scheduleExpireCache(e,d),this.postRender(M,e),n.extent&&M.restore(),M.imageSmoothingEnabled=!0,w!==A.style.transform&&(A.style.transform=w),this.container}drawTileImage(e,t,n,s,r,o,a,l){const c=this.getTileImage(e);if(!c)return;const h=J(this),d=t.layerStatesArray[t.layerIndex],u=d.opacity*(l?e.getAlpha(h,t.time):1),f=u!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=u),this.context.drawImage(c,a,a,c.width-2*a,c.height-2*a,n,s,r,o),f&&this.context.restore(),u!==d.opacity?t.animate=!0:l&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const n=(function(s,r,o){const a=J(s);a in o.usedTiles&&s.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,t);e.postRenderFunctions.push(n)}}updateUsedTiles(e,t,n){const s=J(t);s in e||(e[s]={}),e[s][n.getKey()]=!0}manageTilePyramid(e,t,n,s,r,o,a,l,c){const h=J(t);h in e.wantedTiles||(e.wantedTiles[h]={});const d=e.wantedTiles[h],u=e.tileQueue,f=n.getMinZoom(),m=e.viewState.rotation,g=m?Fs(e.viewState.center,e.viewState.resolution,m,e.size):void 0;let y=0,p,_,v,x,b,I;for(I=f;I<=a;++I)for(_=n.getTileRangeForExtentAndZ(o,I,_),v=n.getResolution(I),x=_.minX;x<=_.maxX;++x)for(b=_.minY;b<=_.maxY;++b)m&&!n.tileCoordIntersectsViewport([I,x,b],g)||(a-I<=l?(++y,p=t.getTile(I,x,b,s,r),p.getState()==X.IDLE&&(d[p.getKey()]=!0,u.isKeyQueued(p.getKey())||u.enqueue([p,h,n.getTileCoordCenter(p.tileCoord),v])),c!==void 0&&c(p)):t.useTile(I,x,b,r));t.updateCacheSize(y,r)}}class xm extends cm{constructor(e){super(e)}createRenderer(){return new vm(this)}}function Em(i,e,t,n,s){Ka(i,e,t||0,n||i.length-1,s||Sm)}function Ka(i,e,t,n,s){for(;n>t;){if(n-t>600){var r=n-t+1,o=e-t+1,a=Math.log(r),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(r-l)/r)*(o-r/2<0?-1:1),h=Math.max(t,Math.floor(e-o*l/r+c)),d=Math.min(n,Math.floor(e+(r-o)*l/r+c));Ka(i,e,h,d,s)}var u=i[e],f=t,m=n;for(bi(i,t,e),s(i[n],u)>0&&bi(i,t,n);f<m;){for(bi(i,f,m),f++,m--;s(i[f],u)<0;)f++;for(;s(i[m],u)>0;)m--}s(i[t],u)===0?bi(i,t,m):(m++,bi(i,m,n)),m<=e&&(t=m+1),e<=m&&(n=m-1)}}function bi(i,e,t){var n=i[e];i[e]=i[t],i[t]=n}function Sm(i,e){return i<e?-1:i>e?1:0}let Ja=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const n=[];if(!xn(e,t))return n;const s=this.toBBox,r=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],l=t.leaf?s(a):a;xn(e,l)&&(t.leaf?n.push(a):xs(e,l)?this._all(a,n):r.push(a))}t=r.pop()}return n}collides(e){let t=this.data;if(!xn(e,t))return!1;const n=[];for(;t;){for(let s=0;s<t.children.length;s++){const r=t.children[s],o=t.leaf?this.toBBox(r):r;if(xn(e,o)){if(t.leaf||xs(e,o))return!0;n.push(r)}}t=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const n=this.data;this.data=t,t=n}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=ii([]),this}remove(e,t){if(!e)return this;let n=this.data;const s=this.toBBox(e),r=[],o=[];let a,l,c;for(;n||r.length;){if(n||(n=r.pop(),l=r[r.length-1],a=o.pop(),c=!0),n.leaf){const h=bm(e,n.children,t);if(h!==-1)return n.children.splice(h,1),r.push(n),this._condense(r),this}!c&&!n.leaf&&xs(n,s)?(r.push(n),o.push(a),a=0,l=n,n=n.children[0]):l?(a++,n=l.children[a],c=!1):n=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,s){const r=n-t+1;let o=this._maxEntries,a;if(r<=o)return a=ii(e.slice(t,n+1)),qt(a,this.toBBox),a;s||(s=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,s-1))),a=ii([]),a.leaf=!1,a.height=s;const l=Math.ceil(r/o),c=l*Math.ceil(Math.sqrt(o));Mo(e,t,n,c,this.compareMinX);for(let h=t;h<=n;h+=c){const d=Math.min(h+c-1,n);Mo(e,h,d,l,this.compareMinY);for(let u=h;u<=d;u+=l){const f=Math.min(u+l-1,d);a.children.push(this._build(e,u,f,s-1))}}return qt(a,this.toBBox),a}_chooseSubtree(e,t,n,s){for(;s.push(t),!(t.leaf||s.length-1===n);){let r=1/0,o=1/0,a;for(let l=0;l<t.children.length;l++){const c=t.children[l],h=vs(c),d=Im(e,c)-h;d<o?(o=d,r=h<r?h:r,a=c):d===o&&h<r&&(r=h,a=c)}t=a||t.children[0]}return t}_insert(e,t,n){const s=n?e:this.toBBox(e),r=[],o=this._chooseSubtree(s,this.data,t,r);for(o.children.push(e),Ai(o,s);t>=0&&r[t].children.length>this._maxEntries;)this._split(r,t),t--;this._adjustParentBBoxes(s,r,t)}_split(e,t){const n=e[t],s=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,s);const o=this._chooseSplitIndex(n,r,s),a=ii(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,qt(n,this.toBBox),qt(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)}_splitRoot(e,t){this.data=ii([e,t]),this.data.height=e.height+1,this.data.leaf=!1,qt(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let s,r=1/0,o=1/0;for(let a=t;a<=n-t;a++){const l=Ri(e,0,a,this.toBBox),c=Ri(e,a,n,this.toBBox),h=wm(l,c),d=vs(l)+vs(c);h<r?(r=h,s=a,o=d<o?d:o):h===r&&d<o&&(o=d,s=a)}return s||n-t}_chooseSplitAxis(e,t,n){const s=e.leaf?this.compareMinX:Tm,r=e.leaf?this.compareMinY:Cm,o=this._allDistMargin(e,t,n,s),a=this._allDistMargin(e,t,n,r);o<a&&e.children.sort(s)}_allDistMargin(e,t,n,s){e.children.sort(s);const r=this.toBBox,o=Ri(e,0,t,r),a=Ri(e,n-t,n,r);let l=vn(o)+vn(a);for(let c=t;c<n-t;c++){const h=e.children[c];Ai(o,e.leaf?r(h):h),l+=vn(o)}for(let c=n-t-1;c>=t;c--){const h=e.children[c];Ai(a,e.leaf?r(h):h),l+=vn(a)}return l}_adjustParentBBoxes(e,t,n){for(let s=n;s>=0;s--)Ai(t[s],e)}_condense(e){for(let t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():qt(e[t],this.toBBox)}};function bm(i,e,t){if(!t)return e.indexOf(i);for(let n=0;n<e.length;n++)if(t(i,e[n]))return n;return-1}function qt(i,e){Ri(i,0,i.children.length,e,i)}function Ri(i,e,t,n,s){s||(s=ii(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let r=e;r<t;r++){const o=i.children[r];Ai(s,i.leaf?n(o):o)}return s}function Ai(i,e){return i.minX=Math.min(i.minX,e.minX),i.minY=Math.min(i.minY,e.minY),i.maxX=Math.max(i.maxX,e.maxX),i.maxY=Math.max(i.maxY,e.maxY),i}function Tm(i,e){return i.minX-e.minX}function Cm(i,e){return i.minY-e.minY}function vs(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function vn(i){return i.maxX-i.minX+(i.maxY-i.minY)}function Im(i,e){return(Math.max(e.maxX,i.maxX)-Math.min(e.minX,i.minX))*(Math.max(e.maxY,i.maxY)-Math.min(e.minY,i.minY))}function wm(i,e){const t=Math.max(i.minX,e.minX),n=Math.max(i.minY,e.minY),s=Math.min(i.maxX,e.maxX),r=Math.min(i.maxY,e.maxY);return Math.max(0,s-t)*Math.max(0,r-n)}function xs(i,e){return i.minX<=e.minX&&i.minY<=e.minY&&e.maxX<=i.maxX&&e.maxY<=i.maxY}function xn(i,e){return e.minX<=i.maxX&&e.minY<=i.maxY&&e.maxX>=i.minX&&e.maxY>=i.minY}function ii(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Mo(i,e,t,n,s){const r=[e,t];for(;r.length;){if(t=r.pop(),e=r.pop(),t-e<=n)continue;const o=e+Math.ceil((t-e)/n/2)*n;Em(i,o,e,t,s),r.push(e,o,o,t)}}class Kn{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Ge(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Kn({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return q()}getImage(e){return q()}getHitDetectionImage(){return q()}getPixelRatio(e){return 1}getImageState(){return q()}getImageSize(){return q()}getOrigin(){return q()}getSize(){return q()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Ge(e)}listenImageChange(e){q()}load(){q()}unlistenImageChange(e){q()}}function Ke(i){return Array.isArray(i)?ya(i):i}class Jn extends Kn{constructor(e){const t=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:1,rotateWithView:t,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius!==void 0?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const e=this.getScale(),t=new Jn({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_;if(!e)return null;const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(e){let t=this.canvas_[e];if(!t){const n=this.renderOptions_,s=Ee(n.size*e,n.size*e);this.draw_(n,s,e),t=s.canvas,this.canvas_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return oe.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let s=this.radius_,r=this.radius2_===void 0?s:this.radius2_;if(s<r){const I=s;s=r,r=I}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=r*Math.sin(a),c=Math.sqrt(r*r-l*l),h=s-c,d=Math.sqrt(l*l+h*h),u=d/l;if(e==="miter"&&u<=n)return u*t;const f=t/2/u,m=t/2*(h/d),y=Math.sqrt((s+f)*(s+f)+m*m)-s;if(this.radius2_===void 0||e==="bevel")return y*2;const p=s*Math.sin(a),_=Math.sqrt(s*s-p*p),v=r-_,b=Math.sqrt(p*p+v*v)/p;if(b<=n){const I=b*t/2-r-s;return 2*Math.max(y,I)}return y*2}createRenderOptions(){let e=gi,t=0,n=null,s=0,r,o=0;this.stroke_&&(r=this.stroke_.getColor(),r===null&&(r=$i),r=Ke(r),o=this.stroke_.getWidth(),o===void 0&&(o=Zi),n=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),e===void 0&&(e=gi),t=this.stroke_.getMiterLimit(),t===void 0&&(t=Yi));const a=this.calculateLineJoinSize_(e,o,t),l=Math.max(this.radius_,this.radius2_||0),c=Math.ceil(2*l+a);return{strokeStyle:r,strokeWidth:o,size:c,lineDash:n,lineDashOffset:s,lineJoin:e,miterLimit:t}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvas_={},this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let s=this.fill_.getColor();s===null&&(s=Ce),t.fillStyle=Ke(s),t.fill()}this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){if(this.fill_){let t=this.fill_.getColor(),n=0;if(typeof t=="string"&&(t=wn(t)),t===null?n=1:Array.isArray(t)&&(n=t.length===4?t[3]:1),n===0){const s=Ee(e.size,e.size);this.hitDetectionCanvas_=s.canvas,this.drawHitDetectionCanvas_(e,s)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(e){let t=this.points_;const n=this.radius_;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{const s=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(t*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const l=r+a*o,c=a%2===0?n:s;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Ce,t.fill(),this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}class Qn extends Jn{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Qn({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}class nn{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null}clone(){const e=this.getColor();return new nn({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}class es{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new es({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class Wt{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=Ro,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Wt({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Ro,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function Lm(i){let e;if(typeof i=="function")e=i;else{let t;Array.isArray(i)?t=i:(V(typeof i.getZIndex=="function",41),t=[i]),e=function(){return t}}return e}let Es=null;function Mm(i,e){if(!Es){const t=new nn({color:"rgba(255,255,255,0.4)"}),n=new es({color:"#3399CC",width:1.25});Es=[new Wt({image:new Qn({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return Es}function Ro(i){return i.getGeometry()}let Ti=null;class Rm extends Wn{constructor(e,t,n,s,r,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=s,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=r,this.size_=n,this.src_=t,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===oe.LOADED){Ti||(Ti=Ee(1,1,void 0,{willReadFrequently:!0})),Ti.drawImage(this.image_,0,0);try{Ti.getImageData(0,0,1,1),this.tainted_=!1}catch{Ti=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(H.CHANGE)}handleImageError_(){this.imageState_=oe.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=oe.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],n=Ee(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===oe.IDLE){this.image_||this.initializeImage_(),this.imageState_=oe.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=qa(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==oe.LOADED)return;const t=this.image_,n=document.createElement("canvas");n.width=Math.ceil(t.width*e),n.height=Math.ceil(t.height*e);const s=n.getContext("2d");s.scale(e,e),s.drawImage(t,0,0),s.globalCompositeOperation="multiply",s.fillStyle=_a(this.color_),s.fillRect(0,0,n.width/e,n.height/e),s.globalCompositeOperation="destination-in",s.drawImage(t,0,0),this.canvas_[e]=n}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function Am(i,e,t,n,s,r){let o=Ln.get(e,n,r);return o||(o=new Rm(i,e,t,n,s,r),Ln.set(e,n,r,o)),o}function Ao(i,e,t,n){return t!==void 0&&n!==void 0?[t/i,n/e]:t!==void 0?t/i:n!==void 0?n/e:1}class sn extends Kn{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,s=e.scale!==void 0?e.scale:1,r=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:n,scale:s,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:r,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;this.imgSize_=e.imgSize;let a=e.src;V(!(a!==void 0&&o),4),V(!o||o&&this.imgSize_,5),(a===void 0||a.length===0)&&o&&(a=o.src||J(o)),V(a!==void 0&&a.length>0,6),V(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),69);const l=e.src!==void 0?oe.IDLE:oe.LOADED;if(this.color_=e.color!==void 0?wn(e.color):null,this.iconImage_=Am(o,a,this.imgSize_!==void 0?this.imgSize_:null,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let c,h;if(e.size)[c,h]=e.size;else{const d=this.getImage(1);if(d instanceof HTMLCanvasElement||d.src&&d.complete)c=d.width,h=d.height;else{this.initialOptions_=e;const u=()=>{if(this.unlistenImageChange(u),!this.initialOptions_)return;const f=this.iconImage_.getSize();this.setScale(Ao(f[0],f[1],e.width,e.height))};this.listenImageChange(u);return}}c!==void 0&&this.setScale(Ao(c,h,e.width,e.height))}}clone(){let e,t,n;return this.initialOptions_?(t=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new sn({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=s[0]),this.anchorYUnits_=="fraction"&&(e[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+s[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=n[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==oe.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==oe.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(H.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(H.CHANGE,e)}}const Pm="#333";class _r{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Ge(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new nn({color:Pm}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding}clone(){const e=this.getScale();return new _r({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Ge(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}function Po(i){return new Wt({fill:Vi(i,""),stroke:ji(i,""),text:Om(i),image:Dm(i)})}function Vi(i,e){const t=i[e+"fill-color"];if(t)return t==="none"?null:new nn({color:t})}function ji(i,e){const t=i[e+"stroke-width"],n=i[e+"stroke-color"];if(!(!t&&!n))return new es({width:t,color:n,lineCap:i[e+"stroke-line-cap"],lineJoin:i[e+"stroke-line-join"],lineDash:i[e+"stroke-line-dash"],lineDashOffset:i[e+"stroke-line-dash-offset"],miterLimit:i[e+"stroke-miter-limit"]})}function Om(i){const e=i["text-value"];return e?new _r({text:e,font:i["text-font"],maxAngle:i["text-max-angle"],offsetX:i["text-offset-x"],offsetY:i["text-offset-y"],overflow:i["text-overflow"],placement:i["text-placement"],repeat:i["text-repeat"],scale:i["text-scale"],rotateWithView:i["text-rotate-with-view"],rotation:i["text-rotation"],textAlign:i["text-align"],justify:i["text-justify"],textBaseline:i["text-baseline"],padding:i["text-padding"],fill:Vi(i,"text-"),backgroundFill:Vi(i,"text-background-"),stroke:ji(i,"text-"),backgroundStroke:ji(i,"text-background-")}):void 0}function Dm(i){const e=i["icon-src"],t=i["icon-img"];if(e||t)return new sn({src:e,img:t,imgSize:i["icon-img-size"],anchor:i["icon-anchor"],anchorOrigin:i["icon-anchor-origin"],anchorXUnits:i["icon-anchor-x-units"],anchorYUnits:i["icon-anchor-y-units"],color:i["icon-color"],crossOrigin:i["icon-cross-origin"],offset:i["icon-offset"],displacement:i["icon-displacement"],opacity:i["icon-opacity"],scale:i["icon-scale"],width:i["icon-width"],height:i["icon-height"],rotation:i["icon-rotation"],rotateWithView:i["icon-rotate-with-view"],size:i["icon-size"],declutterMode:i["icon-declutter-mode"]});const n=i["shape-points"];if(n){const r="shape-";return new Jn({points:n,fill:Vi(i,r),stroke:ji(i,r),radius:i["shape-radius"],radius1:i["shape-radius1"],radius2:i["shape-radius2"],angle:i["shape-angle"],displacement:i["shape-displacement"],rotation:i["shape-rotation"],rotateWithView:i["shape-rotate-with-view"],scale:i["shape-scale"],declutterMode:i["shape-declutter-mode"]})}const s=i["circle-radius"];if(s){const r="circle-";return new Qn({radius:s,fill:Vi(i,r),stroke:ji(i,r),displacement:i["circle-displacement"],scale:i["circle-scale"],rotation:i["circle-rotation"],rotateWithView:i["circle-rotate-with-view"],declutterMode:i["circle-declutter-mode"]})}}const Oo={RENDER_ORDER:"renderOrder"};class km extends jn{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter!==void 0?e.declutter:!1,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Oo.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new Ja(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set(Oo.RENDER_ORDER,e)}setStyle(e){let t;if(e===void 0)t=Mm;else if(e===null)t=null;else if(typeof e=="function")t=e;else if(e instanceof Wt)t=e;else if(Array.isArray(e)){const n=e.length,s=new Array(n);for(let r=0;r<n;++r){const o=e[r];o instanceof Wt?s[r]=o:s[r]=Po(o)}t=s}else t=Po(e);this.style_=t,this.styleFunction_=e===null?void 0:Lm(this.style_),this.changed()}}const W={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},En=[W.FILL],St=[W.STROKE],Ft=[W.BEGIN_PATH],Do=[W.CLOSE_PATH];class Qa{drawCustom(e,t,n,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class rn extends Qa{constructor(e,t,n,s){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(n){return n*t})}appendFlatPointCoordinates(e,t){const n=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,r=this.coordinates;let o=r.length;for(let a=0,l=e.length;a<l;a+=t)s[0]=e[a],s[1]=e[a+1],Xn(n,s)&&(r[o++]=s[0],r[o++]=s[1]);return o}appendFlatLineCoordinates(e,t,n,s,r,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(t+=s);let h=e[t],d=e[t+1];const u=this.tmpCoordinate_;let f=!0,m,g,y;for(m=t+s;m<n;m+=s)u[0]=e[m],u[1]=e[m+1],y=Os(c,u),y!==g?(f&&(a[l++]=h,a[l++]=d,f=!1),a[l++]=u[0],a[l++]=u[1]):y===me.INTERSECTING?(a[l++]=u[0],a[l++]=u[1],f=!1):f=!0,h=u[0],d=u[1],g=y;return(r&&f||m===t+s)&&(a[l++]=h,a[l++]=d),l}drawCustomCoordinates_(e,t,n,s,r){for(let o=0,a=n.length;o<a;++o){const l=n[o],c=this.appendFlatLineCoordinates(e,t,l,s,!1,!1);r.push(c),t=l}return t}drawCustom(e,t,n,s){this.beginGeometry(e,t);const r=e.getType(),o=e.getStride(),a=this.coordinates.length;let l,c,h,d,u;switch(r){case"MultiPolygon":l=e.getOrientedFlatCoordinates(),d=[];const f=e.getEndss();u=0;for(let m=0,g=f.length;m<g;++m){const y=[];u=this.drawCustomCoordinates_(l,u,f[m],o,y),d.push(y)}this.instructions.push([W.CUSTOM,a,d,e,n,po]),this.hitDetectionInstructions.push([W.CUSTOM,a,d,e,s||n,po]);break;case"Polygon":case"MultiLineString":h=[],l=r=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),u=this.drawCustomCoordinates_(l,0,e.getEnds(),o,h),this.instructions.push([W.CUSTOM,a,h,e,n,Pn]),this.hitDetectionInstructions.push([W.CUSTOM,a,h,e,s||n,Pn]);break;case"LineString":case"Circle":l=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([W.CUSTOM,a,c,e,n,ri]),this.hitDetectionInstructions.push([W.CUSTOM,a,c,e,s||n,ri]);break;case"MultiPoint":l=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(l,o),c>a&&(this.instructions.push([W.CUSTOM,a,c,e,n,ri]),this.hitDetectionInstructions.push([W.CUSTOM,a,c,e,s||n,ri]));break;case"Point":l=e.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),c=this.coordinates.length,this.instructions.push([W.CUSTOM,a,c,e,n]),this.hitDetectionInstructions.push([W.CUSTOM,a,c,e,s||n]);break}this.endGeometry(t)}beginGeometry(e,t){this.beginGeometryInstruction1_=[W.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[W.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const n=e.length;let s,r,o=-1;for(t=0;t<n;++t)s=e[t],r=s[0],r==W.END_GEOMETRY?o=t:r==W.BEGIN_GEOMETRY&&(s[2]=t,Ud(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const n=this.state;if(e){const s=e.getColor();n.fillStyle=Ke(s||Ce)}else n.fillStyle=void 0;if(t){const s=t.getColor();n.strokeStyle=Ke(s||$i);const r=t.getLineCap();n.lineCap=r!==void 0?r:On;const o=t.getLineDash();n.lineDash=o?o.slice():ct;const a=t.getLineDashOffset();n.lineDashOffset=a||ht;const l=t.getLineJoin();n.lineJoin=l!==void 0?l:gi;const c=t.getWidth();n.lineWidth=c!==void 0?c:Zi;const h=t.getMiterLimit();n.miterLimit=h!==void 0?h:Yi,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(e){const t=e.fillStyle,n=[W.SET_FILL_STYLE,t];return typeof t!="string"&&n.push(!0),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[W.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const n=e.fillStyle;(typeof n!="string"||e.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,t){const n=e.strokeStyle,s=e.lineCap,r=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=s||r!=e.currentLineDash&&!It(e.currentLineDash,r)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(n!==void 0&&t.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=s,e.currentLineDash=r,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[W.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=da(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Qs(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class Fm extends rn{constructor(e,t,n,s){super(e,t,n,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const n=e.getFlatCoordinates(),s=e.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(n,s);this.instructions.push([W.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([W.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const n=e.getFlatCoordinates(),s=e.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(n,s);this.instructions.push([W.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([W.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const n=e.getAnchor(),s=e.getSize(),r=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=e.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=s[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class zm extends rn{constructor(e,t,n,s){super(e,t,n,s)}drawFlatCoordinates_(e,t,n,s){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,n,s,!1,!1),a=[W.MOVE_TO_LINE_TO,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),n}drawLineString(e,t){const n=this.state,s=n.strokeStyle,r=n.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,ct,ht],Ft);const o=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(St),this.endGeometry(t)}drawMultiLineString(e,t){const n=this.state,s=n.strokeStyle,r=n.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,ct,ht],Ft);const o=e.getEnds(),a=e.getFlatCoordinates(),l=e.getStride();let c=0;for(let h=0,d=o.length;h<d;++h)c=this.drawFlatCoordinates_(a,c,o[h],l);this.hitDetectionInstructions.push(St),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(St),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(St),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Ft)}}class ko extends rn{constructor(e,t,n,s){super(e,t,n,s)}drawFlatCoordinatess_(e,t,n,s){const r=this.state,o=r.fillStyle!==void 0,a=r.strokeStyle!==void 0,l=n.length;this.instructions.push(Ft),this.hitDetectionInstructions.push(Ft);for(let c=0;c<l;++c){const h=n[c],d=this.coordinates.length,u=this.appendFlatLineCoordinates(e,t,h,s,!0,!a),f=[W.MOVE_TO_LINE_TO,d,u];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(Do),this.hitDetectionInstructions.push(Do)),t=h}return o&&(this.instructions.push(En),this.hitDetectionInstructions.push(En)),a&&(this.instructions.push(St),this.hitDetectionInstructions.push(St)),t}drawCircle(e,t){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_FILL_STYLE,Ce]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,ct,ht]);const o=e.getFlatCoordinates(),a=e.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const c=[W.CIRCLE,l];this.instructions.push(Ft,c),this.hitDetectionInstructions.push(Ft,c),n.fillStyle!==void 0&&(this.instructions.push(En),this.hitDetectionInstructions.push(En)),n.strokeStyle!==void 0&&(this.instructions.push(St),this.hitDetectionInstructions.push(St)),this.endGeometry(t)}drawPolygon(e,t){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_FILL_STYLE,Ce]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,ct,ht]);const o=e.getEnds(),a=e.getOrientedFlatCoordinates(),l=e.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(t)}drawMultiPolygon(e,t){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_FILL_STYLE,Ce]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,ct,ht]);const o=e.getEndss(),a=e.getOrientedFlatCoordinates(),l=e.getStride();let c=0;for(let h=0,d=o.length;h<d;++h)c=this.drawFlatCoordinatess_(a,c,o[h],l);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let n=0,s=t.length;n<s;++n)t[n]=At(t[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function Nm(i,e,t,n,s){const r=[];let o=t,a=0,l=e.slice(t,2);for(;a<i&&o+s<n;){const[c,h]=l.slice(-2),d=e[o+s],u=e[o+s+1],f=Math.sqrt((d-c)*(d-c)+(u-h)*(u-h));if(a+=f,a>=i){const m=(i-a+f)/f,g=Ye(c,d,m),y=Ye(h,u,m);l.push(g,y),r.push(l),l=[g,y],a==i&&(o+=s),a=0}else if(a<i)l.push(e[o+s],e[o+s+1]),o+=s;else{const m=f-a,g=Ye(c,d,m/f),y=Ye(h,u,m/f);l.push(g,y),r.push(l),l=[g,y],a=0,o+=s}}return a>0&&r.push(l),r}function Gm(i,e,t,n,s){let r=t,o=t,a=0,l=0,c=t,h,d,u,f,m,g,y,p,_,v;for(d=t;d<n;d+=s){const x=e[d],b=e[d+1];m!==void 0&&(_=x-m,v=b-g,f=Math.sqrt(_*_+v*v),y!==void 0&&(l+=u,h=Math.acos((y*_+p*v)/(u*f)),h>i&&(l>a&&(a=l,r=c,o=d),l=0,c=d-s)),u=f,y=_,p=v),m=x,g=b}return l+=f,l>a?[c,d]:[r,o]}const zn={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Wm extends rn{constructor(e,t,n,s){super(e,t,n,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Ce]={fillStyle:Ce},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const n=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!n&&!s)return;const o=this.coordinates;let a=o.length;const l=e.getType();let c=null,h=e.getStride();if(r.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!Ie(this.getBufferedMaxExtent(),e.getExtent()))return;let d;if(c=e.getFlatCoordinates(),l=="LineString")d=[c.length];else if(l=="MultiLineString")d=e.getEnds();else if(l=="Polygon")d=e.getEnds().slice(0,1);else if(l=="MultiPolygon"){const g=e.getEndss();d=[];for(let y=0,p=g.length;y<p;++y)d.push(g[y][0])}this.beginGeometry(e,t);const u=r.repeat,f=u?void 0:r.textAlign;let m=0;for(let g=0,y=d.length;g<y;++g){let p;u?p=Nm(u*this.resolution,c,m,d[g],h):p=[c.slice(m,d[g])];for(let _=0,v=p.length;_<v;++_){const x=p[_];let b=0,I=x.length;if(f==null){const L=Gm(r.maxAngle,x,0,x.length,2);b=L[0],I=L[1]}for(let L=b;L<I;L+=h)o.push(x[L],x[L+1]);const P=o.length;m=d[g],this.drawChars_(a,P),a=P}}this.endGeometry(t)}else{let d=r.overflow?null:[];switch(l){case"Point":case"MultiPoint":c=e.getFlatCoordinates();break;case"LineString":c=e.getFlatMidpoint();break;case"Circle":c=e.getCenter();break;case"MultiLineString":c=e.getFlatMidpoints(),h=2;break;case"Polygon":c=e.getFlatInteriorPoint(),r.overflow||d.push(c[2]/this.resolution),h=3;break;case"MultiPolygon":const p=e.getFlatInteriorPoints();c=[];for(let _=0,v=p.length;_<v;_+=3)r.overflow||d.push(p[_+2]/this.resolution),c.push(p[_],p[_+1]);if(c.length===0)return;h=2;break}const u=this.appendFlatPointCoordinates(c,h);if(u===a)return;if(d&&(u-a)/2!==c.length/h){let p=a/2;d=d.filter((_,v)=>{const x=o[(p+v)*2]===c[v*h]&&o[(p+v)*2+1]===c[v*h+1];return x||--p,x})}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&this.updateFillStyle(this.state,this.createFill),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let f=r.padding;if(f!=kt&&(r.scale[0]<0||r.scale[1]<0)){let p=r.padding[0],_=r.padding[1],v=r.padding[2],x=r.padding[3];r.scale[0]<0&&(_=-_,x=-x),r.scale[1]<0&&(p=-p,v=-v),f=[p,_,v,x]}const m=this.pixelRatio;this.instructions.push([W.DRAW_IMAGE,a,u,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,f==kt?kt:f.map(function(p){return p*m}),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const g=1/m,y=this.state.fillStyle;r.backgroundFill&&(this.state.fillStyle=Ce,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([W.DRAW_IMAGE,a,u,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[g,g],NaN,void 0,this.declutterImageWithText_,f,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Ce:this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),r.backgroundFill&&(this.state.fillStyle=y,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,n=this.textFillState_,s=this.strokeKey_;e&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:t.font,textAlign:t.textAlign||Hi,justify:t.justify,textBaseline:t.textBaseline||Dn,scale:t.scale});const o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))}drawChars_(e,t){const n=this.textStrokeState_,s=this.textState_,r=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=zn[s.textBaseline],h=this.textOffsetY_*l,d=this.text_,u=n?n.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([W.DRAW_CHARS,e,t,c,s.overflow,a,s.maxAngle,l,h,r,u*l,d,o,1]),this.hitDetectionInstructions.push([W.DRAW_CHARS,e,t,c,s.overflow,a&&Ce,s.maxAngle,1,h,r,u,d,o,1/l])}setTextStyle(e,t){let n,s,r;if(!e)this.text_="";else{const o=e.getFill();o?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=Ke(o.getColor()||Ce)):(s=null,this.textFillState_=s);const a=e.getStroke();if(!a)r=null,this.textStrokeState_=r;else{r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const m=a.getLineDash(),g=a.getLineDashOffset(),y=a.getWidth(),p=a.getMiterLimit();r.lineCap=a.getLineCap()||On,r.lineDash=m?m.slice():ct,r.lineDashOffset=g===void 0?ht:g,r.lineJoin=a.getLineJoin()||gi,r.lineWidth=y===void 0?Zi:y,r.miterLimit=p===void 0?Yi:p,r.strokeStyle=Ke(a.getColor()||$i)}n=this.textState_;const l=e.getFont()||Ga;If(l);const c=e.getScaleArray();n.overflow=e.getOverflow(),n.font=l,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.repeat=e.getRepeat(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||Dn,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||kt,n.scale=c===void 0?[1,1]:c;const h=e.getOffsetX(),d=e.getOffsetY(),u=e.getRotateWithView(),f=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=h===void 0?0:h,this.textOffsetY_=d===void 0?0:d,this.textRotateWithView_=u===void 0?!1:u,this.textRotation_=f===void 0?0:f,this.strokeKey_=r?(typeof r.strokeStyle=="string"?r.strokeStyle:J(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=s?typeof s.fillStyle=="string"?s.fillStyle:"|"+J(s.fillStyle):""}this.declutterImageWithText_=t}}const Xm={Circle:ko,Default:rn,Image:Fm,LineString:zm,Polygon:ko,Text:Wm};class Fo{constructor(e,t,n,s){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=s,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const n=this.buildersByZIndex_[t];for(const s in n){const r=n[s].finish();e[t][s]=r}}return e}getBuilder(e,t){const n=e!==void 0?e.toString():"0";let s=this.buildersByZIndex_[n];s===void 0&&(s={},this.buildersByZIndex_[n]=s);let r=s[t];if(r===void 0){const o=Xm[t];r=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[t]=r}return r}}function Bm(i,e,t,n,s,r,o,a,l,c,h,d){let u=i[e],f=i[e+1],m=0,g=0,y=0,p=0;function _(){m=u,g=f,e+=n,u=i[e],f=i[e+1],p+=y,y=Math.sqrt((u-m)*(u-m)+(f-g)*(f-g))}do _();while(e<t-n&&p+y<r);let v=y===0?0:(r-p)/y;const x=Ye(m,u,v),b=Ye(g,f,v),I=e-n,P=p,L=r+a*l(c,s,h);for(;e<t-n&&p+y<L;)_();v=y===0?0:(L-p)/y;const O=Ye(m,u,v),k=Ye(g,f,v);let T;if(d){const w=[x,b,O,k];La(w,0,4,2,d,w,w),T=w[0]>w[2]}else T=x>O;const S=Math.PI,E=[],C=I+n===e;e=I,y=0,p=P,u=i[e],f=i[e+1];let R;if(C){_(),R=Math.atan2(f-g,u-m),T&&(R+=R>0?-S:S);const w=(O+x)/2,M=(k+b)/2;return E[0]=[w,M,(L-r)/2,R,s],E}s=s.replace(/\n/g," ");for(let w=0,M=s.length;w<M;){_();let A=Math.atan2(f-g,u-m);if(T&&(A+=A>0?-S:S),R!==void 0){let G=A-R;if(G+=G>S?-2*S:G<-S?2*S:0,Math.abs(G)>o)return null}R=A;const F=w;let z=0;for(;w<M;++w){const G=T?M-w-1:w,B=a*l(c,s[G],h);if(e+n<t&&p+y<r+z+B/2)break;z+=B}if(w===F)continue;const Z=T?s.substring(M-F,M-w):s.substring(F,w);v=y===0?0:(r+z/2-p)/y;const D=Ye(m,u,v),N=Ye(g,f,v);E.push([D,N,z/2,A,Z]),r+=z}return E}function Ym(i,e,t,n){let s=i[e],r=i[e+1],o=0;for(let a=e+n;a<t;a+=n){const l=i[a],c=i[a+1];o+=Math.sqrt((l-s)*(l-s)+(c-r)*(c-r)),s=l,r=c}return o}const Ut=He(),ft=[],rt=[],ot=[],mt=[];function zo(i){return i[3].declutterBox}const No=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function Ss(i,e){return e==="start"?e=No.test(i)?"right":"left":e==="end"&&(e=No.test(i)?"left":"right"),zn[e]}function $m(i,e,t){return t>0&&i.push(`
`,""),i.push(e,""),i}class Hm{constructor(e,t,n,s){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=Je(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,n,s){const r=e+t+n+s;if(this.labels_[r])return this.labels_[r];const o=s?this.strokeStates[s]:null,a=n?this.fillStates[n]:null,l=this.textStates[t],c=this.pixelRatio,h=[l.scale[0]*c,l.scale[1]*c],d=Array.isArray(e),u=l.justify?zn[l.justify]:Ss(Array.isArray(e)?e[0]:e,l.textAlign||Hi),f=s&&o.lineWidth?o.lineWidth:0,m=d?e:e.split(`
`).reduce($m,[]),{width:g,height:y,widths:p,heights:_,lineWidths:v}=Lf(l,m),x=g+f,b=[],I=(x+2)*h[0],P=(y+f)*h[1],L={width:I<0?Math.floor(I):Math.ceil(I),height:P<0?Math.floor(P):Math.ceil(P),contextInstructions:b};(h[0]!=1||h[1]!=1)&&b.push("scale",h),s&&(b.push("strokeStyle",o.strokeStyle),b.push("lineWidth",f),b.push("lineCap",o.lineCap),b.push("lineJoin",o.lineJoin),b.push("miterLimit",o.miterLimit),b.push("setLineDash",[o.lineDash]),b.push("lineDashOffset",o.lineDashOffset)),n&&b.push("fillStyle",a.fillStyle),b.push("textBaseline","middle"),b.push("textAlign","center");const O=.5-u;let k=u*x+O*f;const T=[],S=[];let E=0,C=0,R=0,w=0,M;for(let A=0,F=m.length;A<F;A+=2){const z=m[A];if(z===`
`){C+=E,E=0,k=u*x+O*f,++w;continue}const Z=m[A+1]||l.font;Z!==M&&(s&&T.push("font",Z),n&&S.push("font",Z),M=Z),E=Math.max(E,_[R]);const D=[z,k+O*p[R]+u*(p[R]-v[w]),.5*(f+E)+C];k+=p[R],s&&T.push("strokeText",D),n&&S.push("fillText",D),++R}return Array.prototype.push.apply(b,T),Array.prototype.push.apply(b,S),this.labels_[r]=L,L}replayTextBackground_(e,t,n,s,r,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,s),e.lineTo.apply(e,r),e.lineTo.apply(e,t),o&&(this.alignFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,n,s,r,o,a,l,c,h,d,u,f,m,g,y){a*=u[0],l*=u[1];let p=n-a,_=s-l;const v=r+c>e?e-c:r,x=o+h>t?t-h:o,b=m[3]+v*u[0]+m[1],I=m[0]+x*u[1]+m[2],P=p-m[3],L=_-m[0];(g||d!==0)&&(ft[0]=P,mt[0]=P,ft[1]=L,rt[1]=L,rt[0]=P+b,ot[0]=rt[0],ot[1]=L+I,mt[1]=ot[1]);let O;return d!==0?(O=Tt(Je(),n,s,1,1,d,-n,-s),ge(O,ft),ge(O,rt),ge(O,ot),ge(O,mt),Ct(Math.min(ft[0],rt[0],ot[0],mt[0]),Math.min(ft[1],rt[1],ot[1],mt[1]),Math.max(ft[0],rt[0],ot[0],mt[0]),Math.max(ft[1],rt[1],ot[1],mt[1]),Ut)):Ct(Math.min(P,P+b),Math.min(L,L+I),Math.max(P,P+b),Math.max(L,L+I),Ut),f&&(p=Math.round(p),_=Math.round(_)),{drawImageX:p,drawImageY:_,drawImageW:v,drawImageH:x,originX:c,originY:h,declutterBox:{minX:Ut[0],minY:Ut[1],maxX:Ut[2],maxY:Ut[3],value:y},canvasTransform:O,scale:u}}replayImageOrLabel_(e,t,n,s,r,o,a){const l=!!(o||a),c=s.declutterBox,h=e.canvas,d=a?a[2]*s.scale[0]/2:0;return c.minX-d<=h.width/t&&c.maxX+d>=0&&c.minY-d<=h.height/t&&c.maxY+d>=0&&(l&&this.replayTextBackground_(e,ft,rt,ot,mt,o,a),Mf(e,s.canvasTransform,r,n,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(e){if(this.alignFill_){const t=ge(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;e.save(),e.translate(t[0]%n,t[1]%n),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,n,s){const r=this.textStates[t],o=this.createLabel(e,t,s,n),a=this.strokeStates[n],l=this.pixelRatio,c=Ss(Array.isArray(e)?e[0]:e,r.textAlign||Hi),h=zn[r.textBaseline||Dn],d=a&&a.lineWidth?a.lineWidth:0,u=o.width/l-2*r.scale[0],f=c*u+2*(.5-c)*d,m=h*o.height/l+2*(.5-h)*d;return{label:o,anchorX:f,anchorY:m}}execute_(e,t,n,s,r,o,a,l){let c;this.pixelCoordinates_&&It(n,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=Nt(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),au(this.renderedTransform_,n));let h=0;const d=s.length;let u=0,f,m,g,y,p,_,v,x,b,I,P,L,O=0,k=0,T=null,S=null;const E=this.coordinateCache_,C=this.viewRotation_,R=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,w={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:C},M=this.instructions!=s||this.overlaps?0:200;let A,F,z,Z;for(;h<d;){const D=s[h];switch(D[0]){case W.BEGIN_GEOMETRY:A=D[1],Z=D[3],A.getGeometry()?a!==void 0&&!Ie(a,Z.getExtent())?h=D[2]+1:++h:h=D[2];break;case W.BEGIN_PATH:O>M&&(this.fill_(e),O=0),k>M&&(e.stroke(),k=0),!O&&!k&&(e.beginPath(),y=NaN,p=NaN),++h;break;case W.CIRCLE:u=D[1];const G=c[u],B=c[u+1],ee=c[u+2],K=c[u+3],$=ee-G,te=K-B,ue=Math.sqrt($*$+te*te);e.moveTo(G+ue,B),e.arc(G,B,ue,0,2*Math.PI,!0),++h;break;case W.CLOSE_PATH:e.closePath(),++h;break;case W.CUSTOM:u=D[1],f=D[2];const fe=D[3],le=D[4],j=D.length==6?D[5]:void 0;w.geometry=fe,w.feature=A,h in E||(E[h]=[]);const Y=E[h];j?j(c,u,f,2,Y):(Y[0]=c[u],Y[1]=c[u+1],Y.length=2),le(Y,w),++h;break;case W.DRAW_IMAGE:u=D[1],f=D[2],x=D[3],m=D[4],g=D[5];let ne=D[6];const ce=D[7],we=D[8],Ve=D[9],on=D[10];let Yt=D[11];const is=D[12];let Se=D[13];const Oe=D[14],We=D[15];if(!x&&D.length>=20){b=D[19],I=D[20],P=D[21],L=D[22];const Le=this.drawLabelWithPointPlacement_(b,I,P,L);x=Le.label,D[3]=x;const Zt=D[23];m=(Le.anchorX-Zt)*this.pixelRatio,D[4]=m;const De=D[24];g=(Le.anchorY-De)*this.pixelRatio,D[5]=g,ne=x.height,D[6]=ne,Se=x.width,D[13]=Se}let it;D.length>25&&(it=D[25]);let $t,wt,ut;D.length>17?($t=D[16],wt=D[17],ut=D[18]):($t=kt,wt=!1,ut=!1),on&&R?Yt+=C:!on&&!R&&(Yt-=C);let Ht=0;for(;u<f;u+=2){if(it&&it[Ht++]<Se/this.pixelRatio)continue;const Le=this.calculateImageOrLabelDimensions_(x.width,x.height,c[u],c[u+1],Se,ne,m,g,we,Ve,Yt,is,r,$t,wt||ut,A),Zt=[e,t,x,Le,ce,wt?T:null,ut?S:null];if(l){if(Oe==="none")continue;if(Oe==="obstacle"){l.insert(Le.declutterBox);continue}else{let De,nt;if(We){const Me=f-u;if(!We[Me]){We[Me]=Zt;continue}if(De=We[Me],delete We[Me],nt=zo(De),l.collides(nt))continue}if(l.collides(Le.declutterBox))continue;De&&(l.insert(nt),this.replayImageOrLabel_.apply(this,De)),l.insert(Le.declutterBox)}}this.replayImageOrLabel_.apply(this,Zt)}++h;break;case W.DRAW_CHARS:const an=D[1],xe=D[2],ns=D[3],ll=D[4];L=D[5];const cl=D[6],Er=D[7],Sr=D[8];P=D[9];const ss=D[10];b=D[11],I=D[12];const br=[D[13],D[13]],rs=this.textStates[I],vi=rs.font,xi=[rs.scale[0]*Er,rs.scale[1]*Er];let Ei;vi in this.widths_?Ei=this.widths_[vi]:(Ei={},this.widths_[vi]=Ei);const Tr=Ym(c,an,xe,2),Cr=Math.abs(xi[0])*So(vi,b,Ei);if(ll||Cr<=Tr){const Le=this.textStates[I].textAlign,Zt=(Tr-Cr)*Ss(b,Le),De=Bm(c,an,xe,2,b,Zt,cl,Math.abs(xi[0]),So,vi,Ei,R?0:this.viewRotation_);e:if(De){const nt=[];let Me,ln,cn,be,ke;if(P)for(Me=0,ln=De.length;Me<ln;++Me){ke=De[Me],cn=ke[4],be=this.createLabel(cn,I,"",P),m=ke[2]+(xi[0]<0?-ss:ss),g=ns*be.height+(.5-ns)*2*ss*xi[1]/xi[0]-Sr;const st=this.calculateImageOrLabelDimensions_(be.width,be.height,ke[0],ke[1],be.width,be.height,m,g,0,0,ke[3],br,!1,kt,!1,A);if(l&&l.collides(st.declutterBox))break e;nt.push([e,t,be,st,1,null,null])}if(L)for(Me=0,ln=De.length;Me<ln;++Me){ke=De[Me],cn=ke[4],be=this.createLabel(cn,I,L,""),m=ke[2],g=ns*be.height-Sr;const st=this.calculateImageOrLabelDimensions_(be.width,be.height,ke[0],ke[1],be.width,be.height,m,g,0,0,ke[3],br,!1,kt,!1,A);if(l&&l.collides(st.declutterBox))break e;nt.push([e,t,be,st,1,null,null])}l&&l.load(nt.map(zo));for(let st=0,hl=nt.length;st<hl;++st)this.replayImageOrLabel_.apply(this,nt[st])}}++h;break;case W.END_GEOMETRY:if(o!==void 0){A=D[1];const Le=o(A,Z);if(Le)return Le}++h;break;case W.FILL:M?O++:this.fill_(e),++h;break;case W.MOVE_TO_LINE_TO:for(u=D[1],f=D[2],F=c[u],z=c[u+1],_=F+.5|0,v=z+.5|0,(_!==y||v!==p)&&(e.moveTo(F,z),y=_,p=v),u+=2;u<f;u+=2)F=c[u],z=c[u+1],_=F+.5|0,v=z+.5|0,(u==f-2||_!==y||v!==p)&&(e.lineTo(F,z),y=_,p=v);++h;break;case W.SET_FILL_STYLE:T=D,this.alignFill_=D[2],O&&(this.fill_(e),O=0,k&&(e.stroke(),k=0)),e.fillStyle=D[1],++h;break;case W.SET_STROKE_STYLE:S=D,k&&(e.stroke(),k=0),this.setStrokeStyle_(e,D),++h;break;case W.STROKE:M?k++:e.stroke(),++h;break;default:++h;break}}O&&this.fill_(e),k&&e.stroke()}execute(e,t,n,s,r,o){this.viewRotation_=s,this.execute_(e,t,n,this.instructions,r,void 0,void 0,o)}executeHitDetection(e,t,n,s,r){return this.viewRotation_=n,this.execute_(e,1,t,this.hitDetectionInstructions,!0,s,r)}}const bs=["Polygon","Circle","LineString","Image","Text","Default"];class Go{constructor(e,t,n,s,r,o){this.maxExtent_=e,this.overlaps_=s,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Je(),this.createExecutors_(r)}clip(e,t){const n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e){for(const t in e){let n=this.executorsByZIndex_[t];n===void 0&&(n={},this.executorsByZIndex_[t]=n);const s=e[t];for(const r in s){const o=s[r];n[r]=new Hm(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const n=this.executorsByZIndex_[t];for(let s=0,r=e.length;s<r;++s)if(e[s]in n)return!0}return!1}forEachFeatureAtCoordinate(e,t,n,s,r,o){s=Math.round(s);const a=s*2+1,l=Tt(this.hitDetectionTransform_,s+.5,s+.5,1/t,-1/t,-n,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=Ee(a,a,void 0,{willReadFrequently:!0}));const h=this.hitDetectionContext_;h.canvas.width!==a||h.canvas.height!==a?(h.canvas.width=a,h.canvas.height=a):c||h.clearRect(0,0,a,a);let d;this.renderBuffer_!==void 0&&(d=He(),Di(d,e),Qs(d,t*(this.renderBuffer_+s),d));const u=Zm(s);let f;function m(b,I){const P=h.getImageData(0,0,a,a).data;for(let L=0,O=u.length;L<O;L++)if(P[u[L]]>0){if(!o||f!=="Image"&&f!=="Text"||o.includes(b)){const k=(u[L]-3)/4,T=s-k%a,S=s-(k/a|0),E=r(b,I,T*T+S*S);if(E)return E}h.clearRect(0,0,a,a);break}}const g=Object.keys(this.executorsByZIndex_).map(Number);g.sort(ui);let y,p,_,v,x;for(y=g.length-1;y>=0;--y){const b=g[y].toString();for(_=this.executorsByZIndex_[b],p=bs.length-1;p>=0;--p)if(f=bs[p],v=_[f],v!==void 0&&(x=v.executeHitDetection(h,l,n,m,d),x))return x}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const n=t[0],s=t[1],r=t[2],o=t[3],a=[n,s,n,o,r,o,r,s];return Nt(a,0,8,2,e,a),a}isEmpty(){return Gi(this.executorsByZIndex_)}execute(e,t,n,s,r,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(ui),this.maxExtent_&&(e.save(),this.clip(e,n)),o=o||bs;let c,h,d,u,f,m;for(a&&l.reverse(),c=0,h=l.length;c<h;++c){const g=l[c].toString();for(f=this.executorsByZIndex_[g],d=0,u=o.length;d<u;++d){const y=o[d];m=f[y],m!==void 0&&m.execute(e,t,n,s,r,a)}}this.maxExtent_&&e.restore()}}const Ts={};function Zm(i){if(Ts[i]!==void 0)return Ts[i];const e=i*2+1,t=i*i,n=new Array(t+1);for(let r=0;r<=i;++r)for(let o=0;o<=i;++o){const a=r*r+o*o;if(a>t)break;let l=n[a];l||(l=[],n[a]=l),l.push(((i+r)*e+(i+o))*4+3),r>0&&l.push(((i-r)*e+(i+o))*4+3),o>0&&(l.push(((i+r)*e+(i-o))*4+3),r>0&&l.push(((i-r)*e+(i-o))*4+3))}const s=[];for(let r=0,o=n.length;r<o;++r)n[r]&&s.push(...n[r]);return Ts[i]=s,s}class Vm extends Qa{constructor(e,t,n,s,r,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=n,this.transform_=s,this.transformRotation_=s?er(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Je()}drawImages_(e,t,n,s){if(!this.image_)return;const r=Nt(e,t,n,s,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let h=0,d=r.length;h<d;h+=2){const u=r[h]-this.imageAnchorX_,f=r[h+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const m=u+this.imageAnchorX_,g=f+this.imageAnchorY_;Tt(a,m,g,1,1,c,-m,-g),o.setTransform.apply(o,a),o.translate(m,g),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,u,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,t,n,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=Nt(e,t,n,s,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<n;t+=s){const l=r[t]+this.textOffsetX_,c=r[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(e,t,n,s,r){const o=this.context_,a=Nt(e,t,n,s,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;r&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return r&&o.closePath(),n}drawRings_(e,t,n,s){for(let r=0,o=n.length;r<o;++r)t=this.moveToLineTo_(e,t,n[r],s,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ie(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=tf(e,this.transform_,this.pixelCoordinates_),n=t[2]-t[0],s=t[3]-t[1],r=Math.sqrt(n*n+s*s),o=this.context_;o.beginPath(),o.arc(t[0],t[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const n=t.getGeometryFunction()(e);n&&(this.setStyle(t),this.drawGeometry(n))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let n=0,s=t.length;n<s;++n)this.drawGeometry(t[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ie(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Ie(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,s=e.getFlatCoordinates();let r=0;const o=e.getEnds(),a=e.getStride();n.beginPath();for(let l=0,c=o.length;l<c;++l)r=this.moveToLineTo_(s,r,o[l],a,!1);n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ie(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ie(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getOrientedFlatCoordinates();let s=0;const r=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,l=r.length;a<l;++a){const c=r[a];s=this.drawRings_(n,s,c,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,t.lineCap=e.lineCap),It(n.lineDash,e.lineDash)||t.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,n=this.contextTextState_,s=e.textAlign?e.textAlign:Hi;n?(n.font!=e.font&&(n.font=e.font,t.font=e.font),n.textAlign!=s&&(n.textAlign=s,t.textAlign=s),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=s,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:s,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const n=e.getColor();this.fillState_={fillStyle:Ke(n||Ce)}}if(!t)this.strokeState_=null;else{const n=t.getColor(),s=t.getLineCap(),r=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),c=t.getMiterLimit(),h=r||ct;this.strokeState_={lineCap:s!==void 0?s:On,lineDash:this.pixelRatio_===1?h:h.map(d=>d*this.pixelRatio_),lineDashOffset:(o||ht)*this.pixelRatio_,lineJoin:a!==void 0?a:gi,lineWidth:(l!==void 0?l:Zi)*this.pixelRatio_,miterLimit:c!==void 0?c:Yi,strokeStyle:Ke(n||$i)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const n=e.getPixelRatio(this.pixelRatio_),s=e.getAnchor(),r=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*n,this.imageAnchorY_=s[1]*n,this.imageHeight_=t[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/n,o[1]*this.pixelRatio_/n],this.imageWidth_=t[0]*n}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const f=t.getColor();this.textFillState_={fillStyle:Ke(f||Ce)}}const n=e.getStroke();if(!n)this.textStrokeState_=null;else{const f=n.getColor(),m=n.getLineCap(),g=n.getLineDash(),y=n.getLineDashOffset(),p=n.getLineJoin(),_=n.getWidth(),v=n.getMiterLimit();this.textStrokeState_={lineCap:m!==void 0?m:On,lineDash:g||ct,lineDashOffset:y||ht,lineJoin:p!==void 0?p:gi,lineWidth:_!==void 0?_:Zi,miterLimit:v!==void 0?v:Yi,strokeStyle:Ke(f||$i)}}const s=e.getFont(),r=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),h=e.getText(),d=e.getTextAlign(),u=e.getTextBaseline();this.textState_={font:s!==void 0?s:Ga,textAlign:d!==void 0?d:Hi,textBaseline:u!==void 0?u:Dn},this.text_=h!==void 0?Array.isArray(h)?h.reduce((f,m,g)=>f+=g%2?" ":m,""):h:"",this.textOffsetX_=r!==void 0?this.pixelRatio_*r:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const qe=.5;function jm(i,e,t,n,s,r,o){const a=i[0]*qe,l=i[1]*qe,c=Ee(a,l);c.imageSmoothingEnabled=!1;const h=c.canvas,d=new Vm(c,qe,s,null,o),u=t.length,f=Math.floor((256*256*256-1)/u),m={};for(let y=1;y<=u;++y){const p=t[y-1],_=p.getStyleFunction()||n;if(!_)continue;let v=_(p,r);if(!v)continue;Array.isArray(v)||(v=[v]);const b=(y*f).toString(16).padStart(7,"#00000");for(let I=0,P=v.length;I<P;++I){const L=v[I],O=L.getGeometryFunction()(p);if(!O||!Ie(s,O.getExtent()))continue;const k=L.clone(),T=k.getFill();T&&T.setColor(b);const S=k.getStroke();S&&(S.setColor(b),S.setLineDash(null)),k.setText(void 0);const E=L.getImage();if(E){const M=E.getImageSize();if(!M)continue;const A=Ee(M[0],M[1],void 0,{alpha:!1}),F=A.canvas;A.fillStyle=b,A.fillRect(0,0,F.width,F.height),k.setImage(new sn({img:F,imgSize:M,anchor:E.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:E.getOrigin(),opacity:1,size:E.getSize(),scale:E.getScale(),rotation:E.getRotation(),rotateWithView:E.getRotateWithView()}))}const C=k.getZIndex()||0;let R=m[C];R||(R={},m[C]=R,R.Polygon=[],R.Circle=[],R.LineString=[],R.Point=[]);const w=O.getType();if(w==="GeometryCollection"){const M=O.getGeometriesArrayRecursive();for(let A=0,F=M.length;A<F;++A){const z=M[A];R[z.getType().replace("Multi","")].push(z,k)}}else R[w.replace("Multi","")].push(O,k)}}const g=Object.keys(m).map(Number).sort(ui);for(let y=0,p=g.length;y<p;++y){const _=m[g[y]];for(const v in _){const x=_[v];for(let b=0,I=x.length;b<I;b+=2){d.setStyle(x[b+1]);for(let P=0,L=e.length;P<L;++P)d.setTransform(e[P]),d.drawGeometry(x[b])}}}return c.getImageData(0,0,h.width,h.height)}function qm(i,e,t){const n=[];if(t){const s=Math.floor(Math.round(i[0])*qe),r=Math.floor(Math.round(i[1])*qe),o=(de(s,0,t.width-1)+de(r,0,t.height-1)*t.width)*4,a=t.data[o],l=t.data[o+1],h=t.data[o+2]+256*(l+256*a),d=Math.floor((256*256*256-1)/e.length);h&&h%d===0&&n.push(e[h/d-1])}return n}const Um=.5,el={Point:rg,LineString:ig,Polygon:ag,MultiPoint:og,MultiLineString:ng,MultiPolygon:sg,GeometryCollection:tg,Circle:Qm};function Km(i,e){return parseInt(J(i),10)-parseInt(J(e),10)}function Jm(i,e){const t=Zs(i,e);return t*t}function Zs(i,e){return Um*i/e}function Qm(i,e,t,n,s){const r=t.getFill(),o=t.getStroke();if(r||o){const l=i.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(r,o),l.drawCircle(e,n)}const a=t.getText();if(a&&a.getText()){const l=(s||i).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}}function Wo(i,e,t,n,s,r,o){let a=!1;const l=t.getImage();if(l){const c=l.getImageState();c==oe.LOADED||c==oe.ERROR?l.unlistenImageChange(s):(c==oe.IDLE&&l.load(),l.listenImageChange(s),a=!0)}return eg(i,e,t,n,r,o),a}function eg(i,e,t,n,s,r){const o=t.getGeometryFunction()(e);if(!o)return;const a=o.simplifyTransformed(n,s);if(t.getRenderer())tl(i,a,t,e);else{const c=el[a.getType()];c(i,a,t,e,r)}}function tl(i,e,t,n){if(e.getType()=="GeometryCollection"){const r=e.getGeometries();for(let o=0,a=r.length;o<a;++o)tl(i,r[o],t,n);return}i.getBuilder(t.getZIndex(),"Default").drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer())}function tg(i,e,t,n,s){const r=e.getGeometriesArray();let o,a;for(o=0,a=r.length;o<a;++o){const l=el[r[o].getType()];l(i,r[o],t,n,s)}}function ig(i,e,t,n,s){const r=t.getStroke();if(r){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawLineString(e,n)}const o=t.getText();if(o&&o.getText()){const a=(s||i).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,n)}}function ng(i,e,t,n,s){const r=t.getStroke();if(r){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawMultiLineString(e,n)}const o=t.getText();if(o&&o.getText()){const a=(s||i).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,n)}}function sg(i,e,t,n,s){const r=t.getFill(),o=t.getStroke();if(o||r){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawMultiPolygon(e,n)}const a=t.getText();if(a&&a.getText()){const l=(s||i).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}}function rg(i,e,t,n,s){const r=t.getImage(),o=t.getText();let a;if(r){if(r.getImageState()!=oe.LOADED)return;let l=i;if(s){const h=r.getDeclutterMode();if(h!=="none")if(l=s,h==="obstacle"){const d=i.getBuilder(t.getZIndex(),"Image");d.setImageStyle(r,a),d.drawPoint(e,n)}else o&&o.getText()&&(a={})}const c=l.getBuilder(t.getZIndex(),"Image");c.setImageStyle(r,a),c.drawPoint(e,n)}if(o&&o.getText()){let l=i;s&&(l=s);const c=l.getBuilder(t.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(e,n)}}function og(i,e,t,n,s){const r=t.getImage(),o=t.getText();let a;if(r){if(r.getImageState()!=oe.LOADED)return;let l=i;if(s){const h=r.getDeclutterMode();if(h!=="none")if(l=s,h==="obstacle"){const d=i.getBuilder(t.getZIndex(),"Image");d.setImageStyle(r,a),d.drawMultiPoint(e,n)}else o&&o.getText()&&(a={})}const c=l.getBuilder(t.getZIndex(),"Image");c.setImageStyle(r,a),c.drawMultiPoint(e,n)}if(o&&o.getText()){let l=i;s&&(l=s);const c=l.getBuilder(t.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(e,n)}}function ag(i,e,t,n,s){const r=t.getFill(),o=t.getStroke();if(r||o){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawPolygon(e,n)}const a=t.getText();if(a&&a.getText()){const l=(s||i).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}}class lg extends Va{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=He(),this.wrappedRenderedExtent_=He(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,n){const s=t.extent,r=t.viewState,o=r.center,a=r.resolution,l=r.projection,c=r.rotation,h=l.getExtent(),d=this.getLayer().getSource(),u=t.pixelRatio,f=t.viewHints,m=!(f[_e.ANIMATING]||f[_e.INTERACTING]),g=this.compositionContext_,y=Math.round(t.size[0]*u),p=Math.round(t.size[1]*u),_=d.getWrapX()&&l.canWrapX(),v=_?ie(h):null,x=_?Math.ceil((s[2]-h[2])/v)+1:1;let b=_?Math.floor((s[0]-h[0])/v):0;do{const I=this.getRenderTransform(o,a,c,u,y,p,b*v);e.execute(g,1,I,c,m,void 0,n)}while(++b<x)}setupCompositionContext_(){if(this.opacity_!==1){const e=Ee(this.context.canvas.width,this.context.canvas.height,Co);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,Un(this.compositionContext_),Co.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const n=e.pixelRatio,s=e.layerStatesArray[e.layerIndex];lu(this.pixelTransform,1/n,1/n),Js(this.inversePixelTransform,this.pixelTransform);const r=ha(this.pixelTransform);this.useContainer(t,r,this.getBackground(e));const o=this.context,a=o.canvas,l=this.replayGroup_,c=this.declutterExecutorGroup;let h=l&&!l.isEmpty()||c&&!c.isEmpty();if(!h&&!(this.getLayer().hasListener(Qe.PRERENDER)||this.getLayer().hasListener(Qe.POSTRENDER)))return null;const d=Math.round(e.size[0]*n),u=Math.round(e.size[1]*n);a.width!=d||a.height!=u?(a.width=d,a.height=u,a.style.transform!==r&&(a.style.transform=r)):this.containerReused||o.clearRect(0,0,d,u),this.preRender(o,e);const f=e.viewState;f.projection,this.opacity_=s.opacity,this.setupCompositionContext_();let m=!1;if(h&&s.extent&&this.clipping){const g=Ot(s.extent);h=Ie(g,e.extent),m=h&&!ni(g,e.extent),m&&this.clipUnrotated(this.compositionContext_,e,g)}return h&&this.renderWorlds(l,e),m&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==f.rotation&&(this.renderedRotation_=f.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(t=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=[this.context.canvas.width,this.context.canvas.height];ge(this.pixelTransform,n);const s=this.renderedCenter_,r=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),h=[],d=n[0]*qe,u=n[1]*qe;h.push(this.getRenderTransform(s,r,o,qe,d,u,0).slice());const f=c.getSource(),m=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!ni(m,l)){let g=l[0];const y=ie(m);let p=0,_;for(;g<m[0];)--p,_=y*p,h.push(this.getRenderTransform(s,r,o,qe,d,u,_).slice()),g+=y;for(p=0,g=l[2];g>m[2];)++p,_=y*p,h.push(this.getRenderTransform(s,r,o,qe,d,u,_).slice()),g-=y}this.hitDetectionImageData_=jm(n,h,this.renderedFeatures_,c.getStyleFunction(),l,r,o)}t(qm(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,n,s,r){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),c={},h=function(f,m,g){const y=J(f),p=c[y];if(p){if(p!==!0&&g<p.distanceSq){if(g===0)return c[y]=!0,r.splice(r.lastIndexOf(p),1),s(f,l,m);p.geometry=m,p.distanceSq=g}}else{if(g===0)return c[y]=!0,s(f,l,m);r.push(c[y]={feature:f,layer:l,geometry:m,distanceSq:g,callback:s})}};let d;const u=[this.replayGroup_];return this.declutterExecutorGroup&&u.push(this.declutterExecutorGroup),u.some(f=>d=f.forEachFeatureAtCoordinate(e,o,a,n,h,f===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(m=>m.value):null)),d}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),n=t.getSource();if(!n)return!1;const s=e.viewHints[_e.ANIMATING],r=e.viewHints[_e.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&s||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,c=e.viewState,h=c.projection,d=c.resolution,u=e.pixelRatio,f=t.getRevision(),m=t.getRenderBuffer();let g=t.getRenderOrder();g===void 0&&(g=Km);const y=c.center.slice(),p=Qs(l,m*d),_=p.slice(),v=[p.slice()],x=h.getExtent();if(n.getWrapX()&&h.canWrapX()&&!ni(x,e.extent)){const R=ie(x),w=Math.max(ie(p)/2,R);p[0]=x[0]-w,p[2]=x[2]+w,Ea(y,h);const M=pa(v[0],h);M[0]<x[0]&&M[2]<x[2]?v.push([M[0]+R,M[1],M[2]+R,M[3]]):M[0]>x[0]&&M[2]>x[2]&&v.push([M[0]-R,M[1],M[2]-R,M[3]])}if(this.ready&&this.renderedResolution_==d&&this.renderedRevision_==f&&this.renderedRenderOrder_==g&&ni(this.wrappedRenderedExtent_,p))return It(this.renderedExtent_,_)||(this.hitDetectionImageData_=null,this.renderedExtent_=_),this.renderedCenter_=y,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const b=new Fo(Zs(d,u),p,d,u);let I;this.getLayer().getDeclutter()&&(I=new Fo(Zs(d,u),p,d,u));let P;for(let R=0,w=v.length;R<w;++R)n.loadFeatures(v[R],d,h);const L=Jm(d,u);let O=!0;const k=R=>{let w;const M=R.getStyleFunction()||t.getStyleFunction();if(M&&(w=M(R,d)),w){const A=this.renderFeature(R,L,w,b,P,I);O=O&&!A}},T=Ia(p),S=n.getFeaturesInExtent(T);g&&S.sort(g);for(let R=0,w=S.length;R<w;++R)k(S[R]);this.renderedFeatures_=S,this.ready=O;const E=b.finish(),C=new Go(p,d,u,n.getOverlaps(),E,t.getRenderBuffer());return I&&(this.declutterExecutorGroup=new Go(p,d,u,n.getOverlaps(),I.finish(),t.getRenderBuffer())),this.renderedResolution_=d,this.renderedRevision_=f,this.renderedRenderOrder_=g,this.renderedExtent_=_,this.wrappedRenderedExtent_=p,this.renderedCenter_=y,this.renderedProjection_=h,this.replayGroup_=C,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,n,s,r,o){if(!n)return!1;let a=!1;if(Array.isArray(n))for(let l=0,c=n.length;l<c;++l)a=Wo(s,e,n[l],t,this.boundHandleStyleImageChange_,r,o)||a;else a=Wo(s,e,n,t,this.boundHandleStyleImageChange_,r,o);return a}}class cg extends km{constructor(e){super(e)}createRenderer(){return new lg(this)}}class hg{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const n=this.entries_[e];return V(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const t=this.entries_[e];return V(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e}getValues(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){if(this.containsKey(e))return this.entries_[e].value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){V(!(e in this.entries_),16);const n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}}function Xo(i,e,t,n){return n!==void 0?(n[0]=i,n[1]=e,n[2]=t,n):[i,e,t]}function ts(i,e,t){return i+"/"+e+"/"+t}function il(i){return ts(i[0],i[1],i[2])}function dg(i){return i.split("/").map(Number)}function ug(i){return(i[1]<<i[0])+i[2]}function fg(i,e){const t=i[0],n=i[1],s=i[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const r=e.getFullTileRange(t);return r?r.containsXY(n,s):!0}class nl extends hg{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),n=dg(e)[0];this.forEach(s=>{s.tileCoord[0]!==n&&(this.remove(il(s.tileCoord)),s.release())})}}const Cs={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class sl extends tt{constructor(e){super(),this.projection=Ze(e.projection),this.attributions_=Bo(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(n,s){t.viewResolver=n,t.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Bo(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Bo(i){return i?Array.isArray(i)?function(e){return i}:typeof i=="function"?i:function(e){return[i]}:null}const Kt=[0,0,0],gt=5;class rl{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,V(Kd(this.resolutions_,function(s,r){return r-s}),17);let t;if(!e.origins){for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(!t)t=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,V(this.origins_.length==this.resolutions_.length,20));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Bt(n)),V(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,V(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:tr,V(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(s,r){const o=new pr(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(n){const a=this.getTileRangeForExtentAndZ(n,r);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,t,n){const s=this.getTileRangeForExtentAndZ(e,t);for(let r=s.minX,o=s.maxX;r<=o;++r)for(let a=s.minY,l=s.maxY;a<=l;++a)n([t,r,a])}forEachTileCoordParentTileRange(e,t,n,s){let r,o,a,l=null,c=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,s);c>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),r=jt(o,o,a,a,n)):r=this.getTileRangeForExtentAndZ(l,c,n),t(c,r))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const r=e[1]*2,o=e[2]*2;return jt(r,r+1,o,o+1,t)}const s=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;const s=e[0],r=e[1],o=e[2];if(t===s)return jt(r,o,r,o,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-s),c=Math.floor(r*l),h=Math.floor(o*l);if(t<s)return jt(c,c,h,h,n);const d=Math.floor(l*(r+1))-1,u=Math.floor(l*(o+1))-1;return jt(c,d,h,u,n)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,n)}getTileRangeForExtentAndZ(e,t,n){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Kt);const s=Kt[1],r=Kt[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Kt);const o=Kt[1],a=Kt[2];return jt(s,o,r,a,n)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),n=this.getResolution(e[0]),s=Ge(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*s[0]*n,t[1]-(e[2]+.5)*s[1]*n]}getTileCoordExtent(e,t){const n=this.getOrigin(e[0]),s=this.getResolution(e[0]),r=Ge(this.getTileSize(e[0]),this.tmpSize_),o=n[0]+e[1]*r[0]*s,a=n[1]-(e[2]+1)*r[1]*s,l=o+r[0]*s,c=a+r[1]*s;return Ct(o,a,l,c,t)}getTileCoordForCoordAndResolution(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)}getTileCoordForXYAndResolution_(e,t,n,s,r){const o=this.getZForResolution(n),a=n/this.getResolution(o),l=this.getOrigin(o),c=Ge(this.getTileSize(o),this.tmpSize_);let h=a*(e-l[0])/n/c[0],d=a*(l[1]-t)/n/c[1];return s?(h=fn(h,gt)-1,d=fn(d,gt)-1):(h=un(h,gt),d=un(d,gt)),Xo(o,h,d,r)}getTileCoordForXYAndZ_(e,t,n,s,r){const o=this.getOrigin(n),a=this.getResolution(n),l=Ge(this.getTileSize(n),this.tmpSize_);let c=(e-o[0])/a/l[0],h=(o[1]-t)/a/l[1];return s?(c=fn(c,gt)-1,h=fn(h,gt)-1):(c=un(c,gt),h=un(h,gt)),Xo(n,c,h,r)}getTileCoordForCoordAndZ(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const n=Us(this.resolutions_,e,t||0);return de(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return ka(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,n=new Array(t);for(let s=this.minZoom;s<t;++s)n[s]=this.getTileRangeForExtentAndZ(e,s);this.fullTileRanges_=n}}function ol(i){let e=i.getDefaultTileGrid();return e||(e=_g(i),i.setDefaultTileGrid(e)),e}function mg(i,e,t){const n=e[0],s=i.getTileCoordCenter(e),r=yr(t);if(!Xn(r,s)){const o=ie(r),a=Math.ceil((r[0]-s[0])/o);return s[0]+=o*a,i.getTileCoordForCoordAndZ(s,n)}return e}function gg(i,e,t,n){n=n!==void 0?n:"top-left";const s=al(i,e,t);return new rl({extent:i,origin:mu(i,n),resolutions:s,tileSize:t})}function pg(i){const e=i||{},t=e.extent||Ze("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:al(t,e.maxZoom,e.tileSize,e.maxResolution)};return new rl(n)}function al(i,e,t,n){e=e!==void 0?e:Iu,t=Ge(t!==void 0?t:tr);const s=et(i),r=ie(i);n=n>0?n:Math.max(r/t[0],s/t[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=n/Math.pow(2,l);return a}function _g(i,e,t,n){const s=yr(i);return gg(s,e,t,n)}function yr(i){i=Ze(i);let e=i.getExtent();if(!e){const t=180*ir.degrees/i.getMetersPerUnit();e=Ct(-t,-t,t,t)}return e}class yg extends sl{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Ge(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new nl(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const n=this.getTileCacheForProjection(e);n&&n.expireCache(t)}forEachLoadedTile(e,t,n,s){const r=this.getTileCacheForProjection(e);if(!r)return!1;let o=!0,a,l,c;for(let h=n.minX;h<=n.maxX;++h)for(let d=n.minY;d<=n.maxY;++d)l=ts(t,h,d),c=!1,r.containsKey(l)&&(a=r.get(l),c=a.getState()===X.LOADED,c&&(c=s(a)!==!1)),c||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,n,s,r){return q()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:ol(e)}getTileCacheForProjection(e){const t=this.getProjection();return V(t===null||Jt(t,e),68),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,n){const s=this.getTileGridForProjection(n),r=this.getTilePixelRatio(t),o=Ge(s.getTileSize(e),this.tmpSize);return r==1?o:om(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const n=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=mg(n,e,t)),fg(e,n)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const n=this.getTileCacheForProjection(t);e>n.highWaterMark&&(n.highWaterMark=e)}useTile(e,t,n,s){}}class vg extends dt{constructor(e,t){super(e),this.tile=t}}function xg(i,e){const t=/\{z\}/g,n=/\{x\}/g,s=/\{y\}/g,r=/\{-y\}/g;return function(o,a,l){if(o)return i.replace(t,o[0].toString()).replace(n,o[1].toString()).replace(s,o[2].toString()).replace(r,function(){const c=o[0],h=e.getFullTileRange(c);return V(h,55),(h.getHeight()-o[2]-1).toString()})}}function Eg(i,e){const t=i.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=xg(i[s],e);return Sg(n)}function Sg(i){return i.length===1?i[0]:function(e,t,n){if(!e)return;const s=ug(e),r=ai(s,i.length);return i[r](e,t,n)}}function bg(i){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(i);if(t){const n=t[1].charCodeAt(0),s=t[2].charCodeAt(0);let r;for(r=n;r<=s;++r)e.push(i.replace(t[0],String.fromCharCode(r)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(i),t){const n=parseInt(t[2],10);for(let s=parseInt(t[1],10);s<=n;s++)e.push(i.replace(t[0],s.toString()));return e}return e.push(i),e}class vr extends yg{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===vr.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,n=J(t),s=t.getState();let r;s==X.LOADING?(this.tileLoadingKeys_[n]=!0,r=Cs.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],r=s==X.ERROR?Cs.TILELOADERROR:s==X.LOADED?Cs.TILELOADEND:void 0),r!=null&&this.dispatchEvent(new vg(r,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=bg(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Eg(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,n){}useTile(e,t,n){const s=ts(e,t,n);this.tileCache.containsKey(s)&&this.tileCache.get(s)}}class Tg extends vr{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Cg,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Ua,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const n=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==n?t:{});for(const s in this.tileCacheForProjection){const r=this.tileCacheForProjection[s];r.expireCache(r==n?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!Jt(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!Jt(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Jt(t,e)))return this.tileGrid;const n=J(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=ol(e)),this.tileGridForProjection[n]}getTileCacheForProjection(e){const t=this.getProjection();if(!t||Jt(t,e))return this.tileCache;const n=J(e);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new nl(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}createTile_(e,t,n,s,r,o){const a=[e,t,n],l=this.getTileCoordForTileUrlFunction(a,r),c=l?this.tileUrlFunction(l,s,r):void 0,h=new this.tileClass(a,c!==void 0?X.IDLE:X.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=o,h.addEventListener(H.CHANGE,this.handleTileChange.bind(this)),h}getTile(e,t,n,s,r){const o=this.getProjection();if(!o||!r||Jt(o,r))return this.getTileInternal(e,t,n,s,o||r);const a=this.getTileCacheForProjection(r),l=[e,t,n];let c;const h=il(l);a.containsKey(h)&&(c=a.get(h));const d=this.getKey();if(c&&c.key==d)return c;const u=this.getTileGridForProjection(o),f=this.getTileGridForProjection(r),m=this.getTileCoordForTileUrlFunction(l,r),g=new Hs(o,u,r,f,l,m,this.getTilePixelRatio(s),this.getGutter(),(y,p,_,v)=>this.getTileInternal(y,p,_,v,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return g.key=d,c?(g.interimTile=c,g.refreshInterimChain(),a.replace(h,g)):a.set(h,g),g}getTileInternal(e,t,n,s,r){let o=null;const a=ts(e,t,n),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(e,t,n,s,r,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const c=o;o=this.createTile_(e,t,n,s,r,l),c.getState()==X.IDLE?o.interimTile=c.interimTile:o.interimTile=c,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const n=Ze(e);if(n){const s=J(n);s in this.tileGridForProjection||(this.tileGridForProjection[s]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function Cg(i,e){i.getImage().src=e}class Ig extends Tg{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",n=e.tileGrid!==void 0?e.tileGrid:pg({extent:yr(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}class xr extends tt{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new xr(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(se(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=U(e,H.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?wg(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function wg(i){if(typeof i=="function")return i;let e;return Array.isArray(i)?e=i:(V(typeof i.getZIndex=="function",41),e=[i]),function(){return e}}class Yo{constructor(e){this.rbush_=new Ja(e),this.items_={}}insert(e,t){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[J(t)]=n}load(e,t){const n=new Array(t.length);for(let s=0,r=t.length;s<r;s++){const o=e[s],a=t[s],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};n[s]=l,this.items_[J(a)]=l}this.rbush_.load(n)}remove(e){const t=J(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null}update(e,t){const n=this.items_[J(t)],s=[n.minX,n.minY,n.maxX,n.maxY];Wi(s,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(s){return s.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let n;for(let s=0,r=e.length;s<r;s++)if(n=t(e[s]),n)return n;return n}isEmpty(){return Gi(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Ct(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}const Be={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Lg(i,e){return[[-1/0,-1/0,1/0,1/0]]}let Mg=!1;function Rg(i,e,t,n,s,r,o){const a=new XMLHttpRequest;a.open("GET",typeof i=="function"?i(t,n,s):i,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=Mg,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=e.getType();let h;c=="json"||c=="text"?h=a.responseText:c=="xml"?(h=a.responseXML,h||(h=new DOMParser().parseFromString(a.responseText,"application/xml"))):c=="arraybuffer"&&(h=a.response),h?r(e.readFeatures(h,{extent:t,featureProjection:s}),e.readProjection(h)):o()}else o()},a.onerror=o,a.send()}function $o(i,e){return function(t,n,s,r,o){const a=this;Rg(i,e,t,n,s,function(l,c){a.addFeatures(l),r!==void 0&&r(l)},o||fi)}}class pt extends dt{constructor(e,t,n){super(e),this.feature=t,this.features=n}}class Ag extends sl{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=fi,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(V(this.format_,7),this.loader_=$o(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Lg;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Yo:null,this.loadedExtentsRtree_=new Yo,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,s;Array.isArray(e.features)?s=e.features:e.features&&(n=e.features,s=n.getArray()),!t&&n===void 0&&(n=new Ue(s)),s!==void 0&&this.addFeaturesInternal(s),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=J(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const n=e.getGeometry();if(n){const s=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new pt(Be.ADDFEATURE,e))}setupChangeEvents_(e,t){this.featureChangeKeys_[e]=[U(t,H.CHANGE,this.handleFeatureChange_,this),U(t,di.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(e,t){let n=!0;const s=t.getId();return s!==void 0&&(s.toString()in this.idIndex_?n=!1:this.idIndex_[s.toString()]=t),n&&(V(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],n=[],s=[];for(let r=0,o=e.length;r<o;r++){const a=e[r],l=J(a);this.addToIndex_(l,a)&&n.push(a)}for(let r=0,o=n.length;r<o;r++){const a=n[r],l=J(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const h=c.getExtent();t.push(h),s.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,s),this.hasListener(Be.ADDFEATURE))for(let r=0,o=n.length;r<o;r++)this.dispatchEvent(new pt(Be.ADDFEATURE,n[r]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Be.ADDFEATURE,function(n){t||(t=!0,e.push(n.feature),t=!1)}),this.addEventListener(Be.REMOVEFEATURE,function(n){t||(t=!0,e.remove(n.feature),t=!1)}),e.addEventListener(Te.ADD,n=>{t||(t=!0,this.addFeature(n.element),t=!1)}),e.addEventListener(Te.REMOVE,n=>{t||(t=!0,this.removeFeature(n.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(se);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const n=s=>{this.removeFeatureInternal(s)};this.featuresRtree_.forEach(n);for(const s in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[s])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new pt(Be.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(s){if(s.getGeometry().intersectsCoordinate(e))return t(s)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(n){if(n.getGeometry().intersectsExtent(e)){const r=t(n);if(r)return r}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Gi(this.nullGeometryFeatures_)||ra(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){t.push(n)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const s=_u(e,t);return[].concat(...s.map(r=>this.featuresRtree_.getInExtent(r)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const n=e[0],s=e[1];let r=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||Ni,this.featuresRtree_.forEachInExtent(l,function(c){if(t(c)){const h=c.getGeometry(),d=a;if(a=h.closestPointXY(n,s,o,a),a<d){r=c;const u=Math.sqrt(a);l[0]=n-u,l[1]=s-u,l[2]=n+u,l[3]=s+u}}}),r}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,n=J(t),s=t.getGeometry();if(!s)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[n]=t);else{const o=s.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const r=t.getId();if(r!==void 0){const o=r.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[n]=t;this.changed(),this.dispatchEvent(new pt(Be.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:J(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Gi(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,n){const s=this.loadedExtentsRtree_,r=this.strategy_(e,t,n);for(let o=0,a=r.length;o<a;++o){const l=r[o];s.forEachInExtent(l,function(h){return ni(h.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new pt(Be.FEATURESLOADSTART)),this.loader_.call(this,l,t,n,h=>{--this.loadingExtentsCount_,this.dispatchEvent(new pt(Be.FEATURESLOADEND,void 0,h))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new pt(Be.FEATURESLOADERROR))}),s.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let n;t.forEachInExtent(e,function(s){if(Wi(s.extent,e))return n=s,!0}),n&&t.remove(n)}removeFeature(e){if(!e)return;const t=J(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=J(e),n=this.featureChangeKeys_[t];if(!n)return;n.forEach(se),delete this.featureChangeKeys_[t];const s=e.getId();return s!==void 0&&delete this.idIndex_[s.toString()],delete this.uidIndex_[t],this.dispatchEvent(new pt(Be.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let t=!1;for(const n in this.idIndex_)if(this.idIndex_[n]===e){delete this.idIndex_[n],t=!0;break}return t}setLoader(e){this.loader_=e}setUrl(e){V(this.format_,7),this.url_=e,this.setLoader($o(e,this.format_))}}const Pg=()=>{apos.util.widgetPlayers.map={selector:"[data-map]",player:function(i){apos.util.onReady(()=>{if(!i.querySelector("[data-map-target"))return;const e=i.querySelector("[data-map-target"),t=e.dataset.latitude,n=e.dataset.longitude,s=lo([n,t]),r=new am({layers:[new xm({source:new Ig({url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png"})})],view:new je({center:s,zoom:e.dataset.mapzoomlevel}),target:e.querySelector(".map")});let o=s;function a(d,u){o=lo([u,d])}const l=new Wt({image:new sn({src:apos.util.assetUrl("/modules/map-widget/map-icon.png"),scale:.05})}),c=new xr({geometry:new Vn(o)});c.setStyle(l);const h=new cg({source:new Ag({features:[c]})});r.addLayer(h),setInterval(function(){c.getGeometry().setCoordinates(o)},1e3),a(t,n)})}}};(function(){window.apos=window.apos||{};var i=document.body&&document.body.getAttribute("data-apos");if(Object.assign(window.apos,JSON.parse(i||"{}")),i&&document.body.removeAttribute("data-apos"),window.apos.modules)for(const e of Object.values(window.apos.modules))e.alias&&(window.apos[e.alias]=e)})();fl();ml();gl();pl();_l();Tl();Cl();Il();wl();Ll();Al();Pl();Ol();Dl();Xl();Bl();qd();Pg();